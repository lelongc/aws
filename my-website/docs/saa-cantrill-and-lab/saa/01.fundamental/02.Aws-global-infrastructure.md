

## AWS Global Infrastructure (Hạ tầng Toàn cầu của AWS)

AWS Global Infrastructure là một khái niệm nền tảng quan trọng nhất, là "bộ xương" vật lý giúp cho toàn bộ thế giới điện toán đám mây của Amazon hoạt động.  
Hiểu rõ nó sẽ giúp bạn biết cách xây dựng các ứng dụng có tốc độ nhanh, độ tin cậy cao và khả năng phục hồi sau thảm họa.

Hãy tưởng tượng AWS Global Infrastructure như một mạng lưới hậu cần (logistics) khổng lồ của một công ty giao hàng toàn cầu.

---

### Các thành phần chính của AWS Global Infrastructure

Hạ tầng này được xây dựng theo nhiều tầng lớp, với mỗi tầng có một mục đích riêng về khả năng chịu lỗi và hiệu năng.

---

### 1. Regions (Vùng)

- **Tưởng tượng:**  
  Một Region giống như một "Trung tâm Điều phối Quốc gia hoặc Khu vực", ví dụ như "Trung tâm Điều phối Đông Nam Á" đặt tại Singapore.

- **Là gì:**  
  Một Region là một khu vực địa lý riêng biệt trên thế giới (ví dụ: `ap-southeast-1` ở Singapore, `us-east-1` ở North Virginia, `eu-west-1` ở Ireland). Mỗi Region được thiết kế để hoàn toàn độc lập và cách ly với các Region khác.

- **Mục đích:**
  - **Tuân thủ Luật pháp (Data Sovereignty):**  
    Giúp bạn lưu trữ dữ liệu trong một quốc gia hoặc khu vực cụ thể để tuân thủ các quy định pháp luật (ví dụ: luật bảo vệ dữ liệu của Châu Âu GDPR yêu cầu dữ liệu người dùng châu Âu phải được lưu tại đây).
  - **Giảm độ trễ (Latency):**  
    Bằng cách chọn Region gần với người dùng cuối của bạn nhất, bạn có thể giảm thiểu độ trễ mạng, giúp ứng dụng chạy nhanh hơn.  
    Ví dụ, nếu người dùng của bạn chủ yếu ở Việt Nam, việc chọn Region Singapore sẽ nhanh hơn rất nhiều so với chọn Region ở Mỹ.
  - **Khả năng Phục hồi sau Thảm họa (Disaster Recovery):**  
    Nếu một thảm họa cực lớn (như động đất, sóng thần) phá hủy toàn bộ một Region, các Region khác vẫn hoạt động bình thường.  
    Bạn có thể thiết kế hệ thống sao lưu dữ liệu của mình sang một Region khác để đề phòng.

---

### 2. Availability Zones (AZs - Vùng Sẵn sàng)

- **Tưởng tượng:**  
  Bên trong mỗi "Trung tâm Điều phối Khu vực" (Region), sẽ có nhiều "Nhà kho Tổng" (Availability Zone) riêng biệt, đặt cách xa nhau vài chục kilomet.

- **Là gì:**  
  Mỗi AZ là một hoặc nhiều trung tâm dữ liệu (data center) riêng biệt, có nguồn điện, hệ thống làm mát, và kết nối mạng hoàn toàn độc lập với các AZ khác trong cùng một Region.

- **Mối quan hệ:**  
  Một Region luôn được tạo thành từ tối thiểu 2 hoặc 3 AZ. Các AZ trong cùng một Region được kết nối với nhau bằng các đường truyền mạng cáp quang có độ trễ cực thấp (low-latency).

- **Mục đích:**
  - **Tính Sẵn sàng Cao (High Availability):**  
    Đây là mục đích quan trọng nhất. Nếu có một sự cố lớn xảy ra tại một AZ (ví dụ: mất điện, lũ lụt, cháy nổ), các ứng dụng của bạn đang chạy ở các AZ khác trong cùng Region đó sẽ không bị ảnh hưởng và vẫn tiếp tục hoạt động.
  - **Thiết kế kiến trúc chịu lỗi:**  
    Nguyên tắc vàng của AWS là "thiết kế cho sự cố". Bạn nên triển khai ứng dụng của mình chạy trên nhiều AZ (multi-AZ).  
    Ví dụ, bạn chạy 2 máy chủ web, một ở AZ-A và một ở AZ-B. Nếu AZ-A gặp sự cố, traffic sẽ tự động được chuyển hết sang máy chủ ở AZ-B, và người dùng cuối không hề nhận ra có vấn đề gì.

---

### 3. Edge Locations & Regional Edge Caches (Điểm Biên & Bộ đệm Biên Khu vực)

- **Tưởng tượng:**  
  Ngoài các "Nhà kho Tổng" (AZ), công ty giao hàng còn có hàng trăm "Bưu cục Giao hàng Phường/Xã" (Edge Location) và các "Kho trung chuyển Quận/Huyện" (Regional Edge Cache) nằm rải rác khắp nơi trên thế giới, ngay gần khu dân cư.

- **Là gì:**
  - **Edge Locations:**  
    Là các trung tâm dữ liệu nhỏ hơn rất nhiều so với AZ, được đặt tại các thành phố lớn trên toàn cầu (bao gồm cả Hà Nội và TP.HCM ở Việt Nam).
  - **Regional Edge Caches:**  
    Là một tầng đệm nằm giữa Region và các Edge Location, có dung lượng cache lớn hơn Edge Location.

- **Mục đích:**
  - **Tăng tốc độ Phân phối Nội dung (Content Delivery):**  
    Đây là mục đích chính. Các dịch vụ như Amazon CloudFront (CDN) sử dụng các điểm biên này.  
    Lần đầu tiên một người dùng ở Việt Nam yêu cầu một hình ảnh, CloudFront sẽ lấy hình ảnh đó từ Region (ví dụ Singapore) và lưu một bản sao (cache) tại Edge Location ở Việt Nam.  
    Tất cả những người dùng khác ở Việt Nam sau đó yêu cầu cùng hình ảnh đó sẽ được phục vụ trực tiếp từ Edge Location tại Việt Nam, với tốc độ cực nhanh.
  - **Giảm tải cho Server chính:**  
    Vì các yêu cầu được phục vụ từ cache, server gốc của bạn (chạy trong Region) sẽ không phải xử lý nhiều yêu cầu, giúp tiết kiệm chi phí và tài nguyên.
  - **Các dịch vụ khác:**  
    Các dịch vụ như Amazon Route 53 (DNS), AWS Shield (chống DDoS) cũng sử dụng mạng lưới điểm biên này để phản hồi nhanh và bảo vệ hệ thống ở gần người dùng nhất.

---

## Bảng Tóm tắt

| Thành phần              | Ví dụ Tương tự                     | Mục đích chính                                         | Quy mô                             |
|-------------------------|-------------------------------------|--------------------------------------------------------|------------------------------------|
| Region                  | Trung tâm Điều phối Quốc gia        | Giảm độ trễ, Tuân thủ luật pháp, Phục hồi thảm họa     | Toàn cầu (Vài chục)                |
| Availability Zone (AZ)  | Nhà kho Tổng (cách xa nhau)         | Tính Sẵn sàng Cao, Chịu lỗi                            | Khu vực (Tối thiểu 2-3 AZ/Region)  |
| Edge Location           | Bưu cục Giao hàng Phường/Xã         | Tăng tốc độ Phân phối Nội dung (CDN)                   | Thành phố (Hàng trăm)              |

---

Hiểu rõ cấu trúc 3 tầng này là nền tảng để bạn có thể thiết kế và triển khai bất kỳ ứng dụng nào trên AWS một cách tối ưu nhất.
