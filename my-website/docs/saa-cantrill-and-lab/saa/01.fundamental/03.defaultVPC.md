[https://docs.aws.amazon.com/vpc/latest/userguide/default-vpc.html](https://docs.aws.amazon.com/vpc/latest/userguide/default-vpc.html)

### **1. Default VPC là gì?**

**Default VPC** là một mạng ảo (Virtual Private Cloud) được AWS **tự động tạo sẵn** trong mỗi AWS Region cho tài khoản của bạn ngay khi bạn bắt đầu sử dụng Region đó.

Mục đích chính của nó là giúp người dùng mới **bắt đầu nhanh chóng**, có thể khởi chạy các tài nguyên như EC2 instance ngay lập tức mà không cần phải tự mình thiết lập một mạng phức tạp từ đầu.

### **2. Các thành phần chính của một Default VPC**

Khi AWS tạo Default VPC, họ không chỉ tạo một VPC trống mà còn cấu hình sẵn tất cả các thành phần cơ bản cần thiết để có kết nối Internet. Cụ thể bao gồm:

| Thành phần | Cấu hình trong Default VPC | Mục đích |
| :--- | :--- | :--- |
| **1. VPC** | Dải IP (CIDR block) là `172.31.0.0/16`. | Cung cấp không gian mạng riêng cho tài nguyên của bạn. |
| **2. Subnet** | Một **subnet công khai (public subnet)** được tạo trong mỗi Availability Zone (AZ) của Region đó. Ví dụ, nếu Region có 3 AZ, bạn sẽ có 3 subnet. | Nơi để bạn đặt các tài nguyên (như EC2). Chúng "công khai" vì chúng có đường ra Internet. |
| | - Dải IP của mỗi subnet là `/20` (ví dụ: `172.31.0.0/20`). | |
| | - Tùy chọn **"Auto-assign public IPv4 address" được bật (Enabled)**. | Bất kỳ EC2 nào được launch vào đây sẽ tự động có IP public. |
| **3. Internet Gateway (IGW)** | Một IGW được tạo và **đính kèm (attached)** sẵn vào Default VPC. | Cổng kết nối giữa VPC của bạn và Internet. |
| **4. Main Route Table** | Một Route Table chính được tạo và liên kết với tất cả các subnet. | Bảng định tuyến (chỉ đường) cho traffic mạng. |
| | - Có một route mặc định: `0.0.0.0/0` → `target: igw-xxxxxxxx`. | Đây là quy tắc quan trọng nhất: **"Tất cả traffic đi ra ngoài (không rõ đích đến) sẽ được đẩy tới Internet Gateway"**. Điều này làm cho các subnet trở thành public. |
| **5. Default Security Group** | Một Security Group mặc định được tạo và liên kết với VPC. | Firewall ảo ở cấp độ instance (EC2). |
| | - **Inbound Rules (Luồng vào):** Cho phép **TẤT CẢ** traffic từ các tài nguyên khác **CÙNG** sử dụng chính Security Group này. | Giúp các instance trong cùng SG dễ dàng giao tiếp với nhau. |
| | - **Outbound Rules (Luồng ra):** Cho phép **TẤT CẢ** traffic đi ra ngoài. | |
| **6. Default Network ACL (NACL)** | Một NACL mặc định được tạo. | Firewall ảo ở cấp độ subnet. |
| | - **Inbound/Outbound Rules:** Mặc định cho phép **TẤT CẢ** traffic đi vào và đi ra. | NACL mặc định rất "thoáng", không chặn gì cả. |

### **3. Ưu điểm của Default VPC**

*   **Dễ sử dụng:** Bạn không cần biết về mạng vẫn có thể launch EC2 và truy cập được ngay.
*   **Nhanh chóng:** Lý tưởng cho việc học tập, thử nghiệm nhanh (quick tests), hoặc các dự án cá nhân không yêu cầu bảo mật cao.
*   **Không cần cấu hình:** Mọi thứ đã được AWS lo sẵn.

### **4. Nhược điểm & Rủi ro (Tại sao KHÔNG nên dùng cho Production)**

Đây là phần quan trọng nhất bạn cần nắm vững:

1.  **Kém bảo mật (Poor Security):**
    *   **Tất cả subnet đều là public:** Không có khái niệm "private subnet" để đặt các tài nguyên nhạy cảm như database. Mọi thứ đều có khả năng bị phơi bày ra Internet.
    *   **Tự động gán IP Public:** Dễ dàng tạo ra một EC2 có IP public mà bạn không hề hay biết, tạo ra bề mặt tấn công không cần thiết.
    *   **Security Group mặc định quá mở:** Quy tắc inbound cho phép toàn bộ traffic từ các instance khác trong cùng SG, có thể không phải là điều bạn muốn.

2.  **Thiếu kiểm soát và tùy chỉnh (Lack of Control):**
    *   Bạn không được chọn dải IP (CIDR block). Nếu công ty của bạn đã có một dải IP khác, việc kết nối (peering, VPN) sẽ rất khó khăn do xung đột IP.
    *   Cấu trúc mạng quá đơn giản, không phù hợp với các ứng dụng đa tầng (multi-tier) yêu cầu các lớp mạng riêng biệt (web, app, database).

3.  **Không tuân theo Best Practice:**
    *   AWS Well-Architected Framework luôn khuyến nghị tạo một **VPC tùy chỉnh (Custom VPC)** với cả public và private subnets để đảm bảo an toàn và kiểm soát. Sử dụng Default VPC trong môi trường production được coi là một rủi ro bảo mật.

### **5. Nếu lỡ tay xóa Default VPC thì sao?**

Đừng lo lắng! Bạn có thể tạo lại nó.
*   **Cách 1 (Console):** Đi tới **VPC Dashboard** → **Your VPCs**. Ở menu **Actions**, chọn **Create default VPC**.
*   **Cách 2 (CLI):** Dùng lệnh `aws ec2 create-default-vpc`.

### **Kết luận**

**Default VPC** là một công cụ tuyệt vời cho người mới bắt đầu, giúp họ làm quen với AWS mà không bị rào cản về mạng. Tuy nhiên, nó giống như một "ngôi nhà mẫu" được trang bị sẵn nhưng không an toàn. Khi bạn xây dựng ứng dụng thực tế, đặc biệt là cho môi trường **production**, hãy **luôn luôn tạo một Custom VPC** để có thể thiết kế một kiến trúc mạng an toàn, có kiểm soát và tuân theo các best practice.
