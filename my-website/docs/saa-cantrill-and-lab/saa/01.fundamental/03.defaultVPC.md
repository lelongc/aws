[https://docs.aws.amazon.com/vpc/latest/userguide/default-vpc.html](https://docs.aws.amazon.com/vpc/latest/userguide/default-vpc.html)
<img width="855" height="491" alt="image" src="https://github.com/user-attachments/assets/8ba8f198-8ba7-4c21-a895-694435c3d7cb" />
<img width="871" height="510" alt="image" src="https://github.com/user-attachments/assets/6ff0ebfb-2c7a-44f8-8f2f-c31834452fe0" />

# ğŸŒ VPC (Virtual Private Cloud): HÆ°á»›ng dáº«n chi tiáº¿t vá» Default VPC cho ngÆ°á»i má»›i báº¯t Ä‘áº§u

---

## ğŸ“š Má»¥c lá»¥c

1. [VPC lÃ  gÃ¬? - KhÃ¡i niá»‡m cÆ¡ báº£n](#vpc-lÃ -gÃ¬---khÃ¡i-niá»‡m-cÆ¡-báº£n)
2. [Kiáº¿n trÃºc VPC vÃ  Subnet](#kiáº¿n-trÃºc-vpc-vÃ -subnet)
3. [Default VPC chi tiáº¿t](#default-vpc-chi-tiáº¿t)
4. [So sÃ¡nh Default VPC vs Custom VPC](#so-sÃ¡nh-default-vpc-vs-custom-vpc)
5. [Thá»±c hÃ nh vá»›i Default VPC](#thá»±c-hÃ nh-vá»›i-default-vpc)
6. [Báº£o máº­t vÃ  háº¡n cháº¿ cá»§a Default VPC](#báº£o-máº­t-vÃ -háº¡n-cháº¿-cá»§a-default-vpc)
7. [Khi nÃ o nÃªn sá»­ dá»¥ng Default VPC](#khi-nÃ o-nÃªn-sá»­-dá»¥ng-default-vpc)

---

## VPC lÃ  gÃ¬? - KhÃ¡i niá»‡m cÆ¡ báº£n

### ğŸ  **Hiá»ƒu VPC nhÆ° má»™t "ngÃ´i nhÃ " trÃªn cloud**

**Äá»‹nh nghÄ©a Ä‘Æ¡n giáº£n:** VPC (Virtual Private Cloud) lÃ  má»™t máº¡ng riÃªng áº£o mÃ  báº¡n cÃ³ thá»ƒ táº¡o ra trong AWS, giá»‘ng nhÆ° viá»‡c xÃ¢y dá»±ng má»™t ngÃ´i nhÃ  riÃªng trong má»™t khu Ä‘Ã´ thá»‹ lá»›n.

### **VÃ­ dá»¥ thá»±c táº¿:**

```yaml
ğŸ˜ï¸ HÃ¬nh dung VPC nhÆ° khu dÃ¢n cÆ°:

AWS Cloud = ThÃ nh phá»‘ lá»›n
â”œâ”€â”€ VPC cá»§a báº¡n = Khu dÃ¢n cÆ° riÃªng
â”‚   â”œâ”€â”€ Subnet 1 = Khu A (phÃ²ng khÃ¡ch)
â”‚   â”œâ”€â”€ Subnet 2 = Khu B (phÃ²ng ngá»§)
â”‚   â””â”€â”€ Subnet 3 = Khu C (nhÃ  báº¿p)
â”œâ”€â”€ VPC cá»§a cÃ´ng ty khÃ¡c = Khu dÃ¢n cÆ° khÃ¡c
â””â”€â”€ Internet Gateway = Cá»•ng ra vÃ o thÃ nh phá»‘
```

### **Äáº·c Ä‘iá»ƒm cá»‘t lÃµi cá»§a VPC:**

```yaml
ğŸ” TÃ­nh cÃ´ láº­p (Isolation):
  - VPC cá»§a báº¡n hoÃ n toÃ n tÃ¡ch biá»‡t vá»›i VPC khÃ¡c
  - KhÃ´ng ai cÃ³ thá»ƒ truy cáº­p vÃ o VPC cá»§a báº¡n trá»« khi Ä‘Æ°á»£c phÃ©p
  - Giá»‘ng nhÆ° rÃ o cháº¯n quanh khu dÃ¢n cÆ°

ğŸŒ Pháº¡m vi Regional:
  - Má»™t VPC chá»‰ tá»“n táº¡i trong 1 Region
  - KhÃ´ng thá»ƒ "kÃ©o dÃ i" qua nhiá»u Region
  - Muá»‘n cÃ³ presence á»Ÿ nhiá»u Region = táº¡o nhiá»u VPC

ğŸ—ï¸ Kiá»ƒm soÃ¡t hoÃ n toÃ n:
  - Báº¡n quyáº¿t Ä‘á»‹nh ai Ä‘Æ°á»£c vÃ o/ra
  - Thiáº¿t káº¿ cÃ¡ch cÃ¡c "phÃ²ng" káº¿t ná»‘i vá»›i nhau
  - Tá»± do cáº¥u hÃ¬nh báº£o máº­t theo Ã½ muá»‘n
```

### **Táº¡i sao cáº§n VPC?**

#### **1. Báº£o máº­t vÃ  Kiá»ƒm soÃ¡t**

```yaml
ğŸ›¡ï¸ Lá»£i Ã­ch báº£o máº­t:

KhÃ´ng cÃ³ VPC (shared hosting):
  âŒ TÃ i nguyÃªn chung vá»›i ngÆ°á»i khÃ¡c
  âŒ KhÃ³ kiá»ƒm soÃ¡t access
  âŒ Rá»§i ro báº£o máº­t cao

CÃ³ VPC (dedicated space):
  âœ… TÃ i nguyÃªn hoÃ n toÃ n riÃªng biá»‡t
  âœ… Kiá»ƒm soÃ¡t chi tiáº¿t tá»«ng káº¿t ná»‘i
  âœ… Thiáº¿t láº­p firewall rules
  âœ… Monitor táº¥t cáº£ traffic
```

#### **2. TuÃ¢n thá»§ quy Ä‘á»‹nh phÃ¡p luáº­t**

```yaml
ğŸ“‹ Compliance requirements:

NgÃ¢n hÃ ng/TÃ i chÃ­nh:
  - Dá»¯ liá»‡u khÃ¡ch hÃ ng pháº£i Ä‘Æ°á»£c cÃ´ láº­p
  - Audit trail chi tiáº¿t
  - MÃ£ hÃ³a end-to-end

Y táº¿ (HIPAA):
  - ThÃ´ng tin bá»‡nh nhÃ¢n báº£o máº­t
  - Access control nghiÃªm ngáº·t
  - Log má»i hoáº¡t Ä‘á»™ng

GDPR (EU):
  - Data residency requirements
  - Right to be forgotten
  - Data breach notification
```

#### **3. Kiáº¿n trÃºc phá»©c táº¡p**

```yaml
ğŸ—ï¸ Enterprise architecture:

Multi-tier Application:
  - Web servers (public subnet)
  - Application servers (private subnet)  
  - Database servers (isolated subnet)
  
Microservices:
  - Service mesh networking
  - Container orchestration
  - API gateway integration

Hybrid Cloud:
  - On-premises connectivity
  - VPN tunnels
  - Direct Connect
```

---

## Kiáº¿n trÃºc VPC vÃ  Subnet

### ğŸ—ï¸ **Hiá»ƒu vá» Subnet (Máº¡ng con)**

**Subnet lÃ  gÃ¬?** Subnet lÃ  nhá»¯ng "phÃ²ng" nhá» bÃªn trong "ngÃ´i nhÃ " VPC cá»§a báº¡n. Má»—i phÃ²ng cÃ³ má»™t má»¥c Ä‘Ã­ch cá»¥ thá»ƒ vÃ  Ä‘Æ°á»£c Ä‘áº·t á»Ÿ má»™t "táº§ng" (Availability Zone) nháº¥t Ä‘á»‹nh.

### **Kiáº¿n trÃºc VPC Multi-AZ:**

```yaml
ğŸ¢ VPC Architecture Example:

Region: us-east-1 (N.Virginia)
VPC CIDR: 10.0.0.0/16 (65,536 IP addresses)

â”œâ”€â”€ AZ-1 (us-east-1a)
â”‚   â”œâ”€â”€ Public Subnet: 10.0.1.0/24 (254 IPs)
â”‚   â””â”€â”€ Private Subnet: 10.0.4.0/24 (254 IPs)
â”‚
â”œâ”€â”€ AZ-2 (us-east-1b)  
â”‚   â”œâ”€â”€ Public Subnet: 10.0.2.0/24 (254 IPs)
â”‚   â””â”€â”€ Private Subnet: 10.0.5.0/24 (254 IPs)
â”‚
â””â”€â”€ AZ-3 (us-east-1c)
    â”œâ”€â”€ Public Subnet: 10.0.3.0/24 (254 IPs)
    â””â”€â”€ Private Subnet: 10.0.6.0/24 (254 IPs)
```

### **Táº¡i sao cáº§n nhiá»u Subnet?**

#### **1. PhÃ¢n tÃ¡ch chá»©c nÄƒng (Separation of Concerns)**

```yaml
ğŸ¯ Subnet Usage Patterns:

Public Subnets:
  Purpose: TÃ i nguyÃªn cáº§n truy cáº­p tá»« Internet
  Examples: 
    - Load Balancers
    - Web servers
    - Bastion hosts
    - NAT Gateways

Private Subnets:
  Purpose: TÃ i nguyÃªn ná»™i bá»™, khÃ´ng cáº§n Internet access
  Examples:
    - Application servers
    - Database servers
    - Internal APIs
    - Background processing

Database Subnets:
  Purpose: CÃ´ láº­p hoÃ n toÃ n database layer
  Examples:
    - RDS instances
    - ElastiCache clusters
    - Document databases
```

#### **2. Báº£o máº­t theo táº§ng (Defense in Depth)**

```yaml
ğŸ›¡ï¸ Security Layers:

Internet â†’ Public Subnet:
  - WAF (Web Application Firewall)
  - DDoS protection
  - SSL termination

Public â†’ Private Subnet:
  - Network ACLs
  - Security Groups
  - Application-level authentication

Private â†’ Database Subnet:
  - Database authentication
  - Encryption at rest
  - Query-level authorization
```

#### **3. High Availability (TÃ­nh sáºµn sÃ ng cao)**

```yaml
âš¡ HA Design Pattern:

Load Balancer:
  - Deployed across multiple AZs
  - Automatic failover
  - Health checks

Application Tier:
  AZ-1: App Server 1, App Server 2
  AZ-2: App Server 3, App Server 4
  AZ-3: App Server 5, App Server 6

Database Tier:
  AZ-1: Primary database
  AZ-2: Standby replica
  AZ-3: Read replica

Benefits:
  - Single AZ failure = Minimal impact
  - Automatic traffic redistribution
  - Zero-downtime deployments
```

### **CIDR vÃ  IP Address Planning:**

#### **Hiá»ƒu vá» CIDR notation:**

```yaml
ğŸ“Š CIDR Examples:

10.0.0.0/16:
  - Network: 10.0.0.0
  - Subnet mask: 255.255.0.0
  - Total IPs: 65,536
  - Usable IPs: 65,531 (AWS reserves 5)

10.0.1.0/24:
  - Network: 10.0.1.0
  - Subnet mask: 255.255.255.0
  - Total IPs: 256
  - Usable IPs: 251 (AWS reserves 5)

AWS Reserved IPs in each subnet:
  - .0: Network address
  - .1: VPC router
  - .2: DNS server
  - .3: Future use
  - .255: Broadcast (not used but reserved)
```

#### **Best Practices cho IP Planning:**

```yaml
ğŸ’¡ IP Planning Strategy:

Small Organization (< 1000 instances):
  VPC: 10.0.0.0/16
  Public subnets: 10.0.1.0/24, 10.0.2.0/24, 10.0.3.0/24
  Private subnets: 10.0.11.0/24, 10.0.12.0/24, 10.0.13.0/24

Medium Organization (< 10,000 instances):
  VPC: 10.0.0.0/16
  Public subnets: 10.0.0.0/20, 10.0.16.0/20, 10.0.32.0/20
  Private subnets: 10.0.128.0/20, 10.0.144.0/20, 10.0.160.0/20

Large Organization (> 10,000 instances):
  Multiple VPCs with VPC Peering
  VPC-1: 10.0.0.0/16 (Production)
  VPC-2: 10.1.0.0/16 (Staging)  
  VPC-3: 10.2.0.0/16 (Development)
```

---

## Default VPC chi tiáº¿t

### ğŸ¯ **Äáº·c Ä‘iá»ƒm cá»§a Default VPC**

Default VPC lÃ  "ngÃ´i nhÃ  cÃ³ sáºµn" mÃ  AWS táº·ng báº¡n khi má»Ÿ tÃ i khoáº£n. NÃ³ Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng ngay láº­p tá»©c mÃ  khÃ´ng cáº§n cáº¥u hÃ¬nh gÃ¬.

### **Cáº¥u hÃ¬nh cá»‘ Ä‘á»‹nh cá»§a Default VPC:**

```yaml
ğŸ“‹ Default VPC Specifications:

CIDR Block: 172.31.0.0/16
  - LuÃ´n luÃ´n lÃ  dáº£i IP nÃ y, khÃ´ng thay Ä‘á»•i
  - Cung cáº¥p 65,536 Ä‘á»‹a chá»‰ IP
  - KhÃ´ng trÃ¹ng vá»›i IP private thÃ´ng thÆ°á»ng (10.x.x.x, 192.168.x.x)

Number of Subnets:
  - Tá»± Ä‘á»™ng táº¡o 1 subnet cho má»—i AZ trong Region
  - us-east-1: 6 subnets (6 AZs)
  - us-west-2: 4 subnets (4 AZs)
  - ap-southeast-1: 3 subnets (3 AZs)

Subnet CIDR Pattern:
  - AZ-a: 172.31.0.0/20 (4,096 IPs)
  - AZ-b: 172.31.16.0/20 (4,096 IPs)
  - AZ-c: 172.31.32.0/20 (4,096 IPs)
  - AZ-d: 172.31.48.0/20 (4,096 IPs)
  - AZ-e: 172.31.64.0/20 (4,096 IPs)
  - AZ-f: 172.31.80.0/20 (4,096 IPs)
```

### **Internet Connectivity sáºµn cÃ³:**

```yaml
ğŸŒ Default Internet Setup:

Internet Gateway (IGW):
  - Tá»± Ä‘á»™ng attached vÃ o Default VPC
  - Cho phÃ©p káº¿t ná»‘i two-way vá»›i Internet
  - KhÃ´ng cÃ³ additional cost

Route Table:
  - Main route table tá»± Ä‘á»™ng cáº¥u hÃ¬nh
  - Default route: 0.0.0.0/0 â†’ Internet Gateway
  - Local route: 172.31.0.0/16 â†’ local

Auto-assign Public IP:
  - Má»i subnet Ä‘á»u enable auto-assign public IP
  - EC2 instances tá»± Ä‘á»™ng cÃ³ public IP
  - CÃ³ thá»ƒ truy cáº­p tá»« Internet ngay láº­p tá»©c
```

### **So sÃ¡nh Default VPC giá»¯a cÃ¡c Region:**

```yaml
ğŸŒ Regional Consistency:

us-east-1 (N.Virginia):
  - AZs: 6 (a, b, c, d, e, f)
  - Subnets: 6
  - CIDR: 172.31.0.0/16

ap-southeast-1 (Singapore):
  - AZs: 3 (a, b, c)  
  - Subnets: 3
  - CIDR: 172.31.0.0/16

eu-west-1 (Ireland):
  - AZs: 3 (a, b, c)
  - Subnets: 3  
  - CIDR: 172.31.0.0/16

Consistency:
  âœ… Same CIDR block across all regions
  âœ… Same auto-configuration
  âœ… Same default security settings
  âŒ Different number of subnets (based on AZ count)
```

### **Default Security Configuration:**

```yaml
ğŸ”’ Security Settings:

Default Security Group:
  Name: "default"
  Inbound Rules:
    - Allow all traffic from same security group
    - Block all traffic from Internet by default
  Outbound Rules:
    - Allow all traffic to anywhere (0.0.0.0/0)

Default Network ACL:
  Inbound Rules:
    - Allow all traffic (0.0.0.0/0)
  Outbound Rules:
    - Allow all traffic (0.0.0.0/0)

ğŸš¨ Security Implications:
  - Instances can communicate with each other freely
  - Outbound Internet access allowed by default  
  - Inbound Internet access blocked by security group
  - Network ACL is permissive (not restrictive)
```

---

## So sÃ¡nh Default VPC vs Custom VPC

### ğŸ“Š **Báº£ng so sÃ¡nh chi tiáº¿t**

```yaml
ğŸ†š Default VPC vs Custom VPC:

Ease of Use:
  Default VPC: â­â­â­â­â­
    - Ready to use immediately
    - No configuration needed
    - Perfect for beginners
    
  Custom VPC: â­â­â­
    - Requires planning and setup
    - Need to understand networking
    - More complex initial setup

Flexibility:
  Default VPC: â­â­
    - Fixed CIDR block
    - Limited customization
    - Cannot change fundamental settings
    
  Custom VPC: â­â­â­â­â­
    - Choose your own CIDR
    - Full control over all settings
    - Unlimited customization

Security:
  Default VPC: â­â­â­
    - Basic security
    - All subnets are public-facing
    - Good for development/testing
    
  Custom VPC: â­â­â­â­â­
    - Private by default
    - Granular security controls
    - Production-ready security

Cost:
  Default VPC: â­â­â­â­â­
    - No additional VPC charges
    - Minimal data transfer costs
    - Cost-effective for simple setups
    
  Custom VPC: â­â­â­â­
    - May need NAT Gateways ($45/month each)
    - Additional data transfer costs
    - More expensive for complex architectures
```

### **Khi nÃ o sá»­ dá»¥ng tá»«ng loáº¡i:**

#### **Default VPC - Use Cases:**

```yaml
âœ… Ideal for:

Learning & Development:
  - AWS certification study
  - POC (Proof of Concepts)
  - Personal projects
  - Quick prototyping

Simple Applications:
  - Single-tier applications
  - Development environments
  - Testing environments
  - Internal tools

Time-constrained Projects:
  - Hackathons
  - Rapid prototyping
  - Demo applications
  - MVPs with simple requirements
```

#### **Custom VPC - Use Cases:**

```yaml
âœ… Required for:

Production Environments:
  - Enterprise applications
  - Customer-facing services
  - Compliance-sensitive data
  - Mission-critical systems

Complex Architectures:
  - Multi-tier applications
  - Microservices
  - Hybrid cloud setups
  - Multi-region deployments

Security Requirements:
  - Financial services
  - Healthcare applications
  - Government systems
  - PCI DSS compliance

Specific Networking Needs:
  - Custom IP ranges
  - VPN connections
  - Network peering
  - Advanced routing
```

---

## Thá»±c hÃ nh vá»›i Default VPC

### ğŸ› ï¸ **Lab 1: KhÃ¡m phÃ¡ Default VPC**

#### **BÆ°á»›c 1: Kiá»ƒm tra Default VPC hiá»‡n táº¡i**

```bash
# Sá»­ dá»¥ng AWS CLI Ä‘á»ƒ list VPCs
aws ec2 describe-vpcs --profile general-admin

# TÃ¬m Default VPC
aws ec2 describe-vpcs \
  --filters "Name=isDefault,Values=true" \
  --profile general-admin
```

**Expected Output:**
```json
{
    "Vpcs": [
        {
            "CidrBlock": "172.31.0.0/16",
            "DhcpOptionsId": "dopt-12345678",
            "State": "available",
            "VpcId": "vpc-12345678",
            "OwnerId": "123456789012",
            "InstanceTenancy": "default",
            "IsDefault": true,
            "Tags": []
        }
    ]
}
```

#### **BÆ°á»›c 2: Kiá»ƒm tra Subnets**

```bash
# List all subnets trong Default VPC
aws ec2 describe-subnets \
  --filters "Name=vpc-id,Values=vpc-12345678" \
  --profile general-admin

# Check sá»‘ lÆ°á»£ng subnets theo AZ
aws ec2 describe-availability-zones \
  --profile general-admin
```

#### **BÆ°á»›c 3: Kiá»ƒm tra Internet Gateway**

```bash
# List Internet Gateways
aws ec2 describe-internet-gateways \
  --filters "Name=attachment.vpc-id,Values=vpc-12345678" \
  --profile general-admin
```

### **Lab 2: Deploy á»©ng dá»¥ng Ä‘Æ¡n giáº£n trong Default VPC**

#### **Táº¡o EC2 instance trong Default VPC:**

```yaml
ğŸ–¥ï¸ EC2 Instance Configuration:

Instance Details:
  AMI: Amazon Linux 2
  Instance Type: t3.micro
  Key Pair: Create new or use existing
  
Network Settings:
  VPC: Default VPC (auto-selected)
  Subnet: Default subnet in AZ-1a
  Auto-assign Public IP: Enable (default)
  
Security Group:
  Name: web-server-sg
  Rules:
    - HTTP (port 80): 0.0.0.0/0
    - SSH (port 22): Your IP only
    - HTTPS (port 443): 0.0.0.0/0
```

#### **User Data Script:**

```bash name=install-web-server.sh
#!/bin/bash
yum update -y
yum install -y httpd
systemctl start httpd
systemctl enable httpd

# Create simple web page
cat <<EOF > /var/www/html/index.html
<!DOCTYPE html>
<html>
<head>
    <title>My AWS Web Server</title>
    <style>
        body { font-family: Arial; margin: 40px; }
        .container { max-width: 800px; margin: 0 auto; }
        .info { background: #f0f0f0; padding: 20px; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ Welcome to My AWS Web Server!</h1>
        <div class="info">
            <h3>Server Information:</h3>
            <p><strong>Instance ID:</strong> $(curl -s http://169.254.169.254/latest/meta-data/instance-id)</p>
            <p><strong>Availability Zone:</strong> $(curl -s http://169.254.169.254/latest/meta-data/placement/availability-zone)</p>
            <p><strong>Public IP:</strong> $(curl -s http://169.254.169.254/latest/meta-data/public-ipv4)</p>
            <p><strong>Private IP:</strong> $(curl -s http://169.254.169.254/latest/meta-data/local-ipv4)</p>
        </div>
        <h3>ğŸ¯ This server is running in AWS Default VPC!</h3>
        <p>Deploy time: $(date)</p>
    </div>
</body>
</html>
EOF
```

#### **Test connectivity:**

```bash
# Test from local machine
curl http://[PUBLIC-IP]

# SSH to instance
ssh -i your-key.pem ec2-user@[PUBLIC-IP]

# Check networking from inside instance
curl http://169.254.169.254/latest/meta-data/
```

### **Lab 3: XÃ³a vÃ  táº¡o láº¡i Default VPC**

#### **âš ï¸ Cáº£nh bÃ¡o quan trá»ng:**

```yaml
ğŸš¨ Before Deleting Default VPC:

Backup checklist:
  - [ ] List all EC2 instances in Default VPC
  - [ ] Check for RDS instances
  - [ ] Verify Load Balancers
  - [ ] Document any custom security groups
  - [ ] Note down any custom route tables

Impact of deletion:
  - All resources in Default VPC will lose connectivity
  - Cannot launch instances without VPC selection
  - Need to specify VPC/subnet for all future launches
```

#### **XÃ³a Default VPC:**

```yaml
ğŸ“‹ Deletion Process:

Via AWS Console:
  1. VPC Dashboard â†’ Your VPCs
  2. Select Default VPC
  3. Actions â†’ Delete VPC
  4. Type "delete" to confirm

Via AWS CLI:
  # First, terminate all instances
  aws ec2 terminate-instances --instance-ids i-1234567890abcdef0
  
  # Delete VPC
  aws ec2 delete-vpc --vpc-id vpc-12345678
```

#### **Táº¡o láº¡i Default VPC:**

```yaml
ğŸ”„ Recreation Process:

Via AWS Console:
  1. VPC Dashboard â†’ Your VPCs
  2. Actions â†’ Create Default VPC
  3. Confirm creation

Via AWS CLI:
  aws ec2 create-default-vpc --profile general-admin
```

**Verification sau khi táº¡o láº¡i:**
```bash
# Verify new Default VPC
aws ec2 describe-vpcs \
  --filters "Name=isDefault,Values=true" \
  --profile general-admin

# Check new subnets
aws ec2 describe-subnets \
  --filters "Name=defaultForAz,Values=true" \
  --profile general-admin
```

---

## Báº£o máº­t vÃ  háº¡n cháº¿ cá»§a Default VPC

### ğŸš¨ **CÃ¡c váº¥n Ä‘á» báº£o máº­t**

#### **1. Táº¥t cáº£ Subnets Ä‘á»u Public**

```yaml
âš ï¸ Public Subnet Risks:

Auto-assign Public IP:
  Problem: Táº¥t cáº£ instances tá»± Ä‘á»™ng cÃ³ public IP
  Risk: Expose unnecessary attack surface
  Impact: Increased vulnerability to internet-based attacks

Internet Gateway:
  Problem: Direct internet connectivity for all subnets
  Risk: No network-level isolation
  Impact: Harder to implement defense-in-depth

Example Attack Scenario:
  1. Attacker scans public IP ranges
  2. Finds open port on EC2 instance
  3. Exploits vulnerability in application
  4. Gains direct access to production system
```

#### **2. Overly Permissive Network ACLs**

```yaml
ğŸ”“ Network ACL Issues:

Default NACL Rules:
  Inbound: Allow ALL traffic from 0.0.0.0/0
  Outbound: Allow ALL traffic to 0.0.0.0/0
  
Security Problems:
  - No port-level filtering
  - No protocol restrictions
  - Cannot implement network segmentation
  
Best Practice Violation:
  - Should deny by default
  - Should allow only necessary traffic
  - Should implement least privilege
```

#### **3. Shared Security Group Pattern**

```yaml
ğŸ” Security Group Concerns:

Default Security Group:
  - All instances use same security group
  - Self-referencing rules allow internal communication
  - Difficult to implement proper micro-segmentation

Problems:
  Web Server â†” Database Server:
    Current: Full communication allowed
    Should be: Only port 3306 MySQL allowed
    
  App Server â†” Cache Server:
    Current: All ports accessible
    Should be: Only Redis port 6379
```

### **Thá»±c táº¿ Security Incidents:**

#### **Case Study 1: Exposed Database**

```yaml
ğŸ“° Real-world Example:

Scenario:
  - Developer launches RDS in Default VPC
  - RDS gets public IP automatically
  - Security group misconfigured
  - Database exposed to internet

Timeline:
  Day 1: RDS launched in default subnet
  Day 3: Port 3306 accidentally opened to 0.0.0.0/0
  Day 7: Automated scanner finds exposed database
  Day 8: Data breach discovered
  
Damage:
  - 100,000 customer records stolen
  - $500,000 GDPR fine
  - 6 months to recover reputation

Prevention with Custom VPC:
  - Database in private subnet
  - No internet gateway access
  - Security groups with specific rules only
```

#### **Case Study 2: Lateral Movement Attack**

```yaml
ğŸ¯ Attack Chain:

Initial Compromise:
  - Web server compromised via application vulnerability
  - Attacker gains shell access to EC2 instance
  
Lateral Movement:
  Default VPC allows easy movement:
  1. Scan other instances in same security group
  2. Access database server directly
  3. Extract sensitive data
  4. Access internal APIs
  
Impact Amplification:
  - Single point of compromise
  - No network segmentation
  - Full environment access
  
Custom VPC Prevention:
  - Web servers in public subnet
  - App servers in private subnet  
  - Database in isolated subnet
  - Strict security group rules
```

### **Compliance vÃ  Audit Issues:**

```yaml
ğŸ“‹ Compliance Challenges:

PCI DSS Requirements:
  âŒ Default VPC violations:
    - No network segmentation
    - Overly broad access rules
    - No traffic monitoring
  
  âœ… Custom VPC compliance:
    - Isolated cardholder data environment
    - Restricted network access
    - Comprehensive logging

SOC 2 Requirements:
  âŒ Default VPC issues:
    - Insufficient access controls
    - No change management for network
    - Limited monitoring capabilities
  
  âœ… Custom VPC benefits:
    - Granular access controls
    - Change tracking for network configs
    - Detailed network monitoring

HIPAA Requirements:
  âŒ Default VPC problems:
    - PHI potentially exposed to internet
    - No proper access logging
    - Insufficient encryption controls
  
  âœ… Custom VPC solutions:
    - Private subnets for PHI storage
    - Comprehensive audit trails
    - Network-level encryption
```

---

## Khi nÃ o nÃªn sá»­ dá»¥ng Default VPC

### ğŸ¯ **Appropriate Use Cases**

#### **1. Learning vÃ  Development**

```yaml
ğŸ“š Educational Purposes:

AWS Certification Study:
  âœ… Perfect for:
    - Learning EC2 basics
    - Understanding security groups
    - Practicing CLI commands
    - Quick lab setups
  
  Benefits:
    - No networking knowledge required
    - Focus on service features
    - Rapid iteration
    - Cost-effective learning

Personal Projects:
  âœ… Good for:
    - Portfolio websites
    - Personal blogs
    - Side projects
    - Hobby applications
  
  Considerations:
    - Not handling sensitive data
    - Limited user base
    - Non-commercial use
```

#### **2. Proof of Concepts (POC)**

```yaml
ğŸ§ª POC Requirements:

Time-constrained Evaluation:
  Scenario: "Evaluate AWS in 2 weeks"
  Solution: Use Default VPC for rapid deployment
  
  Benefits:
    - Immediate productivity
    - Focus on application logic
    - Quick win demonstration
    - Minimal learning curve

Technology Evaluation:
  Examples:
    - Testing new database engines
    - Evaluating container platforms
    - Comparing machine learning services
    - Performance benchmarking
```

#### **3. Development Environments**

```yaml
ğŸ”§ Dev Environment Strategy:

Individual Developer Workspaces:
  Each developer gets:
    - Separate AWS account
    - Default VPC for isolation
    - Full admin access
    - Cost controls via budgets

Benefits:
  - Rapid environment setup
  - No networking bottlenecks
  - Self-service capabilities
  - Isolated testing

Example Setup:
  Developer: john@company.com
  Account: dev-john-123456789
  Environment: Default VPC
  Resources: Full access within budget
```

### **âŒ When NOT to use Default VPC**

#### **1. Production Workloads**

```yaml
ğŸš« Production Exclusions:

Customer-facing Applications:
  Reasons to avoid:
    - Security vulnerabilities
    - No disaster recovery
    - Limited monitoring
    - Compliance violations

Financial Services:
  Regulatory requirements:
    - PCI DSS compliance
    - SOX compliance
    - Data encryption standards
    - Network segmentation

Healthcare Applications:
  HIPAA requirements:
    - PHI protection
    - Access logging
    - Encryption in transit/rest
    - Audit capabilities
```

#### **2. Multi-tier Applications**

```yaml
ğŸ—ï¸ Complex Architecture Needs:

3-tier Web Application:
  Web Tier: Public subnet, internet-facing
  App Tier: Private subnet, internal only
  DB Tier: Isolated subnet, no internet
  
  Default VPC problems:
    - All tiers in public subnets
    - No proper isolation
    - Security group limitations
    - No fine-grained control

Microservices Architecture:
  Requirements:
    - Service mesh networking
    - Container orchestration
    - API gateway integration
    - Cross-service authentication
  
  Default VPC limitations:
    - Insufficient network controls
    - No service discovery
    - Limited load balancing options
```

### **ğŸ”„ Migration Strategy**

#### **From Default VPC to Custom VPC:**

```yaml
ğŸ“‹ Migration Planning:

Phase 1: Assessment (Week 1)
  - [ ] Inventory all resources in Default VPC
  - [ ] Document current network dependencies
  - [ ] Identify security requirements
  - [ ] Plan new VPC architecture

Phase 2: Design (Week 2)
  - [ ] Design Custom VPC topology
  - [ ] Plan IP addressing scheme
  - [ ] Design security group strategy
  - [ ] Create migration timeline

Phase 3: Build (Week 3-4)
  - [ ] Create Custom VPC
  - [ ] Set up subnets and routing
  - [ ] Configure security groups
  - [ ] Test connectivity

Phase 4: Migration (Week 5-6)
  - [ ] Create new resources in Custom VPC
  - [ ] Migrate data and configurations
  - [ ] Update DNS and load balancers
  - [ ] Decommission Default VPC resources

Phase 5: Validation (Week 7)
  - [ ] End-to-end testing
  - [ ] Performance validation
  - [ ] Security assessment
  - [ ] Documentation update
```

#### **Migration Tools vÃ  Techniques:**

```yaml
ğŸ› ï¸ Migration Approaches:

Blue-Green Deployment:
  Blue: Current Default VPC environment
  Green: New Custom VPC environment
  Switch: DNS/Load Balancer cutover
  
  Benefits:
    - Zero downtime migration
    - Easy rollback capability
    - Risk mitigation
    - Parallel testing

Lift and Shift:
  Process:
    1. Create AMI snapshots
    2. Launch in Custom VPC
    3. Update configurations
    4. Switch traffic
  
  Considerations:
    - Application state management
    - Database migration
    - Integration dependencies

Gradual Migration:
  Approach:
    - Migrate non-critical services first
    - Test extensively
    - Move critical services last
    - Maintain hybrid setup temporarily
```

---

## ğŸ’¡ **TÃ³m táº¯t vÃ  Äiá»ƒm máº¥u chá»‘t**

### **Key Takeaways:**

```yaml
ğŸ¯ NguyÃªn táº¯c sá»­ dá»¥ng Default VPC:

âœ… DO sá»­ dá»¥ng khi:
  - Há»c AWS vÃ  certification
  - POC vÃ  prototype nhanh
  - Development environment cÃ¡ nhÃ¢n
  - Testing vÃ  experimentation
  - Budget háº¡n cháº¿
  - Thá»i gian setup ngáº¯n

âŒ DON'T sá»­ dá»¥ng khi:
  - Production workloads
  - Multi-tier applications
  - Compliance requirements
  - Sensitive data processing
  - Enterprise environments
  - Customer-facing services
```

### **Next Steps cho ngÆ°á»i má»›i:**

```yaml
ğŸ“‹ Learning Path:

Week 1: Default VPC Mastery
  - [ ] Explore Default VPC trong nhiá»u regions
  - [ ] Deploy simple applications
  - [ ] Practice with security groups
  - [ ] Understand networking basics

Week 2: Custom VPC Foundation
  - [ ] Learn vá» CIDR vÃ  subnetting
  - [ ] Understand routing concepts
  - [ ] Study NAT Gateways
  - [ ] Practice VPC design

Week 3: Advanced Networking
  - [ ] VPC Peering
  - [ ] Transit Gateway
  - [ ] Direct Connect
  - [ ] VPN connections

Week 4: Security Deep Dive
  - [ ] Network ACLs vs Security Groups
  - [ ] Flow Logs analysis
  - [ ] VPC Endpoints
  - [ ] AWS PrivateLink
```

### **Common Mistakes to Avoid:**

```yaml
âš ï¸ Frequent Pitfalls:

Misconceptions:
  âŒ "Default VPC is production-ready"
  âŒ "Security groups are enough for production"
  âŒ "One VPC fits all use cases"
  âŒ "Default settings are optimized"

Better Understanding:
  âœ… Default VPC is for learning/testing
  âœ… Production needs Custom VPC
  âœ… Different workloads need different VPCs
  âœ… Always customize for your requirements
```
