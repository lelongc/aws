## ğŸ› ï¸ DEMO: Táº¡o Internet Gateway & Public Subnet trÃªn AWS (Step-by-step cho ngÆ°á»i má»›i)

---

## ğŸ¯ Má»¥c tiÃªu demo nÃ y
- Biáº¿n cÃ¡c **private subnet** thÃ nh **public subnet** cÃ³ thá»ƒ káº¿t ná»‘i Internet 2-way.
- Hiá»ƒu rÃµ tá»«ng bÆ°á»›c cáº¥u hÃ¬nh **Internet Gateway, Route Table, Public IP**.
- Chuáº©n bá»‹ mÃ´i trÆ°á»ng Ä‘á»ƒ launch **Bastion Host** (pháº§n 2).

---

## ğŸ“‹ Kiá»ƒm tra Ä‘iá»u kiá»‡n trÆ°á»›c khi báº¯t Ä‘áº§u

### **YÃªu cáº§u mÃ´i trÆ°á»ng:**
- [x] ÄÃ£ táº¡o VPC `a4l-vpc1` vá»›i CIDR `10.16.0.0/16`
- [x] ÄÃ£ táº¡o Ä‘á»§ 12 subnets (3 web, 3 app, 3 db, 3 reserved) trong 3 AZ
- [x] Login vá»›i IAM admin user
- [x] Region: US East 1 (N. Virginia)

### **Kiá»ƒm tra nhanh:**
1. VPC Console â†’ Subnets â†’ Tháº¥y cÃ³ 12 subnet cá»§a `a4l-vpc1`
2. Äáº·c biá»‡t check cÃ³ 3 web subnet: `web-A`, `web-B`, `web-C`

---

## BÆ°á»›c 1: Táº¡o Internet Gateway

### 1.1. **Táº¡o IGW má»›i**
```yaml
ğŸ“ VPC Console â†’ Internet Gateways â†’ Create Internet Gateway

Name: A4L-VPC1-IGW
Meaning: Animals4Life - VPC1 - Internet Gateway
```

### 1.2. **Attach IGW vÃ o VPC**
```yaml
ğŸ“ Actions â†’ Attach to VPC

Select VPC: A4L-VPC1
Click: Attach Internet Gateway

âœ… Status tá»« "Detached" â†’ "Attached"
```

> **LÆ°u Ã½:** IGW ban Ä‘áº§u luÃ´n á»Ÿ tráº¡ng thÃ¡i "Detached", pháº£i attach thá»§ cÃ´ng!

---

## BÆ°á»›c 2: Táº¡o Route Table cho Public Subnets

### 2.1. **Táº¡o Route Table má»›i**
```yaml
ğŸ“ VPC Console â†’ Route Tables â†’ Create Route Table

Name: A4L-VPC1-RT-web
VPC: A4L-VPC1  
Meaning: Animals4Life - VPC1 - Route Table - web tier
```

### 2.2. **Associate Route Table vá»›i Web Subnets**
```yaml
ğŸ“ Chá»n route table vá»«a táº¡o â†’ Subnet Associations â†’ Edit Associations

Select 3 subnets:
  â˜‘ï¸ web-A
  â˜‘ï¸ web-B  
  â˜‘ï¸ web-C

Click: Save Associations
```

> **Giáº£i thÃ­ch:** Subnet chá»‰ Ä‘Æ°á»£c associate vá»›i 1 route table. Khi associate vá»›i custom route table, nÃ³ sáº½ tá»± Ä‘á»™ng rá»i khá»i main route table.

---

## BÆ°á»›c 3: ThÃªm Default Routes vÃ o Route Table

### 3.1. **Kiá»ƒm tra Local Routes hiá»‡n táº¡i**
```yaml
ğŸ“ Routes tab cá»§a route table vá»«a táº¡o

Sáº½ tháº¥y 2 local routes:
  10.16.0.0/16 â†’ local (IPv4)
  2600:1f14:xxx::/56 â†’ local (IPv6)
```

### 3.2. **ThÃªm IPv4 Default Route**
```yaml
ğŸ“ Routes â†’ Edit Routes â†’ Add Route

Destination: 0.0.0.0/0  
Target: Internet Gateway â†’ A4L-VPC1-IGW

âœ… Meaning: "Má»i traffic IPv4 khÃ´ng match local route â†’ Ä‘i ra IGW"
```

### 3.3. **ThÃªm IPv6 Default Route**
```yaml
ğŸ“ Add Route (tiáº¿p)

Destination: ::/0
Target: Internet Gateway â†’ A4L-VPC1-IGW  

âœ… Meaning: "Má»i traffic IPv6 khÃ´ng match local route â†’ Ä‘i ra IGW"

Click: Save Changes
```

---

## BÆ°á»›c 4: Enable Auto-assign Public IP cho Web Subnets

### 4.1. **Cáº¥u hÃ¬nh cho web-A**
```yaml
ğŸ“ Subnets â†’ Select web-A â†’ Actions â†’ Edit Subnet Settings

â˜‘ï¸ Enable auto-assign public IPv4 address
Click: Save
```

### 4.2. **Cáº¥u hÃ¬nh cho web-B**
```yaml
ğŸ“ Subnets â†’ Select web-B â†’ Actions â†’ Edit Subnet Settings  

â˜‘ï¸ Enable auto-assign public IPv4 address
Click: Save
```

### 4.3. **Cáº¥u hÃ¬nh cho web-C**
```yaml
ğŸ“ Subnets â†’ Select web-C â†’ Actions â†’ Edit Subnet Settings

â˜‘ï¸ Enable auto-assign public IPv4 address  
Click: Save
```

---

## ğŸ¯ Tá»•ng káº¿t nhá»¯ng gÃ¬ Ä‘Ã£ lÃ m

### **âœ… Checklist hoÃ n thÃ nh:**
- [x] **Internet Gateway:** Táº¡o & attach vÃ o VPC
- [x] **Route Table:** Táº¡o route table riÃªng cho web tier
- [x] **Subnet Association:** GÃ¡n 3 web subnet vÃ o route table má»›i
- [x] **Default Routes:** ThÃªm 0.0.0.0/0 & ::/0 â†’ IGW
- [x] **Public IP:** Enable auto-assign cho 3 web subnet

### **ğŸ”„ Luá»“ng hoáº¡t Ä‘á»™ng:**
1. **EC2 launch vÃ o web subnet** â†’ Tá»± Ä‘á»™ng cÃ³ public IP
2. **Traffic ra ngoÃ i** â†’ Route table check â†’ Match 0.0.0.0/0 â†’ Äi IGW â†’ Internet
3. **Traffic vÃ o tá»« Internet** â†’ IGW â†’ Route Ä‘áº¿n private IP cá»§a EC2

---

## ğŸ“š Kiáº¿n thá»©c cáº§n nhá»› Ä‘á»ƒ thi & Ä‘i lÃ m

### **Public Subnet = 4 Ä‘iá»u kiá»‡n:**
1. âœ… **Route table cÃ³ default route** ra IGW
2. âœ… **Associate vá»›i subnet** 
3. âœ… **IGW attached** vÃ o VPC
4. âœ… **Auto-assign public IP** enabled

### **Route Priority Rules:**
- **Local routes luÃ´n Æ°u tiÃªn cao nháº¥t** (10.16.0.0/16 > 0.0.0.0/0)
- **Prefix cÃ ng cao cÃ ng Æ°u tiÃªn** (/32 > /24 > /16 > /0)
- **Default route chá»‰ dÃ¹ng khi khÃ´ng match rule nÃ o khÃ¡c**

### **IGW Characteristics:**
- **Regionally resilient** (1 IGW cho cáº£ region)
- **1:1 relationship** vá»›i VPC
- **Managed service** (AWS lo availability)

---

## ğŸš€ Chuáº©n bá»‹ cho pháº§n 2: Launch Bastion Host

**Pháº§n 2 sáº½:**
- Launch EC2 instance vÃ o public subnet
- Configure Security Group cho SSH access
- Test connectivity tá»« Internet vÃ o VPC
- Táº¡o "cá»­a ngÃµ" vÃ o private infrastructure

---

**Nghá»‰ ngÆ¡i 5 phÃºt rá»“i tiáº¿p tá»¥c pháº§n 2! Tá»›i Ä‘Ã¢y báº¡n Ä‘Ã£ hiá»ƒu 80% cÃ¡ch AWS networking hoáº¡t Ä‘á»™ng rá»“i! ğŸ’ª**
