# üíΩ AWS EBS GP2 vs GP3: So s√°nh v√† ·ª©ng d·ª•ng

---

## 1. T·ªïng quan GP2 v√† GP3
- 16kb = 1 io = 1 credit 
- 160kb/s = 10 iops 
### **GP2 (General Purpose SSD - th·∫ø h·ªá c≈©)**
<img width="837" height="481" alt="image" src="https://github.com/user-attachments/assets/70a1392a-9d15-4f64-b76d-05067fa85a71" />

- **Ki·ªÉu l∆∞u tr·ªØ:** SSD-based, d√πng h·ªá th·ªëng **IO Credit Bucket**.
- **Dung l∆∞·ª£ng:** 1GB ‚Äì 16TB.
- **Hi·ªáu nƒÉng:**
  - **Baseline IOPS:** 3 IOPS/GB (t·ªëi thi·ªÉu 100 IOPS), 100GB = 300IOPS.
  - **Burst IOPS:** L√™n ƒë·∫øn 3,000 IOPS (16KB/operation).
  - **T·ªëi ƒëa:** 16,000 IOPS (~5.33TB tr·ªü l√™n ƒë·∫°t hi·ªáu nƒÉng t·ªëi ƒëa).
- **L∆∞u √Ω:** V·ªõi volume >1TB, baseline IOPS >= burst rate (kh√¥ng d√πng h·ªá th·ªëng credit).
- **S·ª≠ d·ª•ng:** Boot volume, ·ª©ng d·ª•ng low-latency, dev/test.

---

### **GP3 (General Purpose SSD - th·∫ø h·ªá m·ªõi)**
<img width="860" height="469" alt="image" src="https://github.com/user-attachments/assets/1ae2cd29-d0c7-40b8-91d7-36d5c24d286f" />

- **Ki·ªÉu l∆∞u tr·ªØ:** SSD-based, **kh√¥ng d√πng IO Credit Bucket**, ƒë∆°n gi·∫£n h∆°n.
- **Dung l∆∞·ª£ng:** 1GB ‚Äì 16TB.
- **Hi·ªáu nƒÉng m·∫∑c ƒë·ªãnh:**
  - **IOPS:** 3,000 IOPS (m·∫∑c ƒë·ªãnh cho m·ªçi k√≠ch th∆∞·ªõc volume).
  - **Throughput:** 125MB/s.
- **Hi·ªáu nƒÉng t√πy ch·ªânh:**
  - **TƒÉng IOPS:** L√™n ƒë·∫øn 16,000 IOPS.
  - **TƒÉng Throughput:** L√™n ƒë·∫øn 1,000MB/s.
- **Chi ph√≠:** R·∫ª h∆°n GP2 (gi·∫£m ~20%), ngay c·∫£ khi th√™m c√°c t√πy ch·ªânh hi·ªáu nƒÉng.
- **S·ª≠ d·ª•ng:** T∆∞∆°ng t·ª± GP2 nh∆∞ng ti·∫øt ki·ªám h∆°n, ƒë∆°n gi·∫£n h∆°n.

---

## 2. So s√°nh chi ti·∫øt: GP2 vs GP3

| **ƒê·∫∑c ƒëi·ªÉm**                   | **GP2**                    | **GP3**                    |
|--------------------------------|----------------------------|----------------------------|
| **C∆° ch·∫ø hi·ªáu nƒÉng**           | IO Credit Bucket           | Hi·ªáu nƒÉng c·ªë ƒë·ªãnh          |
| **IOPS m·∫∑c ƒë·ªãnh**              | 3 IOPS/GB (min 100 IOPS)   | 3,000 IOPS                 |
| **IOPS t·ªëi ƒëa**                | 16,000 IOPS                | 16,000 IOPS (t√πy ch·ªânh)    |
| **Throughput m·∫∑c ƒë·ªãnh**        | 250MB/s (size l·ªõn)         | 125MB/s                    |
| **Throughput t·ªëi ƒëa**          | 250MB/s                    | 1,000MB/s (t√πy ch·ªânh)      |
| **Dung l∆∞·ª£ng h·ªó tr·ª£**          | 1GB ‚Äì 16TB                 | 1GB ‚Äì 16TB                 |
| **Chi ph√≠**                    | Cao h∆°n (~20%)             | R·∫ª h∆°n (~20%)              |
| **T√πy ch·ªânh hi·ªáu nƒÉng**        | Kh√¥ng                      | C√≥ (IOPS & throughput)     |
| **·ª®ng d·ª•ng**                   | Boot volumes, dev/test     | T∆∞∆°ng t·ª± GP2 nh∆∞ng t·ªëi ∆∞u h∆°n |

---

### **3. Hi·ªáu nƒÉng GP2: C√°ch ho·∫°t ƒë·ªông c·ªßa IO Credit Bucket**

#### **IO Credit Bucket l√† g√¨?**
- ƒê√¢y l√† c∆° ch·∫ø gi√∫p **·ªï ƒëƒ©a EBS lo·∫°i GP2** c√¢n b·∫±ng hi·ªáu nƒÉng IOPS (s·ªë l∆∞·ª£ng thao t√°c ƒë·ªçc/ghi m·ªói gi√¢y) gi·ªØa nhu c·∫ßu th√¥ng th∆∞·ªùng (**baseline**) v√† nhu c·∫ßu ƒë·ªânh cao (**burst**).

#### **C∆° ch·∫ø ho·∫°t ƒë·ªông:**
1. **Baseline refill:**
   - T·ªëc ƒë·ªô IOPS c∆° b·∫£n ph·ª• thu·ªôc v√†o k√≠ch th∆∞·ªõc volume:
     - **3 IOPS/GB**, ho·∫∑c t·ªëi thi·ªÉu **100 IOPS** (cho volume nh·ªè h∆°n 33.33GB).
   - V√≠ d·ª•:
     - Volume 100GB ‚Üí Baseline = **300 IOPS**.
     - Volume 10GB ‚Üí Baseline = **100 IOPS** (do t·ªëi thi·ªÉu l√† 100).
   
2. **IO Credit Bucket:**
   - M·ªói volume GP2 ƒë∆∞·ª£c c·∫•p **5.4 tri·ªáu IO credits** khi t·∫°o , t·∫ßm >30 ph√∫t v·ªõi burst 3000 iops .
   - **IO credits** l√† "ƒëi·ªÉm" d√πng ƒë·ªÉ tƒÉng t·ªëc v∆∞·ª£t m·ª©c baseline.
   - N·∫øu b·∫°n kh√¥ng s·ª≠ d·ª•ng h·∫øt baseline IOPS, s·ªë d∆∞ s·∫Ω ƒë∆∞·ª£c t√≠ch l≈©y v√†o bucket.

3. **Burst hi·ªáu nƒÉng:**
   - Khi workload y√™u c·∫ßu IOPS cao h∆°n baseline, h·ªá th·ªëng s·∫Ω ti√™u th·ª• IO credits t·ª´ bucket ƒë·ªÉ ƒë·∫°t hi·ªáu nƒÉng **t·ªëi ƒëa 3,000 IOPS**.
   - Burst ch·ªâ duy tr√¨ ƒë∆∞·ª£c ƒë·∫øn khi IO credits b·ªã ti√™u hao h·∫øt.

4. **Volume l·ªõn >1TB:**
   - Khi volume l·ªõn h∆°n 1TB, baseline IOPS s·∫Ω v∆∞·ª£t 3,000 IOPS.
   - L√∫c n√†y, bucket kh√¥ng c√≤n c·∫ßn thi·∫øt v√¨ hi·ªáu nƒÉng ƒë·∫°t t·ªëi thi·ªÉu **30 IOPS/GB** (v√≠ d·ª•: 1TB = 30,000 IOPS).

#### **V√≠ d·ª• minh h·ªça:**
- **Volume 100GB:**
  - Baseline refill = **300 IOPS**.
  - C√≥ th·ªÉ burst l√™n ƒë·∫øn **3,000 IOPS** nh·ªù IO credits.
- **Volume 10GB:**
  - Baseline refill = **100 IOPS** (minimum).
  - C√≥ th·ªÉ burst l√™n ƒë·∫øn **3,000 IOPS** nh·ªù IO credits.
- **Volume 2TB:**
  - Baseline = **60,000 IOPS**, v∆∞·ª£t m·ª©c burst, n√™n kh√¥ng d√πng IO Credit Bucket.

---

### **4. Hi·ªáu nƒÉng GP3: ƒê∆°n gi·∫£n & T√πy ch·ªânh**

#### **T·∫°i sao GP3 t·ªët h∆°n?**
- GP3 lo·∫°i b·ªè ho√†n to√†n c∆° ch·∫ø IO Credit Bucket, mang l·∫°i hi·ªáu nƒÉng ·ªïn ƒë·ªãnh v√† d·ªÖ qu·∫£n l√Ω h∆°n.
- C√≥ th·ªÉ t√πy ch·ªânh hi·ªáu nƒÉng theo nhu c·∫ßu ·ª©ng d·ª•ng m√† kh√¥ng ph·∫£i ph·ª• thu·ªôc v√†o k√≠ch th∆∞·ªõc volume.

#### **Hi·ªáu nƒÉng m·∫∑c ƒë·ªãnh:**
- T·∫•t c·∫£ c√°c volume GP3 ƒë·ªÅu c√≥:
  - **3,000 IOPS** (ho·∫∑c ~16KB/operation).
  - **125MB/s throughput** (t·ªëc ƒë·ªô truy·ªÅn d·ªØ li·ªáu).

#### **Hi·ªáu nƒÉng t√πy ch·ªânh:**
- B·∫°n c√≥ th·ªÉ tƒÉng hi·ªáu nƒÉng:
  - **IOPS:** L√™n ƒë·∫øn **16,000 IOPS**.
  - **Throughput:** L√™n ƒë·∫øn **1,000MB/s**.
- Hi·ªáu nƒÉng ƒë∆∞·ª£c c·∫•u h√¨nh ƒë·ªôc l·∫≠p, kh√¥ng b·ªã r√†ng bu·ªôc b·ªüi k√≠ch th∆∞·ªõc volume.

#### **Chi ph√≠:**
- Gi√° GP3 th·∫•p h∆°n GP2 (~20% chi ph√≠ cho c√πng k√≠ch th∆∞·ªõc volume).
- Ngay c·∫£ khi tƒÉng hi·ªáu nƒÉng t√πy ch·ªânh (IOPS/throughput), GP3 v·∫´n ti·∫øt ki·ªám h∆°n GP2.

---

### **So s√°nh GP2 vs GP3:**

| **ƒê·∫∑c ƒëi·ªÉm**            | **GP2**                                       | **GP3**                         |
|-------------------------|-----------------------------------------------|---------------------------------|
| **Hi·ªáu nƒÉng m·∫∑c ƒë·ªãnh**   | Ph·ª• thu·ªôc k√≠ch th∆∞·ªõc volume (3 IOPS/GB).      | 3,000 IOPS v√† 125MB/s.         |
| **Hi·ªáu nƒÉng t·ªëi ƒëa**     | 16,000 IOPS / 250MB/s.                        | 16,000 IOPS / 1,000MB/s.       |
| **IO Credit Bucket**     | C√≥ (ƒë·ªÉ h·ªó tr·ª£ burst IOPS).                    | Kh√¥ng c·∫ßn, hi·ªáu nƒÉng ·ªïn ƒë·ªãnh.  |
| **T√πy ch·ªânh hi·ªáu nƒÉng**  | Kh√¥ng (ph·ª• thu·ªôc k√≠ch th∆∞·ªõc volume).          | C√≥ (IOPS v√† throughput).       |
| **Chi ph√≠**              | Cao h∆°n khi so c√πng hi·ªáu nƒÉng.               | R·∫ª h∆°n GP2 (~20%).             |
| **>30000IOPS**           | t·ª± ƒë·ªông scale d·ª±a tr√™n GB               | t·ª± th√™m th√¨ s·∫Ω th√™m cost            |

??? info "c√°ch ho·∫°t ƒë·ªông c·ªßa AWS EBS khi IOPS v∆∞·ª£t qu√° 30,000:

    ### **1. T·ª± ƒë·ªông scale d·ª±a tr√™n GB (>30,000 IOPS):**
    - N·∫øu b·∫°n s·ª≠ d·ª•ng **GP2 volume**:
      - Khi volume l·ªõn h∆°n 1TB, **IOPS t·ª± ƒë·ªông tƒÉng** theo k√≠ch th∆∞·ªõc (30 IOPS/GB).
      - V√≠ d·ª•:
        - Volume 2TB ‚Üí **60,000 IOPS** (2TB √ó 30 IOPS/GB).
        - Volume 4TB ‚Üí **120,000 IOPS** (4TB √ó 30 IOPS/GB).
      - **B·∫°n kh√¥ng ph·∫£i tr·∫£ th√™m chi ph√≠ ri√™ng cho IOPS.**
    
    - N·∫øu b·∫°n s·ª≠ d·ª•ng **GP3 volume**:
      - IOPS m·∫∑c ƒë·ªãnh l√† **3,000** v√† throughput l√† **125MB/s**.
      - Mu·ªën tƒÉng IOPS (l√™n ƒë·∫øn 16,000) ho·∫∑c throughput (l√™n ƒë·∫øn 1,000MB/s), **c·∫ßn tr·∫£ th√™m chi ph√≠.**
      - V√≠ d·ª•: Th√™m IOPS ho·∫∑c throughput qua baseline s·∫Ω l√†m tƒÉng cost.
    
    
    ### **2. T·ª± th√™m (GP3) s·∫Ω tƒÉng chi ph√≠:**
    - V·ªõi **GP3**:
      - Hi·ªáu nƒÉng (IOPS v√† throughput) kh√¥ng t·ª± ƒë·ªông scale theo GB.
      - N·∫øu b·∫°n mu·ªën th√™m hi·ªáu nƒÉng, c·∫ßn **t√πy ch·ªânh th·ªß c√¥ng** v√† **ch·ªãu th√™m chi ph√≠.**
      - V√≠ d·ª•:
        - TƒÉng t·ª´ 3,000 IOPS l√™n 10,000 IOPS ‚Üí B·∫°n s·∫Ω b·ªã t√≠nh th√™m ti·ªÅn.
        - TƒÉng throughput t·ª´ 125MB/s l√™n 500MB/s ‚Üí C≈©ng s·∫Ω b·ªã t√≠nh th√™m chi ph√≠.
    ## nh∆∞ng gi√° th√¨ ki·ªÉu g√¨ gp3 v·∫´n r·∫ª h∆°n    

---


## 5. Khi n√†o n√™n d√πng GP2 vs GP3?

| **Nhu c·∫ßu**                                   | **Ch·ªçn lo·∫°i storage**   |
|-----------------------------------------------|--------------------------|
| Boot volumes, ·ª©ng d·ª•ng c∆° b·∫£n                 | **GP3 (r·∫ª h∆°n, ƒë∆°n gi·∫£n h∆°n)** |
| Workload ng·∫Øt qu√£ng, c·∫ßn burst hi·ªáu nƒÉng (VD: backup, boot) | **GP2 (t·∫≠n d·ª•ng IO Credit)** |
| Workload ·ªïn ƒë·ªãnh, c·∫ßn throughput cao          | **GP3 (t√πy ch·ªânh throughput)** |
| C·∫ßn ti·∫øt ki·ªám chi ph√≠                         | **GP3 (~20% r·∫ª h∆°n GP2)** |

---

## 6. L∆∞u √Ω th·ª±c t·∫ø & ƒëi thi

### **ƒêi·ªÉm quan tr·ªçng c·∫ßn nh·ªõ**
- **GP2:** D√πng IO Credit Bucket, burst t·ªëi ƒëa 3,000 IOPS, throughput t·ªëi ƒëa 250MB/s.
- **GP3:** Hi·ªáu nƒÉng m·∫∑c ƒë·ªãnh cao h∆°n (3,000 IOPS), throughput t·ªëi ƒëa 1,000MB/s.
- **Chi ph√≠:** GP3 r·∫ª h∆°n (~20%) v√† t√πy ch·ªânh linh ho·∫°t h∆°n.

### **C√¢u h·ªèi exam th∆∞·ªùng g·∫∑p**
1. **"GP3 c√≥ r·∫ª h∆°n GP2 kh√¥ng?"** ‚Üí C√≥ (~20% ti·∫øt ki·ªám h∆°n).
2. **"GP2 c√≥ d√πng IO Credit kh√¥ng?"** ‚Üí C√≥ (tr·ª´ volume >1TB).
3. **"GP3 h·ªó tr·ª£ throughput t·ªëi ƒëa bao nhi√™u?"** ‚Üí 1,000MB/s (t√πy ch·ªânh).
4. **"Workload n√†o n√™n d√πng GP2?"** ‚Üí Workload ng·∫Øt qu√£ng (t·∫≠n d·ª•ng burst IOPS).

---

**T√≥m t·∫Øt:**  
- GP2 = Legacy SSD, d√πng IO Credit Bucket, hi·ªáu nƒÉng b·ªã gi·ªõi h·∫°n b·ªüi volume size.  
- GP3 = Modern SSD, hi·ªáu nƒÉng m·∫∑c ƒë·ªãnh cao h∆°n, kh√¥ng c·∫ßn qu·∫£n l√Ω credit, ti·∫øt ki·ªám chi ph√≠ h∆°n.  
‚Üí **D√πng GP3 cho h·∫ßu h·∫øt workload, chuy·ªÉn t·ª´ GP2 sang GP3 d·ªÖ d√†ng nh·ªù Elastic Volumes.**
