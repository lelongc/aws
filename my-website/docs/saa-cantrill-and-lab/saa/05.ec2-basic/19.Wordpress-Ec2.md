??? info "1-Click Deployment"

    ```
    Description: Animals4Life base VPC Template + Public Instance
    Parameters:
      LatestAmiId:
        Description: AMI for EC2 (default is latest AmaLinux2023)
        Type: AWS::SSM::Parameter::Value<AWS::EC2::Image::Id>
        Default: /aws/service/ami-amazon-linux-latest/al2023-ami-kernel-default-x86_64
    Resources:
      VPC:
        Type: AWS::EC2::VPC
        Properties:
          CidrBlock: 10.16.0.0/16
          EnableDnsSupport: true
          EnableDnsHostnames: true
          Tags:
            - Key: Name
              Value: a4l-vpc1
      IPv6CidrBlock:
        Type: AWS::EC2::VPCCidrBlock
        Properties:
          VpcId: !Ref VPC
          AmazonProvidedIpv6CidrBlock: true
      InternetGateway:
        Type: AWS::EC2::InternetGateway
        Properties:
          Tags:
            - Key: Name
              Value: A4L-vpc1-igw
      InternetGatewayAttachment:
        Type: AWS::EC2::VPCGatewayAttachment
        Properties:
          VpcId: !Ref VPC
          InternetGatewayId: !Ref InternetGateway
      RouteTableWeb:
        Type: AWS::EC2::RouteTable
        Properties:
          VpcId: !Ref VPC
          Tags:
            - Key: Name
              Value: A4L-vpc1-rt-web
      RouteTableWebDefaultIPv4:
        Type: AWS::EC2::Route
        DependsOn: InternetGatewayAttachment
        Properties:
          RouteTableId: !Ref RouteTableWeb
          DestinationCidrBlock: 0.0.0.0/0
          GatewayId: !Ref InternetGateway
      RouteTableWebDefaultIPv6:
        Type: AWS::EC2::Route
        DependsOn: InternetGatewayAttachment
        Properties:
          RouteTableId: !Ref RouteTableWeb
          DestinationIpv6CidrBlock: '::/0'
          GatewayId: !Ref InternetGateway
      RouteTableAssociationWebA:
        Type: AWS::EC2::SubnetRouteTableAssociation
        Properties:
          SubnetId: !Ref SubnetWEBA
          RouteTableId: !Ref RouteTableWeb
      RouteTableAssociationWebB:
        Type: AWS::EC2::SubnetRouteTableAssociation
        Properties:
          SubnetId: !Ref SubnetWEBB
          RouteTableId: !Ref RouteTableWeb
      RouteTableAssociationWebC:
        Type: AWS::EC2::SubnetRouteTableAssociation
        Properties:
          SubnetId: !Ref SubnetWEBC
          RouteTableId: !Ref RouteTableWeb
      SubnetReservedA:
        Type: AWS::EC2::Subnet
        DependsOn: IPv6CidrBlock
        Properties:
          VpcId: !Ref VPC
          AvailabilityZone: !Select
            - 0
            - !GetAZs ''
          CidrBlock: 10.16.0.0/20
          AssignIpv6AddressOnCreation: true
          Ipv6CidrBlock: !Sub
            - ${VpcPart}${SubnetPart}
            - SubnetPart: 00::/64
              VpcPart: !Select
                - 0
                - !Split
                  - 00::/56
                  - !Select
                    - 0
                    - !GetAtt VPC.Ipv6CidrBlocks
          Tags:
            - Key: Name
              Value: sn-reserved-A
      SubnetReservedB:
        Type: AWS::EC2::Subnet
        DependsOn: IPv6CidrBlock
        Properties:
          VpcId: !Ref VPC
          AvailabilityZone: !Select
            - 1
            - !GetAZs ''
          CidrBlock: 10.16.64.0/20
          AssignIpv6AddressOnCreation: true
          Ipv6CidrBlock: !Sub
            - ${VpcPart}${SubnetPart}
            - SubnetPart: 04::/64
              VpcPart: !Select
                - 0
                - !Split
                  - 00::/56
                  - !Select
                    - 0
                    - !GetAtt VPC.Ipv6CidrBlocks
          Tags:
            - Key: Name
              Value: sn-reserved-B
      SubnetReservedC:
        Type: AWS::EC2::Subnet
        DependsOn: IPv6CidrBlock
        Properties:
          VpcId: !Ref VPC
          AvailabilityZone: !Select
            - 2
            - !GetAZs ''
          CidrBlock: 10.16.128.0/20
          AssignIpv6AddressOnCreation: true
          Ipv6CidrBlock: !Sub
            - ${VpcPart}${SubnetPart}
            - SubnetPart: 08::/64
              VpcPart: !Select
                - 0
                - !Split
                  - 00::/56
                  - !Select
                    - 0
                    - !GetAtt VPC.Ipv6CidrBlocks
          Tags:
            - Key: Name
              Value: sn-reserved-C
      SubnetDBA:
        Type: AWS::EC2::Subnet
        DependsOn: IPv6CidrBlock
        Properties:
          VpcId: !Ref VPC
          AvailabilityZone: !Select
            - 0
            - !GetAZs ''
          CidrBlock: 10.16.16.0/20
          AssignIpv6AddressOnCreation: true
          Ipv6CidrBlock: !Sub
            - ${VpcPart}${SubnetPart}
            - SubnetPart: 01::/64
              VpcPart: !Select
                - 0
                - !Split
                  - 00::/56
                  - !Select
                    - 0
                    - !GetAtt VPC.Ipv6CidrBlocks
          Tags:
            - Key: Name
              Value: sn-db-A
      SubnetDBB:
        Type: AWS::EC2::Subnet
        DependsOn: IPv6CidrBlock
        Properties:
          VpcId: !Ref VPC
          AvailabilityZone: !Select
            - 1
            - !GetAZs ''
          CidrBlock: 10.16.80.0/20
          AssignIpv6AddressOnCreation: true
          Ipv6CidrBlock: !Sub
            - ${VpcPart}${SubnetPart}
            - SubnetPart: 05::/64
              VpcPart: !Select
                - 0
                - !Split
                  - 00::/56
                  - !Select
                    - 0
                    - !GetAtt VPC.Ipv6CidrBlocks
          Tags:
            - Key: Name
              Value: sn-db-B
      SubnetDBC:
        Type: AWS::EC2::Subnet
        DependsOn: IPv6CidrBlock
        Properties:
          VpcId: !Ref VPC
          AvailabilityZone: !Select
            - 2
            - !GetAZs ''
          CidrBlock: 10.16.144.0/20
          AssignIpv6AddressOnCreation: true
          Ipv6CidrBlock: !Sub
            - ${VpcPart}${SubnetPart}
            - SubnetPart: 09::/64
              VpcPart: !Select
                - 0
                - !Split
                  - 00::/56
                  - !Select
                    - 0
                    - !GetAtt VPC.Ipv6CidrBlocks
          Tags:
            - Key: Name
              Value: sn-db-C
      SubnetAPPA:
        Type: AWS::EC2::Subnet
        DependsOn: IPv6CidrBlock
        Properties:
          VpcId: !Ref VPC
          AvailabilityZone: !Select
            - 0
            - !GetAZs ''
          CidrBlock: 10.16.32.0/20
          AssignIpv6AddressOnCreation: true
          Ipv6CidrBlock: !Sub
            - ${VpcPart}${SubnetPart}
            - SubnetPart: 02::/64
              VpcPart: !Select
                - 0
                - !Split
                  - 00::/56
                  - !Select
                    - 0
                    - !GetAtt VPC.Ipv6CidrBlocks
          Tags:
            - Key: Name
              Value: sn-app-A
      SubnetAPPB:
        Type: AWS::EC2::Subnet
        DependsOn: IPv6CidrBlock
        Properties:
          VpcId: !Ref VPC
          AvailabilityZone: !Select
            - 1
            - !GetAZs ''
          CidrBlock: 10.16.96.0/20
          AssignIpv6AddressOnCreation: true
          Ipv6CidrBlock: !Sub
            - ${VpcPart}${SubnetPart}
            - SubnetPart: 06::/64
              VpcPart: !Select
                - 0
                - !Split
                  - 00::/56
                  - !Select
                    - 0
                    - !GetAtt VPC.Ipv6CidrBlocks
          Tags:
            - Key: Name
              Value: sn-app-B
      SubnetAPPC:
        Type: AWS::EC2::Subnet
        DependsOn: IPv6CidrBlock
        Properties:
          VpcId: !Ref VPC
          AvailabilityZone: !Select
            - 2
            - !GetAZs ''
          CidrBlock: 10.16.160.0/20
          AssignIpv6AddressOnCreation: true
          Ipv6CidrBlock: !Sub
            - ${VpcPart}${SubnetPart}
            - SubnetPart: 0A::/64
              VpcPart: !Select
                - 0
                - !Split
                  - 00::/56
                  - !Select
                    - 0
                    - !GetAtt VPC.Ipv6CidrBlocks
          Tags:
            - Key: Name
              Value: sn-app-C
      SubnetWEBA:
        Type: AWS::EC2::Subnet
        DependsOn: IPv6CidrBlock
        Properties:
          VpcId: !Ref VPC
          AvailabilityZone: !Select
            - 0
            - !GetAZs ''
          CidrBlock: 10.16.48.0/20
          MapPublicIpOnLaunch: true
          Ipv6CidrBlock: !Sub
            - ${VpcPart}${SubnetPart}
            - SubnetPart: 03::/64
              VpcPart: !Select
                - 0
                - !Split
                  - 00::/56
                  - !Select
                    - 0
                    - !GetAtt VPC.Ipv6CidrBlocks
          Tags:
            - Key: Name
              Value: sn-web-A
      SubnetWEBB:
        Type: AWS::EC2::Subnet
        DependsOn: IPv6CidrBlock
        Properties:
          VpcId: !Ref VPC
          AvailabilityZone: !Select
            - 1
            - !GetAZs ''
          CidrBlock: 10.16.112.0/20
          MapPublicIpOnLaunch: true
          Ipv6CidrBlock: !Sub
            - ${VpcPart}${SubnetPart}
            - SubnetPart: 07::/64
              VpcPart: !Select
                - 0
                - !Split
                  - 00::/56
                  - !Select
                    - 0
                    - !GetAtt VPC.Ipv6CidrBlocks
          Tags:
            - Key: Name
              Value: sn-web-B
      SubnetWEBC:
        Type: AWS::EC2::Subnet
        DependsOn: IPv6CidrBlock
        Properties:
          VpcId: !Ref VPC
          AvailabilityZone: !Select
            - 2
            - !GetAZs ''
          CidrBlock: 10.16.176.0/20
          MapPublicIpOnLaunch: true
          Ipv6CidrBlock: !Sub
            - ${VpcPart}${SubnetPart}
            - SubnetPart: 0B::/64
              VpcPart: !Select
                - 0
                - !Split
                  - 00::/56
                  - !Select
                    - 0
                    - !GetAtt VPC.Ipv6CidrBlocks
          Tags:
            - Key: Name
              Value: sn-web-C
      IPv6WorkaroundSubnetWEBA:
        Type: Custom::SubnetModify
        Properties:
          ServiceToken: !GetAtt IPv6WorkaroundLambda.Arn
          SubnetId: !Ref SubnetWEBA
      IPv6WorkaroundSubnetWEBB:
        Type: Custom::SubnetModify
        Properties:
          ServiceToken: !GetAtt IPv6WorkaroundLambda.Arn
          SubnetId: !Ref SubnetWEBB
      IPv6WorkaroundSubnetWEBC:
        Type: Custom::SubnetModify
        Properties:
          ServiceToken: !GetAtt IPv6WorkaroundLambda.Arn
          SubnetId: !Ref SubnetWEBC
      IPv6WorkaroundRole:
        Type: AWS::IAM::Role
        Properties:
          AssumeRolePolicyDocument:
            Version: '2012-10-17'
            Statement:
              - Effect: Allow
                Principal:
                  Service:
                    - lambda.amazonaws.com
                Action:
                  - sts:AssumeRole
          Path: /
          Policies:
            - PolicyName: !Sub ipv6-fix-logs-${AWS::StackName}
              PolicyDocument:
                Version: '2012-10-17'
                Statement:
                  - Effect: Allow
                    Action:
                      - logs:CreateLogGroup
                      - logs:CreateLogStream
                      - logs:PutLogEvents
                    Resource: arn:aws:logs:*:*:*
            - PolicyName: !Sub ipv6-fix-modify-${AWS::StackName}
              PolicyDocument:
                Version: '2012-10-17'
                Statement:
                  - Effect: Allow
                    Action:
                      - ec2:ModifySubnetAttribute
                    Resource: '*'
      IPv6WorkaroundLambda:
        Type: AWS::Lambda::Function
        Properties:
          Handler: index.lambda_handler
          Code:
            #import cfnresponse below required to send respose back to CFN
            ZipFile: !Sub |
              import cfnresponse
              import boto3
    
              def lambda_handler(event, context):
                if event['RequestType'] is 'Delete':
                  cfnresponse.send(event, context, cfnresponse.SUCCESS)
                  return
    
                responseValue = event['ResourceProperties']['SubnetId']
                ec2 = boto3.client('ec2', region_name='${AWS::Region}')
                ec2.modify_subnet_attribute(AssignIpv6AddressOnCreation={
                                'Value': True
                                },
                                SubnetId=responseValue)
                responseData = {}
                responseData['SubnetId'] = responseValue
                cfnresponse.send(event, context, cfnresponse.SUCCESS, responseData, "CustomResourcePhysicalID")
          Runtime: python3.9
          Role: !GetAtt IPv6WorkaroundRole.Arn
          Timeout: 30
      PublicEC2:
        Type: AWS::EC2::Instance
        Properties:
          InstanceType: t2.micro
          ImageId: !Ref LatestAmiId
          IamInstanceProfile: !Ref SessionManagerInstanceProfile
          SubnetId: !Ref SubnetWEBA
          SecurityGroupIds:
            - !Ref InstanceSecurityGroup
          Tags:
            - Key: Name
              Value: A4L-PublicEC2
      InstanceSecurityGroup:
        Type: AWS::EC2::SecurityGroup
        Properties:
          VpcId: !Ref VPC
          GroupDescription: Enable SSH access via port 22 IPv4 & v6
          SecurityGroupIngress:
            - Description: Allow SSH IPv4 IN
              IpProtocol: tcp
              FromPort: '22'
              ToPort: '22'
              CidrIp: 0.0.0.0/0
            - Description: Allow HTTP IPv4 IN
              IpProtocol: tcp
              FromPort: '80'
              ToPort: '80'
              CidrIp: 0.0.0.0/0
            - Description: Allow SSH IPv6 IN
              IpProtocol: tcp
              FromPort: '22'
              ToPort: '22'
              CidrIpv6: '::/0'
      SessionManagerRole:
        Type: AWS::IAM::Role
        Properties:
          AssumeRolePolicyDocument:
            Version: 2012-10-17
            Statement:
              - Effect: Allow
                Principal:
                  Service:
                    - ec2.amazonaws.com
                Action:
                  - sts:AssumeRole
          Path: /
          Policies:
            - PolicyName: root
              PolicyDocument:
                Version: 2012-10-17
                Statement:
                  - Effect: Allow
                    Action:
                      - ssm:DescribeAssociation
                      - ssm:GetDeployablePatchSnapshotForInstance
                      - ssm:GetDocument
                      - ssm:DescribeDocument
                      - ssm:GetManifest
                      - ssm:GetParameter
                      - ssm:GetParameters
                      - ssm:ListAssociations
                      - ssm:ListInstanceAssociations
                      - ssm:PutInventory
                      - ssm:PutComplianceItems
                      - ssm:PutConfigurePackageResult
                      - ssm:UpdateAssociationStatus
                      - ssm:UpdateInstanceAssociationStatus
                      - ssm:UpdateInstanceInformation
                    Resource: '*'
                  - Effect: Allow
                    Action:
                      - ssmmessages:CreateControlChannel
                      - ssmmessages:CreateDataChannel
                      - ssmmessages:OpenControlChannel
                      - ssmmessages:OpenDataChannel
                    Resource: '*'
                  - Effect: Allow
                    Action:
                      - ec2messages:AcknowledgeMessage
                      - ec2messages:DeleteMessage
                      - ec2messages:FailMessage
                      - ec2messages:GetEndpoint
                      - ec2messages:GetMessages
                      - ec2messages:SendReply
                    Resource: '*'
      SessionManagerInstanceProfile:
        Type: AWS::IAM::InstanceProfile
        Properties:
          Path: /
          Roles:
            - !Ref SessionManagerRole
    Outputs:
      a4lvpc1:
        Description: Animals4Life VPC1_ID
        Value: !Ref VPC
        Export:
          Name: a4l-vpc1
      a4lvpc1subnetweba:
        Description: Animals4Life VPC1 SubnetWEBA
        Value: !Ref SubnetWEBA
        Export:
          Name: a4l-vpc1-subnet-weba
      a4lvpc1subnetwebb:
        Description: Animals4Life VPC1 SubnetWEBB
        Value: !Ref SubnetWEBB
        Export:
          Name: a4l-vpc1-subnet-webb
      a4lvpc1subnetwebc:
        Description: Animals4Life VPC1 SubnetWEBC
        Value: !Ref SubnetWEBC
        Export:
          Name: a4l-vpc1-subnet-webc
      a4lvpc1subnetappa:
        Description: Animals4Life VPC1 SubnetAPPA
        Value: !Ref SubnetAPPA
        Export:
          Name: a4l-vpc1-subnet-appa
      a4lvpc1subnetappb:
        Description: Animals4Life VPC1 SubnetAPPB
        Value: !Ref SubnetAPPB
        Export:
          Name: a4l-vpc1-subnet-appb
      a4lvpc1subnetappc:
        Description: Animals4Life VPC1 SubnetAPPC
        Value: !Ref SubnetAPPC
        Export:
          Name: a4l-vpc1-subnet-appc
      a4lvpc1subnetdba:
        Description: Animals4Life VPC1 SubnetDBA
        Value: !Ref SubnetDBA
        Export:
          Name: a4l-vpc1-subnet-dba
      a4lvpc1subnetdbb:
        Description: Animals4Life VPC1 SubnetDBB
        Value: !Ref SubnetDBB
        Export:
          Name: a4l-vpc1-subnet-dbb
      a4lvpc1subnetdbc:
        Description: Animals4Life VPC1 SubnetDBC
        Value: !Ref SubnetDBC
        Export:
          Name: a4l-vpc1-subnet-dbc
      a4lvpc1subnetreserveda:
        Description: Animals4Life VPC1 SubnetReservedA
        Value: !Ref SubnetReservedA
        Export:
          Name: a4l-vpc1-subnet-reserveda
      a4lvpc1subnetreservedb:
        Description: Animals4Life VPC1 SubnetReservedB
        Value: !Ref SubnetReservedB
        Export:
          Name: a4l-vpc1-subnet-reservedb
      a4lvpc1subnetreservedc:
        Description: Animals4Life VPC1 SubnetReservedC
        Value: !Ref SubnetReservedC
        Export:
          Name: a4l-vpc1-subnet-reservedc
    ```
    
[https://console.aws.amazon.com/cloudformation/home?region=us-east-1#/stacks/create/review?templateURL=https://learn-cantrill-labs.s3.amazonaws.com/awscoursedemos/0006-aws-associate-ec2-wordpress-on-ec2/A4L_VPC_PUBLICINSTANCE_AL2023.yaml&stackName=WORDPRESS
](https://console.aws.amazon.com/cloudformation/home?region=us-east-1#/stacks/create/review?templateURL=https://learn-cantrill-labs.s3.amazonaws.com/awscoursedemos/0006-aws-associate-ec2-wordpress-on-ec2/A4L_VPC_PUBLICINSTANCE_AL2023.yaml&stackName=WORDPRESS
)



??? info "Lesson Commands"

    ```
    # DBName=database name for wordpress
    # DBUser=mariadb user for wordpress
    # DBPassword=password for the mariadb user for wordpress
    # DBRootPassword = root password for mariadb
    
    # STEP 1 - Configure Authentication Variables which are used below
    DBName='a4lwordpress'
    DBUser='a4lwordpress'
    DBPassword='4n1m4l$4L1f3'
    DBRootPassword='4n1m4l$4L1f3'
    
    # STEP 2 - Install system software - including Web and DB
    sudo dnf install wget php-mysqlnd httpd php-fpm php-mysqli mariadb105-server php-json php php-devel -y
    
    
    # STEP 3 - Web and DB Servers Online - and set to startup
    
    sudo systemctl enable httpd
    sudo systemctl enable mariadb
    sudo systemctl start httpd
    sudo systemctl start mariadb
    
    
    # STEP 4 - Set Mariadb Root Password
    sudo mysqladmin -u root password $DBRootPassword
    
    
    # STEP 5 - Install Wordpress
    sudo wget http://wordpress.org/latest.tar.gz -P /var/www/html
    cd /var/www/html
    sudo tar -zxvf latest.tar.gz
    sudo cp -rvf wordpress/* .
    sudo rm -R wordpress
    sudo rm latest.tar.gz
    
    
    # STEP 6 - Configure Wordpress
    
    sudo cp ./wp-config-sample.php ./wp-config.php
    sudo sed -i "s/'database_name_here'/'$DBName'/g" wp-config.php
    sudo sed -i "s/'username_here'/'$DBUser'/g" wp-config.php
    sudo sed -i "s/'password_here'/'$DBPassword'/g" wp-config.php   
    sudo chown apache:apache * -R
    
    
    # STEP 7 Create Wordpress DB
    
    echo "CREATE DATABASE $DBName;" >> /tmp/db.setup
    echo "CREATE USER '$DBUser'@'localhost' IDENTIFIED BY '$DBPassword';" >> /tmp/db.setup
    echo "GRANT ALL ON $DBName.* TO '$DBUser'@'localhost';" >> /tmp/db.setup
    echo "FLUSH PRIVILEGES;" >> /tmp/db.setup
    mysql -u root --password=$DBRootPassword < /tmp/db.setup
    sudo rm /tmp/db.setup
    
    
    # STEP 8 - Browse to http://your_instance_public_ipv4_ip
    ```
    
[https://learn-cantrill-labs.s3.amazonaws.com/awscoursedemos/0006-aws-associate-ec2-wordpress-on-ec2/lesson_commands_AL2023.txt
](https://learn-cantrill-labs.s3.amazonaws.com/awscoursedemos/0006-aws-associate-ec2-wordpress-on-ec2/lesson_commands_AL2023.txt
)

Blog Images
[https://learn-cantrill-labs.s3.amazonaws.com/awscoursedemos/0006-aws-associate-ec2-wordpress-on-ec2/blogimages.zip](https://learn-cantrill-labs.s3.amazonaws.com/awscoursedemos/0006-aws-associate-ec2-wordpress-on-ec2/blogimages.zip)


## ðŸ’» CÃ i Ä‘áº·t WordPress thá»§ cÃ´ng trÃªn EC2 â€“ Pháº§n 1 (Há»c cÃ¡ch KHÃ”NG nÃªn lÃ m)

---

## 1. Má»¥c tiÃªu & Bá»‘i cáº£nh

- **Má»¥c tiÃªu:** Tráº£i nghiá»‡m quy trÃ¬nh cÃ i Ä‘áº·t má»™t á»©ng dá»¥ng (WordPress) thá»§ cÃ´ng trÃªn EC2 Ä‘á»ƒ hiá»ƒu rÃµ cÃ¡c nhÆ°á»£c Ä‘iá»ƒm cá»§a phÆ°Æ¡ng phÃ¡p nÃ y.
- **Táº¡i sao?** Hiá»ƒu Ä‘Æ°á»£c sá»± phá»©c táº¡p vÃ  rá»§i ro cá»§a viá»‡c cÃ i Ä‘áº·t thá»§ cÃ´ng sáº½ giÃºp ta Ä‘Ã¡nh giÃ¡ Ä‘Ãºng giÃ¡ trá»‹ cá»§a cÃ¡c cÃ´ng cá»¥ tá»± Ä‘á»™ng hÃ³a trÃªn AWS sau nÃ y.
- **Kiáº¿n trÃºc cuá»‘i cÃ¹ng:**
    - Má»™t trang WordPress hoáº¡t Ä‘á»™ng trÃªn **má»™t EC2 instance duy nháº¥t**.
    - Kiáº¿n trÃºc **Ä‘Æ¡n khá»‘i (monolithic)**: Cáº£ web server (Apache) vÃ  database (MariaDB) Ä‘á»u cháº¡y trÃªn cÃ¹ng má»™t instance.
    - **KhÃ´ng cÃ³ tÃ­nh sáºµn sÃ ng cao (High Availability)**.

---

## 2. BÆ°á»›c 1: Chuáº©n bá»‹ mÃ´i trÆ°á»ng

1.  **ÄÄƒng nháº­p AWS:** Sá»­ dá»¥ng tÃ i khoáº£n Management Account cá»§a báº¡n.
2.  **Chá»n Region:** `us-east-1` (N. Virginia).
3.  **Deploy CloudFormation Stack:**
    - Sá»­ dá»¥ng link "one-click deployment" Ä‘Æ°á»£c cung cáº¥p kÃ¨m bÃ i há»c.
    - Stack name sáº½ lÃ  `WordPress`.
    - KÃ©o xuá»‘ng dÆ°á»›i, tick vÃ o Ã´ "capabilities".
    - Nháº¥n **Create stack**.
    - **Quan trá»ng:** Äá»£i Ä‘áº¿n khi tráº¡ng thÃ¡i stack chuyá»ƒn thÃ nh **CREATE_COMPLETE**.
4.  **Má»Ÿ tÃ i liá»‡u lá»‡nh:** Má»Ÿ file "Lesson Commands Document" Ä‘Ã­nh kÃ¨m Ä‘á»ƒ copy-paste cÃ¡c lá»‡nh cáº§n thiáº¿t.

---

## 3. BÆ°á»›c 2: Káº¿t ná»‘i vÃ o EC2 Instance

1.  Truy cáº­p **EC2 Console**.
2.  VÃ o má»¥c **Instances (running)**.
3.  Báº¡n sáº½ tháº¥y má»™t instance cÃ³ tÃªn `A4LE public EC2`.
4.  Chuá»™t pháº£i vÃ o instance â†’ **Connect**.
5.  Chá»n tab **EC2 Instance Connect**.
6.  Username: `ec2-user`.
7.  Nháº¥n **Connect**.

---

## 4. BÆ°á»›c 3: CÃ i Ä‘áº·t thá»§ cÃ´ng trÃªn EC2 (qua Terminal)

### 3.1. Thiáº¿t láº­p biáº¿n mÃ´i trÆ°á»ng

Má»¥c Ä‘Ã­ch: LÆ°u trá»¯ cÃ¡c thÃ´ng tin nháº¡y cáº£m (tÃªn database, user, password) vÃ o biáº¿n Ä‘á»ƒ tÃ¡i sá»­ dá»¥ng, trÃ¡nh gÃµ láº¡i vÃ  giáº£m lá»—i.

```bash
# Äáº·t tÃªn database
export DB_NAME='a4l_wordpress_db'

# Äáº·t tÃªn user database
export DB_USER='a4l_wordpress_user'

# Äáº·t máº­t kháº©u cho user database
export DB_PASSWORD='Password123!!'

# Äáº·t máº­t kháº©u cho user root cá»§a database
export DB_ROOT_PASSWORD='Password321!!'

# Kiá»ƒm tra láº¡i má»™t biáº¿n Ä‘á»ƒ cháº¯c cháº¯n
echo $DB_NAME
```

### 3.2. CÃ i Ä‘áº·t cÃ¡c gÃ³i pháº§n má»m cáº§n thiáº¿t

CÃ i Ä‘áº·t web server (Apache), database server (MariaDB) vÃ  cÃ´ng cá»¥ táº£i file (wget).

```bash
# DÃ¹ng dnf Ä‘á»ƒ cÃ i Ä‘áº·t cÃ¡c gÃ³i
sudo dnf install mariadb105-server httpd wget -y
```
*(LÆ°u Ã½: `-y` Ä‘á»ƒ tá»± Ä‘á»™ng Ä‘á»“ng Ã½ cÃ i Ä‘áº·t)*

### 3.3. KÃ­ch hoáº¡t vÃ  khá»Ÿi Ä‘á»™ng cÃ¡c dá»‹ch vá»¥

Äáº£m báº£o web server vÃ  database tá»± Ä‘á»™ng cháº¡y khi instance khá»Ÿi Ä‘á»™ng láº¡i vÃ  khá»Ÿi cháº¡y chÃºng ngay bÃ¢y giá».

```bash
# KÃ­ch hoáº¡t dá»‹ch vá»¥ httpd (Apache)
sudo systemctl enable httpd

# KÃ­ch hoáº¡t dá»‹ch vá»¥ mariadb
sudo systemctl enable mariadb

# Khá»Ÿi Ä‘á»™ng dá»‹ch vá»¥ httpd
sudo systemctl start httpd

# Khá»Ÿi Ä‘á»™ng dá»‹ch vá»¥ mariadb
sudo systemctl start mariadb
```

### 3.4. Thiáº¿t láº­p máº­t kháº©u root cho Database

Báº£o máº­t cÆ¡ sá»Ÿ dá»¯ liá»‡u báº±ng cÃ¡ch Ä‘áº·t máº­t kháº©u cho ngÆ°á»i dÃ¹ng quáº£n trá»‹ cao nháº¥t (root).

```bash
# Äáº·t máº­t kháº©u root cho MariaDB, sá»­ dá»¥ng biáº¿n Ä‘Ã£ táº¡o
sudo mysqladmin -u root password "$DB_ROOT_PASSWORD"
```

### 3.5. Táº£i vÃ  giáº£i nÃ©n mÃ£ nguá»“n WordPress

1.  **Táº£i WordPress vá» thÆ° má»¥c gá»‘c cá»§a web server (`/var/www/html`)**:

    ```bash
    # DÃ¹ng wget Ä‘á»ƒ táº£i file cÃ i Ä‘áº·t má»›i nháº¥t tá»« wordpress.org
    sudo wget https://wordpress.org/latest.tar.gz -P /var/www/html
    ```

2.  **Di chuyá»ƒn vÃ o thÆ° má»¥c web root vÃ  giáº£i nÃ©n**:

    ```bash
    # Chuyá»ƒn vÃ o thÆ° má»¥c html
    cd /var/www/html

    # Giáº£i nÃ©n file vá»«a táº£i
    sudo tar -zxvf latest.tar.gz
    ```

3.  **Di chuyá»ƒn file tá»« thÆ° má»¥c con ra thÆ° má»¥c gá»‘c**:
    Sau khi giáº£i nÃ©n, cÃ¡c file náº±m trong thÆ° má»¥c `/var/www/html/wordpress`. Ta cáº§n chuyá»ƒn chÃºng ra `/var/www/html`.

    ```bash
    # Copy toÃ n bá»™ ná»™i dung tá»« thÆ° má»¥c wordpress ra thÆ° má»¥c hiá»‡n táº¡i (.)
    sudo cp -r wordpress/* .
    ```

4.  **Dá»n dáº¹p cÃ¡c file khÃ´ng cáº§n thiáº¿t**:
    XÃ³a thÆ° má»¥c `wordpress` rá»—ng vÃ  file nÃ©n `latest.tar.gz`.

    ```bash
    # XÃ³a thÆ° má»¥c wordpress
    sudo rm -rf wordpress

    # XÃ³a file nÃ©n
    sudo rm -f latest.tar.gz
    ```

5.  **Kiá»ƒm tra láº¡i káº¿t quáº£**:

    ```bash
    # Liá»‡t kÃª cÃ¡c file trong thÆ° má»¥c hiá»‡n táº¡i
    ls -la
    ```

Báº¡n sáº½ tháº¥y toÃ n bá»™ file vÃ  thÆ° má»¥c cá»§a WordPress Ä‘Ã£ náº±m trá»±c tiáº¿p trong `/var/www/html`.

