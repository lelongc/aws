<img width="837" height="396" alt="image" src="https://github.com/user-attachments/assets/bcdf9174-c6fd-49c6-8ba8-755f6b05cd67" />
<img width="817" height="427" alt="image" src="https://github.com/user-attachments/assets/52fddd23-fe97-41fe-9592-5de0a6422cdf" />
<img width="818" height="443" alt="image" src="https://github.com/user-attachments/assets/c1063b29-09b0-4cbb-bc7c-d877508fd1d5" />

## üñºÔ∏è Amazon Machine Image (AMI) ‚Äì Ki·∫øn th·ª©c & ki·∫øn tr√∫c ƒë·∫ßy ƒë·ªß EC2 (chu·∫©n ƒëi thi v√† ƒëi l√†m)

---

## 1. AMI l√† g√¨? Kh√°i ni·ªám c∆° b·∫£n & ·ª©ng d·ª•ng

- **AMI (Amazon Machine Image):**  
  - L√† ‚Äúm·∫´u‚Äù c·∫•u h√¨nh EC2 instance, ch·ª©a OS + ·ª©ng d·ª•ng + c·∫•u h√¨nh + (t√πy ch·ªçn) d·ªØ li·ªáu.
  - D√πng ƒë·ªÉ **t·∫°o m·ªõi nhanh nhi·ªÅu EC2 instance** t·ª´ c√πng m·ªôt chu·∫©n c·∫•u h√¨nh.
  - Khi b·∫°n launch EC2, th·ª±c ch·∫•t l√† launch t·ª´ m·ªôt AMI.

- **C√≥ 3 ngu·ªìn AMI:**
    - **AWS managed:** V√≠ d·ª• Amazon Linux 2, Ubuntu, Red Hat‚Ä¶
    - **Community AMI:** Do c·ªông ƒë·ªìng/vendor cung c·∫•p (CentOS, c√°c b·∫£n custom‚Ä¶).
    - **Marketplace AMI:** AMI c√≥ k√®m license ph·∫ßn m·ªÅm th∆∞∆°ng m·∫°i, tr·∫£ ph√≠ th√™m (c√≥ th·ªÉ theo gi·ªù).

---

## 2. ƒê·∫∑c ƒëi·ªÉm & v√πng (region) c·ªßa AMI

- **AMI l√† t√†i nguy√™n theo **region**:**
    - M·ªói region c√≥ ID AMI ri√™ng cho c√πng m·ªôt OS/distribution.
    - **AMI ch·ªâ d√πng ƒë∆∞·ª£c trong region m√† n√≥ ƒë∆∞·ª£c t·∫°o** (nh∆∞ng c√≥ th·ªÉ copy sang v√πng kh√°c).

- **M·ªói AMI c√≥ ID d·∫°ng:**  
    - `ami-xxxxxxxxxxxxxxxxx` (kh√¥ng gi·ªëng nhau gi·ªØa c√°c v√πng).

---

## 3. Quy·ªÅn truy c·∫≠p AMI

- **Default:** Private, ch·ªâ account t·∫°o ƒë∆∞·ª£c d√πng.
- **C√≥ th·ªÉ ch·ªânh:**
    - **Public:** Ai c≈©ng d√πng ƒë∆∞·ª£c.
    - **Explicit:** Ch·ªâ ƒë·ªãnh t·ª´ng AWS Account ƒë∆∞·ª£c quy·ªÅn d√πng.

---

## 4. V√≤ng ƒë·ªùi AMI: 4 b∆∞·ªõc chu·∫©n

1. **Launch:** D√πng AMI t·∫°o EC2 instance.
2. **Configure:** C√†i ƒë·∫∑t, c·∫•u h√¨nh, tinh ch·ªânh instance theo √Ω (c√†i app, ƒë·ªïi config, th√™m volume‚Ä¶).
3. **Create image:** T·∫°o AMI m·ªõi t·ª´ instance ƒë√£ tinh ch·ªânh (bake l·∫°i tr·∫°ng th√°i).
4. **Launch again:** D√πng AMI ƒë√£ ‚Äúbake‚Äù ƒë·ªÉ t·∫°o nhi·ªÅu EC2 instance chu·∫©n c·∫•u h√¨nh mong mu·ªën.

- **Kh√°i ni·ªám ‚ÄúAMI baking‚Äù:**  
    - C√†i ƒë·∫∑t, c·∫•u h√¨nh, ki·ªÉm tra tr√™n m·ªôt instance ‚Üí t·∫°o AMI t·ª´ ƒë√≥ ‚Üí d√πng AMI m·ªõi ‚Äúbake‚Äù ra h√†ng lo·∫°t instance gi·ªëng nhau.
    - Hi·ªáu qu·∫£ cho deploy production, ti·∫øt ki·ªám th·ªùi gian, gi·∫£m l·ªói.

---

## 5. Ki·∫øn tr√∫c AMI ‚Äì Snapshot & Block Device Mapping

- **Khi t·∫°o AMI t·ª´ m·ªôt EC2 instance:**
    - **T·∫•t c·∫£ EBS volume ƒëang g·∫Øn s·∫Ω ƒë∆∞·ª£c snapshot l·∫°i.**
    - **AMI kh√¥ng ch·ª©a tr·ª±c ti·∫øp d·ªØ li·ªáu, m√† ch·ªâ ch·ª©a th√¥ng tin:**
        - Danh s√°ch c√°c snapshot ID.
        - Block device mapping: Li√™n k·∫øt snapshot v·ªõi device id g·ªëc (v√≠ d·ª•: /dev/xvda, /dev/xvdf‚Ä¶).
        - Metadata quy·ªÅn truy c·∫≠p.
    - **Khi launch instance t·ª´ AMI:**
        - AWS d√πng snapshot ƒë·ªÉ t·∫°o EBS volume m·ªõi theo device id g·ªëc.
        - Attach c√°c volume n√†y v√†o instance m·ªõi.

- **Snapshot l√† incremental:**  
    - L·∫ßn ƒë·∫ßu l√† full, c√°c l·∫ßn sau ch·ªâ l∆∞u thay ƒë·ªïi.

---

## 6. T√≠nh nƒÉng n√¢ng cao & l∆∞u √Ω

- **Kh√¥ng th·ªÉ ch·ªânh s·ª≠a tr·ª±c ti·∫øp AMI ƒë√£ t·∫°o.**  
    - Mu·ªën thay ƒë·ªïi: launch t·ª´ AMI ‚Üí c·∫•u h√¨nh l·∫°i ‚Üí t·∫°o AMI m·ªõi.
- **AMI c√≥ th·ªÉ copy sang region kh√°c.**  
    - Khi copy, c√°c snapshot li√™n quan c≈©ng ƒë∆∞·ª£c copy.
- **C√≥ th·ªÉ chia s·∫ª AMI cho account kh√°c ho·∫∑c public.**
- **Chi ph√≠:**  
    - **AMI kh√¥ng t√≠nh ph√≠ ri√™ng**, nh∆∞ng **snapshot b√™n d∆∞·ªõi s·∫Ω b·ªã t√≠nh ph√≠ l∆∞u tr·ªØ**.
    - Dung l∆∞·ª£ng snapshot ch·ªâ t√≠nh d·ª±a tr√™n data th·ª±c s·ª± d√πng tr√™n EBS volume (kh√¥ng ph·∫£i to√†n b·ªô dung l∆∞·ª£ng c·∫•p ph√°t).

---

## 7. M·ªôt s·ªë thu·∫≠t ng·ªØ v√† m·∫πo thi

- **Block device mapping:** B·∫£n ƒë·ªì √°nh x·∫° gi·ªØa device id v√† snapshot id. Khi launch instance, AWS d√πng √°nh x·∫° n√†y ƒë·ªÉ attach ƒë√∫ng volume ra ƒë√∫ng device.
- **AMI baking:** Ti√™u chu·∫©n tri·ªÉn khai production (l√†m 1 ‚Üí nh√¢n b·∫£n n).
- **Ch·ªânh s·ª≠a AMI:** Kh√¥ng ch·ªânh s·ª≠a, ch·ªâ t·∫°o m·ªõi t·ª´ instance ƒë√£ tinh ch·ªânh.
- **AMI l√† t√†i nguy√™n theo region, mu·ªën d√πng ·ªü v√πng kh√°c ph·∫£i copy.**
- **Chi ph√≠ snapshot ph·ª• thu·ªôc v√†o data d√πng, kh√¥ng ph·∫£i t·ªïng size EBS.**
- **AMI c√≥ th·ªÉ d√πng cho m·ªçi AZ trong c√πng region.**

---

## 8. S∆° ƒë·ªì ki·∫øn tr√∫c AMI ‚Äì Block Device Mapping & Snapshot

```mermaid
flowchart TD
    subgraph "EC2 Instance (ngu·ªìn t·∫°o AMI)"
        A[Volume /dev/xvda] -- Snapshot --> S1([Snapshot 1])
        B[Volume /dev/xvdf] -- Snapshot --> S2([Snapshot 2])
    end
    subgraph "AMI"
        M["Block Device Mapping"]
        M -- √°nh x·∫° /dev/xvda --> S1
        M -- √°nh x·∫° /dev/xvdf --> S2
        M -- metadata, permission, region
    end
    S1 -->|D√πng ƒë·ªÉ launch instance| V1[Volume m·ªõi /dev/xvda]
    S2 -->|D√πng ƒë·ªÉ launch instance| V2[Volume m·ªõi /dev/xvdf]
```

---

## 9. T·ªïng k·∫øt d·ªÖ nh·ªõ

- **AMI = ‚Äúm·∫´u‚Äù c·∫•u h√¨nh EC2, g·ªìm snapshot c√°c volume + √°nh x·∫° device.**
- **AMI ch·ªâ d√πng trong 1 region, mu·ªën d√πng v√πng kh√°c ph·∫£i copy.**
- **Kh√¥ng ch·ªânh s·ª≠a tr·ª±c ti·∫øp AMI, ch·ªâ t·∫°o m·ªõi t·ª´ instance.**
- **AMI baking = ƒë√≥ng g√≥i c·∫•u h√¨nh, tri·ªÉn khai h√†ng lo·∫°t instance gi·ªëng nhau.**
- **Chi ph√≠: snapshot EBS (d·ªØ li·ªáu th·ª±c d√πng).**
- **C√≥ th·ªÉ chia s·∫ª AMI cho account kh√°c ho·∫∑c public.**

---

## ??? Info (Ghi ch√∫ th√™m)

- **B·∫°n c√≥ th·ªÉ d√πng AMI marketplace ƒë·ªÉ deploy instance k√®m license ph·∫ßn m·ªÅm th∆∞∆°ng m·∫°i.**
- **Khi launch instance t·ª´ AMI, snapshot s·∫Ω t·∫°o ra EBS volume m·ªõi ·ªü AZ b·∫°n ch·ªçn.**
- **N·∫øu AMI c√≥ nhi·ªÅu volume, t·∫•t c·∫£ volume s·∫Ω snapshot ri√™ng bi·ªát v√† √°nh x·∫° ƒë√∫ng device.**
- **AMI baking r·∫•t hi·ªáu qu·∫£ ƒë·ªÉ chu·∫©n h√≥a m√¥i tr∆∞·ªùng production/dev/test.**
- **AMI ƒë√≠nh k√®m permission/metadata, kh√¥ng ch·ª©a data tr·ª±c ti·∫øp m√† ch·ªâ tham chi·∫øu ƒë·∫øn c√°c snapshot.**

---
