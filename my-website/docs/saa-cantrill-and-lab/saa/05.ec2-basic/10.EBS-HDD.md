# 💾 AWS EBS HDD-based Volumes: ST1 & SC1 (tóm tắt thực tế đi làm & thi)

---

## 1. Tổng quan – Khi nào dùng HDD EBS?
<img width="834" height="484" alt="image" src="https://github.com/user-attachments/assets/2948558e-897c-449c-88f2-5f78bb71f4b1" />

- **HDD-based:** Dùng cơ (có motor, đầu đọc – physical moving parts) → tốc độ thấp hơn SSD, latency cao, không phù hợp random access.
- Chỉ nên dùng cho **workload cần throughput lớn (MB/s), không cần IOPS cao** và/hoặc **ưu tiên chi phí rẻ**.
- Không nên dùng cho database OLTP, app cần latency thấp, workload random.

---

## 2. Các loại HDD EBS phổ biến

| Volume type   | Tên đầy đủ                | Khi dùng chính           | Dung lượng      | Max throughput   | Max IOPS (1MB IO) | Credit/bucket  |
|---------------|---------------------------|--------------------------|-----------------|------------------|-------------------|---------------|
| **st1**       | Throughput Optimized HDD  | Big data, logs, DW, ETL  | 125GB – 16TB    | 500 MB/s         | 500 (1MB/block)   | Có            |
| **sc1**       | Cold HDD                  | Archive, rarely access   | 125GB – 16TB    | 250 MB/s         | 250 (1MB/block)   | Có            |

*Có loại “magnetic” legacy nhưng không dùng nữa.*

---

## 3. ST1 – Throughput Optimized HDD

- **Thiết kế cho:** Dữ liệu truy cập thường xuyên theo kiểu **sequential** (log processing, data warehouse, streaming big data, ETL…)
- **Performance:**
  - **Baseline:** 40 MB/s mỗi 1TB dung lượng
  - **Burst:** 250 MB/s mỗi 1TB dung lượng, lên đến max 500 MB/s (tối đa 500 IOPS)
  - **IO block:** 1MB (1 IOPS = 1MB)
- **Credit bucket:** Cơ chế giống gp2, nhưng tính theo MB/s, không phải IOPS
- **Chi phí:** Rẻ hơn SSD (gp2/gp3/io1/io2)
- **Không phù hợp:** workload random, database transactional, latency-sensitive

---

## 4. SC1 – Cold HDD

- **Thiết kế cho:** Dữ liệu truy cập rất ít, lưu trữ lâu dài, archive, backup, rarely accessed
- **Performance:**
  - **Baseline:** 12 MB/s mỗi 1TB dung lượng
  - **Burst:** 80 MB/s mỗi 1TB dung lượng, max 250 MB/s (tối đa 250 IOPS)
  - **IO block:** 1MB (1 IOPS = 1MB)
- **Credit bucket:** Giống st1, tính theo MB/s
- **Chi phí:** **Rẻ nhất** trong các loại EBS
- **Không phù hợp:** workload cần truy cập thường xuyên, database, latency thấp

---

## 5. Lưu ý kỹ thuật & thực tế

- **Chỉ nên dùng khi workload thật sự phù hợp**: streaming/log processing (st1), archive (sc1)
- **Không dùng cho:** Database OLTP, boot volumes, random read/write
- **HDD EBS = throughput > IOPS, latency cao**
- **Dùng block size nhỏ (<1MB) sẽ bị drop hiệu năng mạnh** (chỉ tối ưu khi block size = 1MB)
- **Credit bucket**: Nếu hết (do burst lâu), throughput sẽ tụt về baseline → giám sát CloudWatch (BurstBalance)
- **Snapshot, encryption:** Hỗ trợ như SSD EBS

---

## 6. Mapping nhanh: chọn loại nào?

| Nhu cầu                                 | Volume type nên dùng   |
|------------------------------------------|------------------------|
| Log processing, data warehouse, streaming, ETL | st1           |
| Lưu trữ archive, seldom access, cold data      | sc1           |
| Database, random, latency-sensitive            | Không dùng HDD EBS (chọn SSD) |

---

## 7. Câu hỏi exam hay gặp

- “EBS nào rẻ nhất?” → sc1 (cold HDD)
- “st1 phù hợp workload nào?” → Sequential throughput lớn, log processing
- “sc1 phù hợp khi nào?” → Data archive, truy cập rất ít
- “Block size tối ưu của st1/sc1?” → 1MB (dùng nhỏ hơn sẽ giảm hiệu năng)
- “HDD EBS có dùng credit bucket không?” → Có, tính theo throughput (MB/s)
- “Có nên dùng st1/sc1 cho database?” → Không! (latency cao, random access tệ)

---

**Tóm tắt:**  
- **st1:** Throughput tối ưu, rẻ hơn SSD, log/big data/stream/ETL, không cho random/db.
- **sc1:** Lưu trữ cực rẻ, archive, rarely access, không cho workload thường xuyên.
- **Cần IOPS cao/latency thấp, luôn chọn SSD (gp3/io2), không dùng HDD EBS.**

---
