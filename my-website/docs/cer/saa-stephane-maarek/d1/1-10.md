# 1.**Amazon S3 Lifecycle** â€“ cÃ¡ch mÃ  báº¡n tá»± Ä‘á»™ng **xÃ³a hoáº·c lÆ°u trá»¯ dá»¯ liá»‡u cÅ©** trong S3 bucket. MÃ¬nh sáº½ **giáº£i thÃ­ch tá»«ng pháº§n** má»™t cÃ¡ch dá»… hiá»ƒu nháº¥t:

---

### ğŸ”¸ Báº£n gá»‘c:

> **If you have an object expiration lifecycle configuration in your unversioned bucket**
>
> and **you want to maintain the same permanent delete behavior** when you enable versioning,
>
> you must add a **noncurrent expiration configuration** .

#### âœ… NghÄ©a:

> Náº¿u báº¡n Ä‘ang dÃ¹ng cáº¥u hÃ¬nh **tá»± Ä‘á»™ng xÃ³a Ä‘á»‘i tÆ°á»£ng (object expiration)** trong má»™t bucket **khÃ´ng báº­t versioning** ,
>
> vÃ  báº¡n muá»‘n giá»¯ nguyÃªn hÃ nh vi "xÃ³a vÄ©nh viá»…n" Ä‘Ã³ khi báº¡n **báº­t versioning lÃªn** ,
>
> thÃ¬ báº¡n **pháº£i thÃªm má»™t cáº¥u hÃ¬nh `noncurrent expiration`** .

---

### ğŸ”¸ Báº£n gá»‘c:

> The **noncurrent expiration lifecycle configuration** manages the **deletes of the noncurrent object versions**
>
> in the versioning-enabled bucket.

#### âœ… NghÄ©a:

> Cáº¥u hÃ¬nh `noncurrent expiration` dÃ¹ng Ä‘á»ƒ **tá»± Ä‘á»™ng xÃ³a cÃ¡c phiÃªn báº£n cÅ© (noncurrent versions)**
>
> trong bucket Ä‘Ã£ báº­t versioning.

---

### ğŸ”¸ Báº£n gá»‘c:

> (A versioning-enabled bucket maintains one current, and zero or more noncurrent, object versions.)

#### âœ… NghÄ©a:

> Má»™t bucket báº­t versioning sáº½ lÆ°u:
>
> - 1 phiÃªn báº£n hiá»‡n táº¡i ( **current** )
> - vÃ  0 hoáº·c nhiá»u phiÃªn báº£n cÅ© ( **noncurrent** )

---

### ğŸ“Œ TÃ³m táº¯t dá»… hiá»ƒu:

| TrÆ°á»›c khi báº­t versioning                     | Sau khi báº­t versioning                                   |
| -------------------------------------------- | -------------------------------------------------------- |
| Báº¡n dÃ¹ng `expiration`Ä‘á»ƒ xÃ³a object vÄ©nh viá»…n | S3 khÃ´ng cÃ²n xÃ³a vÄ©nh viá»…n khi object bá»‹ ghi Ä‘Ã¨ hoáº·c xÃ³a |
| â†’ Object biáº¿n máº¥t hoÃ n toÃ n                  | â†’ Object cÅ© trá»Ÿ thÃ nh**noncurrent version**              |
| KhÃ´ng cáº§n thÃªm gÃ¬                            | **Pháº£i thÃªm `noncurrent expiration`**Ä‘á»ƒ dá»n rÃ¡c          |

---

### ğŸ” VÃ­ dá»¥:

Báº¡n cÃ³ file `report.pdf` trong bucket:

- âœ… Khi bucket **chÆ°a báº­t versioning** :
  - Báº¡n cáº¥u hÃ¬nh: "xÃ³a sau 30 ngÃ y"
  - â†’ 30 ngÃ y sau, file `report.pdf` bá»‹ xÃ³a vÄ©nh viá»…n.
- âŒ Sau khi **báº­t versioning** :
  - Khi báº¡n cáº­p nháº­t `report.pdf`, thÃ¬:
    - báº£n cÅ© trá»Ÿ thÃ nh **noncurrent version**
    - báº£n má»›i lÃ  **current version**
  - Náº¿u báº¡n chá»‰ cÃ³ `expiration`, thÃ¬ **chá»‰ báº£n hiá»‡n táº¡i má»›i bá»‹ xÃ³a** , cÃ²n báº£n cÅ© váº«n cÃ²n.
  - ğŸ‘‰ Báº¡n cáº§n **thÃªm `noncurrent expiration`** Ä‘á»ƒ xÃ³a cáº£ báº£n cÅ© sau x ngÃ y.

# 2.Má»™t trÆ°á»ng Ä‘áº¡i há»c Ivy League Ä‘ang há»— trá»£ NASA xÃ¡c Ä‘á»‹nh cÃ¡c Ä‘á»‹a Ä‘iá»ƒm háº¡ cÃ¡nh tiá»m nÄƒng cho tÃ u thÄƒm dÃ² khÃ´ng ngÆ°á»i lÃ¡i. Há» sá»­ dá»¥ng kiáº¿n trÃºc á»©ng dá»¥ng dá»±a trÃªn **HPC** . Há»i á»©ng dá»¥ng nÃ y nÃªn triá»ƒn khai EC2 theo kiá»ƒu topology nÃ o?

---

## âœ… ÄÃ¡p Ã¡n Ä‘Ãºng:

**The Amazon EC2 instances should be deployed in a _cluster placement group_ so that the underlying workload can benefit from low network latency and high network throughput.**

---

## ğŸ” Giáº£i thÃ­ch chi tiáº¿t:

### 1. ğŸ”¬ **Hiá»ƒu yÃªu cáº§u cá»§a bÃ i toÃ¡n HPC:**

- **High Performance Computing (HPC)** lÃ  cÃ¡c á»©ng dá»¥ng tÃ­nh toÃ¡n hiá»‡u nÄƒng cao, thÆ°á»ng xá»­ lÃ½ khá»‘i lÆ°á»£ng lá»›n dá»¯ liá»‡u vÃ  yÃªu cáº§u:
  - **Truyá»n dá»¯ liá»‡u nhanh giá»¯a cÃ¡c node**
  - **Äá»™ trá»… tháº¥p**
  - **BÄƒng thÃ´ng máº¡ng cao**
  - **Giao tiáº¿p node-to-node thÆ°á»ng xuyÃªn**
- VÃ­ dá»¥ trong cÃ¢u há»i lÃ  má»™t bÃ i toÃ¡n **khoa há»c khÃ´ng gian** , sá»­ dá»¥ng tÃ­nh toÃ¡n máº¡nh Ä‘á»ƒ phÃ¢n tÃ­ch dá»¯ liá»‡u vÃ  mÃ´ phá»ng, ráº¥t Ä‘iá»ƒn hÃ¬nh cho workload HPC.

---

### 2. ğŸ§  **Cluster Placement Group phÃ¹ há»£p nháº¥t cho HPC vÃ¬:**

- **Cluster Placement Group** Ä‘áº·t táº¥t cáº£ cÃ¡c instance trong má»™t nhÃ³m **gáº§n nhau vá» váº­t lÃ½** bÃªn trong **má»™t Availability Zone (AZ)** .
- Äiá»u nÃ y cho phÃ©p:
  - **Äá»™ trá»… máº¡ng tháº¥p**
  - **Tá»‘c Ä‘á»™ truyá»n dá»¯ liá»‡u giá»¯a cÃ¡c EC2 cao**
  - PhÃ¹ há»£p vá»›i á»©ng dá»¥ng **tightly-coupled** , nÆ¡i cÃ¡c mÃ¡y pháº£i thÆ°á»ng xuyÃªn trao Ä‘á»•i dá»¯ liá»‡u.

> ğŸ“Œ **HPC workloads luÃ´n Ä‘Æ°á»£c khuyáº¿n nghá»‹ triá»ƒn khai trong Cluster Placement Group** theo tÃ i liá»‡u chÃ­nh thá»©c cá»§a AWS.

---

## âŒ Giáº£i thÃ­ch cÃ¡c lá»±a chá»n sai:

### 3. ğŸš« **Partition Placement Group** :

- DÃ¹ng Ä‘á»ƒ tÃ¡ch nhÃ³m EC2 theo **partition logic riÃªng biá»‡t** , má»—i partition khÃ´ng dÃ¹ng chung pháº§n cá»©ng.
  partition cÃ³ thá»ƒ á»Ÿ cÃ¡c az khÃ¡c nhau,**Tá»‘i Ä‘a** : 7 partition má»—i AZ.
- Tá»‘t cho há»‡ thá»‘ng phÃ¢n tÃ¡n lá»›n nhÆ° **Hadoop, Cassandra, Kafka** .
- **KhÃ´ng táº­p trung cÃ¡c mÃ¡y gáº§n nhau** â†’ **khÃ´ng Ä‘áº£m báº£o Ä‘á»™ trá»… tháº¥p** â†’ **KhÃ´ng phÃ¹ há»£p cho HPC** .

---

### 4. ğŸš« **Spread Placement Group** :

- Má»—i EC2 Ä‘Æ°á»£c Ä‘áº·t trÃªn **racks khÃ¡c nhau** , **cÃ¡ch ly váº­t lÃ½** â†’ giáº£m nguy cÆ¡ **cÃ¡c lá»—i Ä‘á»“ng thá»i** (correlated failures).
  , SPG cÃ³ thá»ƒ á»Ÿ cÃ¡c az khÃ¡c nhau,You can have a maximum of seven running instances per Availability Zone per group. (nghÄ©a lÃ  7 instance trong 1 group á»Ÿ 1 az )
- PhÃ¹ há»£p cho workload **yÃªu cáº§u Ä‘á»™ sáºµn sÃ ng cao (HA)** , nhÆ°ng khÃ´ng yÃªu cáº§u truyá»n dá»¯ liá»‡u nhanh giá»¯a mÃ¡y.
- **KhÃ´ng tá»‘i Æ°u máº¡ng giá»¯a cÃ¡c mÃ¡y** â†’ **KhÃ´ng phÃ¹ há»£p HPC**

---

### 5. ğŸš« **Auto Scaling Group** :

- DÃ¹ng Ä‘á»ƒ tá»± Ä‘á»™ng **tÄƒng/giáº£m sá»‘ lÆ°á»£ng EC2** theo táº£i.
- Tá»‘t cho cÃ¡c á»©ng dá»¥ng **web / backend / microservices** , nÆ¡i cáº§n **má»Ÿ rá»™ng linh hoáº¡t** .
- NhÆ°ng HPC thÆ°á»ng **cá»‘ Ä‘á»‹nh sá»‘ lÆ°á»£ng node** , vÃ  yÃªu cáº§u **hiá»‡u nÄƒng máº¡ng cao** chá»© khÃ´ng pháº£i chá»‰ co giÃ£n â†’ **KhÃ´ng phÃ¹ há»£p HPC**

## ğŸ§© **1. Partition Placement Group (PPG)**

### âœ… Sá»± tháº­t:

- **Tá»‘i Ä‘a 7 partition / AZ** .
- **Má»—i partition** cÃ³ thá»ƒ chá»©a **nhiá»u EC2 instance** (khÃ´ng giá»›i háº¡n cá»¥ thá»ƒ).
- CÃ¡c EC2 trong **cÃ¹ng má»™t partition** cÃ³ thá»ƒ **dÃ¹ng chung pháº§n cá»©ng** .
- **CÃ¡c partition khÃ¡c nhau** thÃ¬ **khÃ´ng dÃ¹ng chung pháº§n cá»©ng** â†’ tÃ¡ch biá»‡t Ä‘á»ƒ trÃ¡nh "correlated failure".

### ğŸ“Œ TÃ³m láº¡i:

| ThÃ´ng sá»‘           | GiÃ¡ trá»‹                                 |
| ------------------ | --------------------------------------- |
| Sá»‘ partition / AZ  | Tá»‘i Ä‘a 7                                |
| Sá»‘ EC2 / partition | Gáº§n nhÆ°**khÃ´ng giá»›i háº¡n**               |
| Sá»‘ EC2 / AZ        | TÃ¹y sá»‘ EC2 báº¡n Ä‘áº·t trong tá»«ng partition |
| AZ khÃ¡c nhau?      | âœ… CÃ³ thá»ƒ triá»ƒn khai trÃªn nhiá»u AZ      |

---

## ğŸ§© **2. Spread Placement Group (SPG)**

### âœ… Sá»± tháº­t:

- **Má»—i EC2 instance** Ä‘Æ°á»£c Ä‘áº·t trÃªn **1 rack riÃªng biá»‡t** .
- **Tá»‘i Ä‘a 7 EC2 / AZ / má»—i Spread Placement Group** (trá»« khi xin tÄƒng quota).
- **Má»™t SPG cÃ³ thá»ƒ tráº£i rá»™ng nhiá»u AZ** , vÃ  má»—i AZ Ä‘Æ°á»£c **tá»‘i Ä‘a 7 EC2** .
- **Tá»•ng cá»™ng má»—i SPG cÃ³ thá»ƒ cÃ³: sá»‘ AZ Ã— 7 EC2 instance** (máº·c Ä‘á»‹nh).

### ğŸ“Œ TÃ³m láº¡i:

| ThÃ´ng sá»‘                            | GiÃ¡ trá»‹                               |
| ----------------------------------- | ------------------------------------- |
| Sá»‘ EC2 / AZ / SPG                   | **Tá»‘i Ä‘a 7**(má»—i cÃ¡i trÃªn rack riÃªng) |
| Tá»•ng EC2 / SPG                      | AZ Ã— 7                                |
| EC2 dÃ¹ng chung rack?                | âŒ KhÃ´ng                              |
| Triá»ƒn khai Ä‘a AZ?                   | âœ… CÃ³ thá»ƒ                             |
| Báº¡n cÃ³ thá»ƒ táº¡o bao nhiÃªu SPG tÃ¹y Ã½. |                                       |

---

### ğŸ§  **So sÃ¡nh : Cluster vs Partition vs Spread Placement Group**

| **TiÃªu chÃ­**                                    | **Cluster Placement Group**                                                                         | **Partition Placement Group**                                                                      | **Spread Placement Group**                                                                                  |
| ----------------------------------------------- | --------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------- |
| ğŸ’¡**KhÃ¡i niá»‡m cá»‘t lÃµi**                         | NhÃ³m cÃ¡c EC2 gáº§n nhau vá» váº­t lÃ½ Ä‘á»ƒ Ä‘áº¡t**hiá»‡u suáº¥t máº¡ng tá»‘i Ä‘a**                                     | NhÃ³m EC2 thÃ nh**cÃ¡c partition Ä‘á»™c láº­p pháº§n cá»©ngÂ **nháº±m**giáº£m rá»§i ro lan truyá»n lá»—i pháº§n cá»©ng**     | Má»—i EC2 náº±m**trÃªn má»™t rack riÃªng biá»‡t** , tá»‘i Ä‘a hÃ³a kháº£ nÄƒngÂ **cÃ¡ch ly lá»—i pháº§n cá»©ng**                     |
| ğŸ“Œ**MÃ´ hÃ¬nh triá»ƒn khai pháº§n cá»©ng**              | CÃ¡c EC2 náº±m**ráº¥t gáº§n nhau**(cÃ³ thá»ƒ cÃ¹ng rack hoáº·c lÃ¢n cáº­n trong AZ)                                 | Má»—i partition dÃ¹ng pháº§n cá»©ng riÃªng; cÃ¡c partition**khÃ´ng chia sáº» thiáº¿t bá»‹**                        | Má»—i EC2 náº±m trÃªn**má»™t rack khÃ¡c nhau**â†’ má»—i rack cÃ³ nguá»“n Ä‘iá»‡n, máº¡ng riÃªng biá»‡t                             |
| âš™ï¸**Kiáº¿n trÃºc phÃ¹ há»£p**                         | **Tightly-coupled systems**â€“ há»‡ thá»‘ng cáº§n truyá»n thÃ´ng liÃªn tá»¥c, tá»‘c Ä‘á»™ cao (HPC, AI, ML, MPI, CFD) | **Distributed systems**â€“ há»‡ thá»‘ng phÃ¢n tÃ¡n, cáº§n song song hÃ³a, vÃ­ dá»¥ Hadoop, Cassandra, Kafka      | **Critical systems**â€“ há»‡ thá»‘ng lÃµi khÃ´ng Ä‘Æ°á»£c phÃ©p cÃ¹ng há»ng, nhÆ° DB, quorum-based clusters, control planes |
| ğŸ”Œ**Hiá»‡u suáº¥t máº¡ng**                            | âœ…**Cao nháº¥t**â€“ bandwidth lá»›n, latency tháº¥p                                                         | âŒ KhÃ´ng Ä‘áº£m báº£o cao vÃ¬ cÃ³ thá»ƒ tráº£i qua nhiá»u AZ                                                   | âŒ KhÃ´ng Ä‘áº£m báº£o cao, vÃ¬ cÃ¡c EC2 phÃ¢n tÃ¡n váº­t lÃ½                                                            |
| ğŸ”’**TÃ¡ch biá»‡t lá»—i pháº§n cá»©ng (fault isolation)** | âŒ KhÃ´ng (cÃ¡c EC2 cÃ³ thá»ƒ cÃ¹ng rack)                                                                 | âœ… Theo nhÃ³m (partition cÃ¡ch ly nhau, nhÆ°ng cÃ¹ng partition váº«n cÃ³ thá»ƒ bá»‹ lá»—i chung)                | âœ… Tá»‘i Ä‘a â€“ má»—i EC2 náº±m rack khÃ¡c, gáº§n nhÆ° lá»—i pháº§n cá»©ng khÃ´ng bao giá» áº£nh hÆ°á»Ÿng Ä‘á»“ng thá»i 2 instance       |
| ğŸ§±**Kháº£ nÄƒng chá»‹u lá»—i (resilience)**            | Tháº¥p â€“ náº¿u rack lá»—i cÃ³ thá»ƒ áº£nh hÆ°á»Ÿng cáº£ nhÃ³m                                                        | Trung bÃ¬nh â€“ lá»—i chá»‰ áº£nh hÆ°á»Ÿng 1 partition                                                         | Cao â€“ lá»—i chá»‰ áº£nh hÆ°á»Ÿng 1 EC2, cÃ¡c EC2 cÃ²n láº¡i váº«n hoáº¡t Ä‘á»™ng                                                |
| ğŸ“š**Kháº£ nÄƒng má»Ÿ rá»™ng (scalability)**            | Háº¡n cháº¿ â€“ cÃ ng nhiá»u EC2 cÃ ng khÃ³ giá»¯ gáº§n nhau                                                      | Ráº¥t tá»‘t â€“ cÃ³ thá»ƒ má»Ÿ rá»™ng dá»… dÃ ng báº±ng thÃªm partition hoáº·c AZ khÃ¡c                                  | KÃ©m â€“ bá»‹ giá»›i háº¡n 7 EC2 / AZ / SPG máº·c Ä‘á»‹nh                                                                 |
| ğŸ”**Auto Scaling phÃ¹ há»£p khÃ´ng?**               | KhÃ´ng phÃ¹ há»£p láº¯m vÃ¬ phá»¥ thuá»™c vÃ o kháº£ nÄƒng gÃ³i cá»¥m                                                 | âœ… PhÃ¹ há»£p vá»›i workload phÃ¢n tÃ¡n má»Ÿ rá»™ng tá»± nhiÃªn                                                  | âŒ KhÃ´ng khuyáº¿n khÃ­ch â€“ dá»… vÆ°á»£t giá»›i háº¡n instance                                                           |
| ğŸŒ**Multi-AZ há»— trá»£?**                          | âŒ KhÃ´ng â€“ chá»‰ Ä‘Æ°á»£c trong**1 AZ duy nháº¥t**                                                          | âœ… CÃ³ thá»ƒ tráº£i rá»™ng**nhiá»u AZ**                                                                    | âœ… CÃ³ thá»ƒ tráº£i rá»™ng**nhiá»u AZ**                                                                             |
| ğŸ§®**Sá»‘ lÆ°á»£ng pháº§n tá»­ / giá»›i háº¡n máº·c Ä‘á»‹nh**      | KhÃ´ng giá»›i háº¡n cá»¥ thá»ƒ, nhÆ°ng khÃ³ Ä‘áº¡t hiá»‡u quáº£ khi nhiá»u EC2                                         | Tá»‘i Ä‘a 7 partition / AZ, má»—i partition chá»©a**nhiá»u EC2**                                           | Tá»‘i Ä‘a 7 EC2 / AZ / SPG (máº·c Ä‘á»‹nh)                                                                          |
| ğŸ§­**CÃ¡ch Ä‘iá»u phá»‘i pháº§n cá»©ng cá»§a AWS**          | GÃ¡n EC2 vÃ o vÃ¹ng pháº§n cá»©ng cá»±c gáº§n (low-latency fabric)                                             | Má»—i partition Ä‘Æ°á»£c Ä‘áº·t trÃªn cá»¥m pháº§n cá»©ng riÃªng, khÃ´ng dÃ¹ng chung network/power vá»›i partition khÃ¡c | Má»—i EC2 Ã©p buá»™c vÃ o rack váº­t lÃ½ riÃªng â€“ má»—i rack cÃ³ power/network riÃªng                                     |

Giá»›i háº¡n máº·c Ä‘á»‹nh trÃªn má»—i Region 100 cho cáº£ 3 loáº¡i

### ğŸ§ª **Khi nÃ o dÃ¹ng loáº¡i nÃ o?**

| TÃ¬nh huá»‘ng                                                                         | Loáº¡i nÃªn dÃ¹ng       |
| ---------------------------------------------------------------------------------- | ------------------- |
| Cáº§n tÃ­nh toÃ¡n hiá»‡u nÄƒng cao (AI/ML/HPC) â€“ giao tiáº¿p nhanh giá»¯a EC2                 | Cluster Placement   |
| Xá»­ lÃ½ Big Data phÃ¢n tÃ¡n, nhiá»u node, tÃ­nh song song cao (Kafka, Hadoop, Cassandra) | Partition Placement |
| Há»‡ thá»‘ng quan trá»ng, khÃ´ng Ä‘Æ°á»£c lá»—i cÃ¹ng lÃºc (DB, master node, quorum, etcd...)    | Spread Placement    |
