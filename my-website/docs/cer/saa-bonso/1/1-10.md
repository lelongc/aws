# **1.Tổng quan về Auto Scaling Group (Nhóm Tự động điều chỉnh quy mô):**

- Một Auto Scaling Group chứa một tập hợp các phiên bản Amazon EC2.
- Các phiên bản này được coi là một nhóm logic để phục vụ mục đích tự động điều chỉnh quy mô và quản lý.
- Auto Scaling Group cho phép bạn sử dụng các tính năng của Amazon EC2 Auto Scaling như:
  - **Thay thế phiên bản không khỏe (health check replacements):** Tự động thay thế các phiên bản EC2 bị lỗi.
  - **Chính sách điều chỉnh quy mô (scaling policies):** Tự động thay đổi số lượng phiên bản dựa trên các điều kiện.
- **Chức năng cốt lõi** của dịch vụ EC2 Auto Scaling là:
  - Duy trì số lượng phiên bản trong một Auto Scaling Group theo mong muốn.
  - Tự động điều chỉnh quy mô (tăng/giảm số lượng phiên bản).
- Kích thước của một Auto Scaling Group phụ thuộc vào **Số lượng phiên bản mong muốn (Desired capacity)** mà bạn thiết lập.
- Bạn có thể điều chỉnh kích thước nhóm để đáp ứng nhu cầu, bằng cách **thủ công** hoặc sử dụng **tự động điều chỉnh quy mô**.

**Các Tùy chọn Điều chỉnh Quy mô Động (Dynamic Scaling Options):**

Đoạn văn đề cập đến hai loại chính sách điều chỉnh quy mô động:

1. **Chính sách Điều chỉnh Quy mô theo Bước (Step Scaling Policies):**
2. **Chính sách Điều chỉnh Quy mô Đơn giản (Simple Scaling Policies):**

- **Điểm giống nhau:**
  - Cả hai đều yêu cầu bạn tạo **Báo động CloudWatch (CloudWatch alarms)** để kích hoạt chính sách.
  - Cả hai đều yêu cầu bạn chỉ định **ngưỡng cao và thấp** cho các báo động.
  - Cả hai đều yêu cầu bạn xác định liệu sẽ **thêm hoặc bớt** bao nhiêu phiên bản, hoặc đặt kích thước nhóm về một con số **chính xác**.
- **Điểm khác biệt chính:** Chính sách theo bước (Step Scaling) sử dụng các "điều chỉnh theo bước" (step adjustments). Khi các điều chỉnh theo bước được áp dụng, chúng làm tăng hoặc giảm số lượng phiên bản hiện tại của nhóm. **Các điều chỉnh này thay đổi dựa trên mức độ vượt ngưỡng của báo động (size of the alarm breach).** Nghĩa là, nếu báo động vượt ngưỡng nhiều hơn, sự điều chỉnh theo bước có thể lớn hơn.

**Vấn đề của Chính sách Điều chỉnh Quy mô Đơn giản (Simple Scaling):**

- Vấn đề chính của Simple Scaling là **sau khi một hoạt động điều chỉnh quy mô được bắt đầu, chính sách phải đợi cho hoạt động đó (hoặc việc thay thế phiên bản không khỏe) hoàn thành VÀ thời gian chờ làm mát (cooldown period) kết thúc** trước khi phản hồi các báo động tiếp theo.
- **Thời gian chờ làm mát (Cooldown period):** Giúp ngăn chặn việc bắt đầu các hoạt động điều chỉnh quy mô bổ sung trước khi các hiệu ứng của hoạt động trước đó kịp hiển thị và ổn định. Điều này tránh việc nhóm liên tục tăng/giảm không kiểm soát.

**Chính sách Điều chỉnh Quy mô theo Mục tiêu (Target Tracking Scaling Policy):**

- Với chính sách này, bạn có thể tăng hoặc giảm số lượng phiên bản hiện tại của nhóm dựa trên **giá trị mục tiêu (target value)** cho một **chỉ số (metric)** cụ thể (ví dụ: giữ mức sử dụng CPU trung bình ở mức 60%).
- Chính sách này giúp giải quyết vấn đề **cấp phát dư thừa tài nguyên (over-provisioning)**, tối ưu hóa chi phí.
- Chính sách sẽ tự động thêm hoặc bớt phiên bản khi cần thiết để giữ cho chỉ số ở mức, hoặc **gần mức, giá trị mục tiêu** đã chỉ định.
- Ngoài việc giữ chỉ số gần mục tiêu, chính sách Target Tracking còn tự điều chỉnh theo **sự thay đổi của chỉ số do mô hình tải thay đổi**. Nghĩa là nó phản ứng linh hoạt với sự biến động của lưu lượng truy cập.

**Kết luận\: Sử dụng chính sách điều chỉnh quy mô theo mục tiêu (Target Tracking scaling).**

**Giải thích tại sao các tùy chọn khác không phải là đáp án đúng (dựa trên đoạn văn):**

- **Sử dụng Simple scaling là không đúng:** Bởi vì bạn cần phải đợi thời gian chờ làm mát (cooldown period) hoàn thành trước khi bắt đầu các hoạt động điều chỉnh quy mô bổ sung. Chính sách Target tracking hoặc Step scaling có thể kích hoạt một hoạt động điều chỉnh quy mô ngay lập tức mà không cần đợi thời gian chờ làm mát kết thúc ([đoạn văn ngụ ý vậy, mặc dù Step scaling cũng có cơ chế xử lý cooldown phức tạp hơn Simple scaling](./ngoài-lề/step-scaling-cooldown.md)).
- **Sử dụng Scheduled scaling là không đúng:** Bởi vì chính sách này chủ yếu được sử dụng cho các **mô hình lưu lượng truy cập có thể dự đoán (predictable traffic patterns)** (ví dụ: tăng quy mô vào 8 giờ sáng thứ Hai hàng tuần). Bạn cần sử dụng chính sách Target tracking scaling để tối ưu hóa chi phí cơ sở hạ tầng mà không ảnh hưởng đến hiệu suất khi tải **không thể đoán trước** hoặc thay đổi liên tục.
- **Sử dụng Suspend and resume scaling là không đúng:** Bởi vì loại này được sử dụng để **tạm thời tạm dừng** các hoạt động điều chỉnh quy mô được kích hoạt bởi các chính sách (scaling policies) hoặc các hành động theo lịch trình (scheduled actions) của bạn, chứ không phải là một chính sách để tự động điều chỉnh quy mô theo tải.

Tóm lại, mặc dù Simple và Step scaling đều dựa trên báo động, Simple scaling có nhược điểm là phải đợi cooldown. Target Tracking là lựa chọn tốt hơn để tự động điều chỉnh quy mô một cách linh hoạt, giữ chỉ số mục tiêu và tối ưu chi phí cho tải lượng thay đổi, không thể đoán trước, khác với Scheduled scaling chỉ dùng cho tải lượng có thể dự đoán. "Suspend and resume" không phải là một chính sách điều chỉnh quy mô theo tải. Do đó, trong ngữ cảnh cần tối ưu chi phí và hiệu suất theo tải thay đổi, Target Tracking scaling được đề xuất là giải pháp đúng.
