### Giáº£ng viÃªn hÆ°á»›ng dáº«n: NgÃ´ Há»¯u DÅ©ng
### Lá»›p HP: DHHTTT19A   MÃ£ HP: 420300100403    
### LÃª ThÃ nh Long-23630851

## **BÃ€I LAB: DEMO Báº¢O Máº¬T S3 + IAM + KMS**

## **Má»¤C TIÃŠU**
- Táº¡o 1 S3 bucket Ä‘á»ƒ lÆ°u file
- Táº¡o 2 user vá»›i quyá»n khÃ¡c nhau: **Admin** vÃ  **ReadOnly**  
- Demo mÃ£ hÃ³a file vá»›i KMS
- Chá»©ng minh phÃ¢n quyá»n hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o

## **CHUáº¨N Bá»Š**
- TÃ i khoáº£n AWS (cÃ³ thá»ƒ dÃ¹ng Free Tier)
- TrÃ¬nh duyá»‡t web
- KhÃ´ng cáº§n cÃ i Ä‘áº·t gÃ¬ thÃªm

---

## **BÆ¯á»šC 1: Táº O S3 BUCKET**

1. ÄÄƒng nháº­p AWS Console â†’ tÃ¬m **S3** <img width="1355" height="648" alt="image" src="https://github.com/user-attachments/assets/d07e725d-1659-4ed6-9c03-b418a1139d66" />
2. **Region**: Chá»n  `us-east-1`  <img width="621" height="616" alt="image" src="https://github.com/user-attachments/assets/aea8a995-d364-40fc-8260-ff3c779b1795" />

3. Click **"Create bucket"** <img width="1363" height="664" alt="image" src="https://github.com/user-attachments/assets/6235e6fc-57b8-4aae-8326-b8078bfd5db0" />

4. **Bucket name**: `lelong-security-demo-20251119` (thay `lelong` báº±ng tÃªn báº¡n) <img width="1352" height="615" alt="image" src="https://github.com/user-attachments/assets/9fc3718e-da03-4576-9ac8-e7e452084af1" />


5. Giá»¯ nguyÃªn cÃ¡c setting khÃ¡c â†’ **Create bucket** 

<img width="1362" height="598" alt="image" src="https://github.com/user-attachments/assets/8d45b10f-afab-41f0-a0b8-356ec74e16b7" />


---

## **BÆ¯á»šC 2: Táº O KMS KEY**

1. TÃ¬m service **Key Management Service (KMS)** <img width="1353" height="642" alt="image" src="https://github.com/user-attachments/assets/e3298b25-faf9-474a-b923-0c1be53b031f" />

2. Click **"Create key"** <img width="1341" height="606" alt="image" src="https://github.com/user-attachments/assets/ec32a80d-45d9-453c-94e8-42aabbf2ea34" />

3. **Key type**: `Symmetric` â†’ **Next**  <img width="1355" height="627" alt="image" src="https://github.com/user-attachments/assets/ced8d6b5-950f-46fe-91f8-b7c47e7d21cd" />

4. **Alias**: `demo-encryption-key` â†’ **Next** 
5. **Key administrators**: bá» qua -> Next
6. **Key users**: bá» qua -> Next
7. **Create key** <img width="1352" height="564" alt="image" src="https://github.com/user-attachments/assets/7c1a3263-5042-42a7-a34d-46d9876e3526" />

8. VÃ o key vá»«a táº¡o, **copy ARN** (dáº¡ng: `arn:aws:kms:us-east-1:123456789:key/abc-def`) <img width="1361" height="535" alt="image" src="https://github.com/user-attachments/assets/2e3abd4e-a6fb-40a6-98f3-76c9a3bc571b" />



---

## **BÆ¯á»šC 3: Táº O IAM USERS**

### Táº¡o User Admin:
1. TÃ¬m service **IAM** â†’ **Users** â†’ **Create user** <img width="1392" height="620" alt="image" src="https://github.com/user-attachments/assets/b39e6a22-9f0a-4763-94a6-a0c140856bdc" />

2. **Username**: `demo-admin` <img width="1353" height="565" alt="image" src="https://github.com/user-attachments/assets/7bc8a577-fe03-4d06-8713-cc472fbd3de5" />

3. **Next** â†’ **Attach policies directly**  
4. TÃ¬m vÃ  tick: `AmazonS3FullAccess` <img width="1342" height="540" alt="image" src="https://github.com/user-attachments/assets/2215d5d3-3444-4413-b88f-343abfb7606e" />

5. **Next** â†’ **Create user**

### Táº¡o User ReadOnly:
1. **Create user** tiáº¿p
2. **Username**: `demo-readonly`  
3. **Next** â†’ **Attach policies directly**
4. TÃ¬m vÃ  tick: `AmazonS3ReadOnlyAccess`
5. **Next** â†’ **Create user**

<img width="1366" height="593" alt="image" src="https://github.com/user-attachments/assets/2bee7167-0bd4-4b9a-9cc3-5726de361307" />


---

## **BÆ¯á»šC 4: Táº O ACCESS KEYS**

### Cho demo-admin:
1. Click vÃ o user `demo-admin` 
2. Tab **"Security credentials"**  <img width="1352" height="627" alt="image" src="https://github.com/user-attachments/assets/60a9eba3-0be2-4f10-908b-d96607b6620e" />

3. **Create access key** â†’ chá»n **"Command Line Interface"** <img width="1352" height="627" alt="image" src="https://github.com/user-attachments/assets/13d66d01-246f-468f-a736-73298b12b7cf" />
<img width="1070" height="501" alt="image" src="https://github.com/user-attachments/assets/f041a029-cb93-45fe-97af-44d427b04788" />

4. Tick xÃ¡c nháº­n â†’ **Next** â†’ **Create access key** <img width="1342" height="615" alt="image" src="https://github.com/user-attachments/assets/913b2a1e-538a-42c1-9216-751948662b52" />

5. **LÆ°u Láº I** Access Key ID vÃ  Secret Key <img width="1353" height="541" alt="image" src="https://github.com/user-attachments/assets/c6989471-1c8a-4f97-baee-ec8fe591277d" />


### Cho demo-readonly:
- LÃ m tÆ°Æ¡ng tá»± cho user `demo-readonly`


## Sá»­a KMS Key Policy (KHUYÃŠN DÃ™NG)

1. VÃ o **KMS Console** â†’ **Customer managed keys**
2. Click vÃ o key `demo-encryption-key`
3. Tab **Key policy** â†’ Click **Edit** <img width="1313" height="479" alt="image" src="https://github.com/user-attachments/assets/53a6c620-e689-4327-a2b8-5b897b2b30a9" />

4. TÃ¬m pháº§n cÃ³ `"Sid": "Allow use of the key"` (náº¿u chÆ°a cÃ³ thÃ¬ thÃªm vÃ o)
5. Sá»­a thÃ nh nhÆ° sau (thay `026090510378` báº±ng Account ID cá»§a báº¡n):

```json
{
	"Version": "2012-10-17",
	"Id": "key-consolepolicy-3",
	"Statement": [
		{
			"Sid": "Enable IAM User Permissions",
			"Effect": "Allow",
			"Principal": {
				"AWS": "arn:aws:iam::026090510378:root"
			},
			"Action": "kms:*",
			"Resource": "*"
		},
		{
			"Sid": "Allow use of the key for demo-admin",
			"Effect": "Allow",
			"Principal": {
				"AWS": "arn:aws:iam::026090510378:user/demo-admin"
			},
			"Action": [
				"kms:Decrypt",
				"kms:GenerateDataKey",
				"kms:DescribeKey"
			],
			"Resource": "*"
		},
		{
			"Sid": "Allow use of the key for demo-readonly",
			"Effect": "Allow",
			"Principal": {
				"AWS": "arn:aws:iam::026090510378:user/demo-readonly"
			},
			"Action": [
				"kms:Decrypt",
				"kms:DescribeKey"
			],
			"Resource": "*"
		}
	]
}
```

6. **Save changes**

---

## **BÆ¯á»šC 5: TEST Báº°NG AWS CLOUDSHELL**

AWS CloudShell lÃ  terminal online, khÃ´ng cáº§n cÃ i Ä‘áº·t gÃ¬!

1. á» gÃ³c trÃªn cÃ¹ng AWS Console, click icon **CloudShell** (hÃ¬nh terminal) <img width="1146" height="171" alt="image" src="https://github.com/user-attachments/assets/e1bbbd51-445b-45bc-8f8f-38d8634a396b" />

2. Äá»£i 0.5 phÃºt Ä‘á»ƒ CloudShell khá»Ÿi Ä‘á»™ng , thÃªm 1 tab Ä‘á»ƒ demo 2 user cÃ¹ng lÃºc <img width="1356" height="629" alt="image" src="https://github.com/user-attachments/assets/3994cd96-68e4-438a-9e5d-d23006fb3471" />


### Config profile cho demo-admin:
```bash
aws configure set aws_access_key_id YOUR_ADMIN_ACCESS_KEY --profile admin
aws configure set aws_secret_access_key YOUR_ADMIN_SECRET_KEY --profile admin  
aws configure set region us-east-1 --profile admin
```

### Config profile cho demo-readonly:
```bash
aws configure set aws_access_key_id YOUR_READONLY_ACCESS_KEY --profile readonly
aws configure set aws_secret_access_key YOUR_READONLY_SECRET_KEY --profile readonly
aws configure set region us-east-1 --profile readonly
```
### cháº¡y kiá»ƒm tra Ä‘á»§ user chÆ°a   
`aws configure list-profiles`

<img width="854" height="120" alt="image" src="https://github.com/user-attachments/assets/c8a01c79-0348-4504-b88d-371df1352d83" />
<img width="1087" height="320" alt="image" src="https://github.com/user-attachments/assets/83274383-edf5-4f39-925a-75abdcbff03a" />


---

## **BÆ¯á»šC 6: DEMO QUYá»€N ADMIN**

### Táº¡o file test:
```bash
echo "Long muá»‘n cÃ³ viá»‡c" > secret-file.txt
```

### Upload file KHÃ”NG mÃ£ hÃ³a: 
```bash
aws s3 cp secret-file.txt s3://lelong-security-demo-20251119/normal-file.txt --profile admin
```
<img width="834" height="241" alt="image" src="https://github.com/user-attachments/assets/9cb77c29-c785-4d65-b964-6fcf94e17f57" />

### Upload file CÃ“ mÃ£ hÃ³a KMS: 

```bash  
aws s3 cp secret-file.txt s3://lelong-security-demo-20251119/encrypted-file.txt --profile admin --sse aws:kms --sse-kms-key-id alias/demo-encryption-key
```
<img width="1218" height="219" alt="image" src="https://github.com/user-attachments/assets/c41ae7c9-b192-47f0-9a8c-5b9383df57bb" />

### Xem káº¿t quáº£:
```bash
aws s3 ls s3://lelong-security-demo-20251119/ --profile admin
```
<img width="1092" height="95" alt="image" src="https://github.com/user-attachments/assets/18a46279-4aee-4e80-aea3-9e8633003ea5" />


---

## **BÆ¯á»šC 7: KIá»‚M TRA MÃƒ HÃ“A TRÃŠN S3 CONSOLE**

1. Quay láº¡i S3 Console â†’ vÃ o bucket cá»§a báº¡n 
2. Click vÃ o file `encrypted-file.txt` <img width="1358" height="581" alt="image" src="https://github.com/user-attachments/assets/9860ee35-77f0-4c6a-99db-cbf1b7d9dd1f" />
3. Xem tab **"Properties"** 
4. KÃ©o xuá»‘ng pháº§n **"Server-side encryption"**
5. Sáº½ tháº¥y: `AWS-KMS` vÃ  key `demo-encryption-key`


<img width="1366" height="609" alt="image" src="https://github.com/user-attachments/assets/6d95aedd-3b7f-406a-b984-c099739e41b6" /> 
<img width="1364" height="552" alt="image" src="https://github.com/user-attachments/assets/a12cf7bf-b3e7-4bd4-ba8f-f7a34f656761" />


---

## **BÆ¯á»šC 8: DEMO QUYá»€N READONLY**

Quay láº¡i CloudShell:

### Thá»­ upload (sáº½ THáº¤T Báº I):
```bash
echo "Readonly khong duoc upload" > test.txt
aws s3 cp test.txt s3://lelong-security-demo-20251119/test.txt --profile readonly
```
<img width="977" height="111" alt="image" src="https://github.com/user-attachments/assets/4012d2e7-ed78-4780-8655-0f4581858392" />
<img width="1322" height="105" alt="image" src="https://github.com/user-attachments/assets/118b6722-3764-470c-9185-84c12bbfefe2" />

**Káº¿t quáº£**: `AccessDenied` error

### Thá»­ download (sáº½ THÃ€NH CÃ”NG):
```bash
aws s3 cp s3://lelong-security-demo-20251119/normal-file.txt downloaded-normal.txt --profile readonly
aws s3 cp s3://lelong-security-demo-20251119/encrypted-file.txt downloaded-encrypted.txt --profile readonly
```
<img width="854" height="145" alt="image" src="https://github.com/user-attachments/assets/fcb62f5f-3812-4af1-bede-160014cf3c6b" />
<img width="849" height="93" alt="image" src="https://github.com/user-attachments/assets/5416fd20-e927-4663-b4ef-a70b0b45dbbc" />


### Thá»­ xÃ³a (sáº½ THáº¤T Báº I):
```bash
aws s3 rm s3://lelong-security-demo-20251119/normal-file.txt --profile readonly
```
<img width="1360" height="154" alt="image" src="https://github.com/user-attachments/assets/420c201a-e6fb-49f5-b9f6-cf6b4f3acb05" />

**Káº¿t quáº£**: `AccessDenied` error


### Xem ná»™i dung file Ä‘Ã£ download:
```bash
cat downloaded-normal.txt
cat downloaded-encrypted.txt  
```

> Ná»™i dung file sau khi download vÃ  decrypt thÃ nh cÃ´ng
<img width="337" height="76" alt="image" src="https://github.com/user-attachments/assets/82881143-a3b5-49b9-b98e-be34ba787675" />


---

## **BÆ¯á»šC 9: SO SÃNH FILE Gá»C VÃ€ FILE GIáº¢I MÃƒ**

```bash
echo "=== File gá»‘c ==="
cat secret-file.txt

echo "=== File download khÃ´ng mÃ£ hÃ³a ==="  
cat downloaded-normal.txt

echo "=== File download cÃ³ mÃ£ hÃ³a (Ä‘Ã£ tá»± Ä‘á»™ng giáº£i mÃ£) ==="
cat downloaded-encrypted.txt

echo "=== So sÃ¡nh MD5 hash ==="
md5sum secret-file.txt downloaded-encrypted.txt
```

<img width="593" height="340" alt="image" src="https://github.com/user-attachments/assets/cbde1fef-2bff-4c63-8f57-3a97881ea0bc" />


---


## **Káº¾T QUáº¢ DEMO**

BÃ i lab nÃ y Ä‘Ã£ chá»©ng minh:
âœ… **PhÃ¢n quyá»n hoáº¡t Ä‘á»™ng**: Admin lÃ m Ä‘Æ°á»£c má»i thá»©, ReadOnly bá»‹ cháº·n upload/delete  
âœ… **MÃ£ hÃ³a tá»± Ä‘á»™ng**: File Ä‘Æ°á»£c mÃ£ hÃ³a vÃ  giáº£i mÃ£ trong suá»‘t  
âœ… **TÃ­nh toÃ n váº¹n**: Hash cá»§a file gá»‘c = hash cá»§a file giáº£i mÃ£  
âœ… **Báº£o máº­t**: Chá»‰ user cÃ³ quyá»n má»›i truy cáº­p Ä‘Æ°á»£c KMS key  

## **Dá»ŒN Dáº¸P**
1. S3: Empty bucket â†’ Delete bucket
2. IAM: Delete 2 users  
3. KMS: Schedule key deletion (7 ngÃ y)



---

# **PHáº¦N GIáº¢I THÃCH LÃ THUYáº¾T AN TOÃ€N THÃ”NG TIN**

---

## **1. CHá»¨NG THá»°C (Authentication) - "Chá»©ng minh báº¡n lÃ  ai"**

### ğŸ  **VÃ­ dá»¥ Ä‘á»i thÆ°á»ng:**
- Giá»‘ng nhÆ° khi báº¡n vÃ o cá»•ng trÆ°á»ng, báº¡n pháº£i Ä‘Æ°a **tháº» sinh viÃªn** Ä‘á»ƒ báº£o vá»‡ biáº¿t báº¡n lÃ  ai.
- **Tháº» sinh viÃªn = Giáº¥y chá»©ng minh báº¡n lÃ  sinh viÃªn tháº­t**, khÃ´ng pháº£i ngÆ°á»i láº¡.

### ğŸ’» **Trong bÃ i lab:**
- **Access Key ID** = TÃªn Ä‘Äƒng nháº­p (cÃ´ng khai, nhÆ° MSSV)
- **Secret Access Key** = Máº­t kháº©u (bÃ­ máº­t, nhÆ° chá»¯ kÃ½ cá»§a báº¡n)

### ğŸ” **CÃ¡ch hoáº¡t Ä‘á»™ng:**
Khi báº¡n cháº¡y lá»‡nh:
```bash
aws s3 cp secret-file.txt s3://bucket/ --profile admin
```

**Äiá»u gÃ¬ xáº£y ra?**
1. AWS CLI láº¥y **Secret Access Key** cá»§a báº¡n
2. Táº¡o má»™t **chá»¯ kÃ½ Ä‘iá»‡n tá»­** cho cÃ¢u lá»‡nh nÃ y (dÃ¹ng thuáº­t toÃ¡n HMAC-SHA256)
3. Gá»­i kÃ¨m chá»¯ kÃ½ lÃªn server AWS
4. AWS kiá»ƒm tra: "Chá»¯ kÃ½ nÃ y cÃ³ khá»›p vá»›i Access Key ID khÃ´ng?"
5. âœ… Náº¿u Ä‘Ãºng â†’ "OK, báº¡n lÃ  demo-admin tháº­t"
6. âŒ Náº¿u sai â†’ Lá»—i `InvalidAccessKeyId` 

### ğŸ“¸ **Báº±ng chá»©ng trong lab:**
- Khi báº¡n dÃ¹ng sai Access Key â†’ Lá»—i ngay láº­p tá»©c
- Khi Ä‘Ãºng â†’ Lá»‡nh cháº¡y thÃ nh cÃ´ng

---

## **2. PHÃ‚N QUYá»€N (Authorization) - "Báº¡n Ä‘Æ°á»£c phÃ©p lÃ m gÃ¬"**

### ğŸ  **VÃ­ dá»¥ Ä‘á»i thÆ°á»ng:**
Sau khi vÃ o trÆ°á»ng, **tháº» sinh viÃªn** quyáº¿t Ä‘á»‹nh báº¡n vÃ o Ä‘Æ°á»£c Ä‘Ã¢u:
- **Sinh viÃªn thÆ°á»ng**: VÃ o thÆ° viá»‡n, lá»›p há»c (chá»‰ Ä‘á»c sÃ¡ch, nghe giáº£ng)
- **GiÃ¡o viÃªn**: VÃ o phÃ²ng mÃ¡y chá»§, sá»­a Ä‘iá»ƒm (lÃ m Ä‘Æ°á»£c nhiá»u hÆ¡n)
- **Báº£o vá»‡**: KhÃ´ng cho vÃ o khu vá»±c cáº¥m

### ğŸ’» **Trong bÃ i lab:**

| User | Policy gáº¯n | Quyá»n thá»±c táº¿ |
|------|-----------|---------------|
| **demo-admin** | `S3FullAccess` | Upload âœ… / Download âœ… / Delete âœ… |
| **demo-readonly** | `S3ReadOnlyAccess` | Upload âŒ / Download âœ… / Delete âŒ |

### ğŸ” **CÃ¡ch hoáº¡t Ä‘á»™ng:**

**Khi demo-readonly thá»­ upload:**
```bash
aws s3 cp test.txt s3://bucket/ --profile readonly
```

**Äiá»u gÃ¬ xáº£y ra?**
1. AWS Ä‘Ã£ chá»©ng thá»±c: "OK, báº¡n lÃ  demo-readonly" âœ…
2. AWS kiá»ƒm tra policy: "Hmm, demo-readonly cÃ³ quyá»n `s3:PutObject` khÃ´ng?"
3. Tra trong policy `S3ReadOnlyAccess` â†’ **KHÃ”NG CÃ“**
4. âŒ Tráº£ vá» lá»—i: `AccessDenied`

**Khi demo-readonly thá»­ download:**
```bash
aws s3 cp s3://bucket/file.txt local.txt --profile readonly  
```

1. AWS chá»©ng thá»±c: "OK, báº¡n lÃ  demo-readonly" âœ…
2. Kiá»ƒm tra policy: "demo-readonly cÃ³ quyá»n `s3:GetObject` khÃ´ng?"
3. Tra trong policy â†’ **CÃ“** âœ…
4. âœ… Download thÃ nh cÃ´ng!

### ğŸ“Š **NguyÃªn táº¯c quan trá»ng:**
**Principle of Least Privilege** (Äáº·c quyá»n tá»‘i thiá»ƒu):
- Chá»‰ cáº¥p Ä‘Ãºng quyá»n cáº§n thiáº¿t, khÃ´ng cho thá»«a
- Giá»‘ng nhÆ°: NhÃ¢n viÃªn bÃ¡n hÃ ng khÃ´ng cáº§n quyá»n truy cáº­p kÃ©t sáº¯t

---

## **3. MÃƒ HÃ“A Äá»I Xá»¨NG (Symmetric Encryption) - "KhÃ³a bÃ­ máº­t chung"**

### ğŸ  **VÃ­ dá»¥ Ä‘á»i thÆ°á»ng:**
Báº¡n vÃ  báº¡n thÃ¢n cÃ³ chung má»™t **chiáº¿c chÃ¬a khÃ³a** Ä‘á»ƒ má»Ÿ cÃ¹ng má»™t cÃ¡i kÃ©t:
- Báº¡n dÃ¹ng chÃ¬a khÃ³a nÃ y **KHÃ“A kÃ©t** â†’ Bá» tiá»n vÃ o
- Báº¡n thÃ¢n dÃ¹ng chÃ¬a khÃ³a nÃ y **Má» kÃ©t** â†’ Láº¥y tiá»n ra
- **CÃ¹ng 1 chÃ¬a khÃ³a** Ä‘á»ƒ khÃ³a vÃ  má»Ÿ

### ğŸ’» **Trong bÃ i lab:**

Khi báº¡n upload file vá»›i KMS:
```bash
aws s3 cp secret-file.txt s3://bucket/encrypted-file.txt --sse aws:kms
```

**Äiá»u gÃ¬ xáº£y ra? (Envelope Encryption)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. File gá»‘c: "Day la file bi mat"     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. AWS KMS táº¡o Data Key (256 bit)     â”‚
â”‚     VÃ­ dá»¥: "X7k9mP2nQ8..."             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. DÃ¹ng Data Key mÃ£ hÃ³a file          â”‚
â”‚     Thuáº­t toÃ¡n: AES-256                 â”‚
â”‚     Káº¿t quáº£: "A8x@#mKp9L..."          â”‚
â”‚     (File Ä‘Ã£ mÃ£ hÃ³a)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. DÃ¹ng KMS Master Key mÃ£ hÃ³a Data Keyâ”‚
â”‚     Data Key mÃ£ hÃ³a: "9Lp#x@A8..."     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. LÆ°u lÃªn S3:                         â”‚
â”‚     - File Ä‘Ã£ mÃ£ hÃ³a                    â”‚
â”‚     - Data Key Ä‘Ã£ mÃ£ hÃ³a (kÃ¨m theo)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Khi download vá»:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. Download file mÃ£ hÃ³a + Data Key     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. Gá»­i Data Key Ä‘Ã£ mÃ£ hÃ³a cho KMS      â”‚
â”‚     YÃªu cáº§u: "Giáº£i mÃ£ Data Key giÃ¹m tÃ´i"â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. KMS kiá»ƒm tra quyá»n:                 â”‚
â”‚     "User nÃ y cÃ³ quyá»n kms:Decrypt?"    â”‚
â”‚     âœ… demo-admin: CÃ“                   â”‚
â”‚     âœ… demo-readonly: CÃ“ (Ä‘Ã£ cáº¥p)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. KMS tráº£ vá» Data Key Ä‘Ã£ giáº£i mÃ£      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. DÃ¹ng Data Key giáº£i mÃ£ file          â”‚
â”‚     Káº¿t quáº£: "Day la file bi mat"      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”‘ **Táº¡i sao dÃ¹ng 2 lá»›p mÃ£ hÃ³a?**
- **MÃ£ hÃ³a file trá»±c tiáº¿p báº±ng Master Key** â†’ Cháº­m, nguy hiá»ƒm
- **MÃ£ hÃ³a báº±ng Data Key â†’ Nhanh**
- **Data Key Ä‘Æ°á»£c báº£o vá»‡ bá»Ÿi Master Key** â†’ An toÃ n

### ğŸ“Š **Thuáº­t toÃ¡n AES-256:**
- **AES** = Advanced Encryption Standard
- **256** = Äá»™ dÃ i khÃ³a 256 bit
- ÄÆ°á»£c chÃ­nh phá»§ Má»¹ dÃ¹ng Ä‘á»ƒ mÃ£ hÃ³a tÃ i liá»‡u máº­t
- Náº¿u dÃ¹ng siÃªu mÃ¡y tÃ­nh thá»­ háº¿t tá»• há»£p â†’ Máº¥t **hÃ ng tá»· nÄƒm** má»›i báº» khÃ³a Ä‘Æ°á»£c

---

## **4. HÃ€M BÄ‚M (Hash Functions) - "Dáº¥u vÃ¢n tay sá»‘"**

### ğŸ  **VÃ­ dá»¥ Ä‘á»i thÆ°á»ng:**
- **VÃ¢n tay** cá»§a má»—i ngÆ°á»i lÃ  duy nháº¥t
- Náº¿u cÃ³ 2 ngÆ°á»i cÃ³ cÃ¹ng vÃ¢n tay â†’ Há» lÃ  cÃ¹ng 1 ngÆ°á»i
- Náº¿u vÃ¢n tay khÃ¡c â†’ Cháº¯c cháº¯n lÃ  ngÆ°á»i khÃ¡c

### ğŸ’» **Trong bÃ i lab:**

Khi upload file lÃªn S3, AWS tá»± Ä‘á»™ng tÃ­nh **MD5 hash**:

```bash
# File gá»‘c
echo "Day la file bi mat" > file.txt

# TÃ­nh hash
md5sum file.txt
# Káº¿t quáº£: a1b2c3d4e5f6...  file.txt
```

**Äáº·c Ä‘iá»ƒm cá»§a Hash:**
1. **Má»™t chiá»u**: KhÃ´ng thá»ƒ tá»« hash tÃ¬m ngÆ°á»£c láº¡i ná»™i dung
2. **Deterministic**: CÃ¹ng file â†’ CÃ¹ng hash
3. **Nháº¡y cáº£m**: Thay Ä‘á»•i 1 kÃ½ tá»± â†’ Hash hoÃ n toÃ n khÃ¡c

```
File A: "Hello"     â†’ Hash: 8b1a9953c4611296a827abf8c47804d7
File B: "Hello"     â†’ Hash: 8b1a9953c4611296a827abf8c47804d7  âœ… Giá»‘ng nhau
File C: "Hellp"     â†’ Hash: 5d41402abc4b2a76b9719d911017c592  âŒ KhÃ¡c hoÃ n toÃ n
```

### ğŸ” **Trong bÃ i lab:**

```bash
# So sÃ¡nh hash
md5sum secret-file.txt
# Output: a1b2c3d4...  secret-file.txt

md5sum downloaded-encrypted.txt  
# Output: a1b2c3d4...  downloaded-encrypted.txt
```

**Hash giá»‘ng nhau** â†’ Chá»©ng minh:
- File khÃ´ng bá»‹ thay Ä‘á»•i trong quÃ¡ trÃ¬nh truyá»n
- File Ä‘Æ°á»£c giáº£i mÃ£ chÃ­nh xÃ¡c 100%
- **TÃ­nh toÃ n váº¹n (Integrity)** Ä‘Æ°á»£c Ä‘áº£m báº£o

### ğŸ“Š **ETag trÃªn S3:**
Khi báº¡n xem Properties cá»§a file trÃªn S3 Console, sáº½ tháº¥y **ETag**:
- ETag = MD5 hash cá»§a file
- S3 dÃ¹ng nÃ³ Ä‘á»ƒ check xem file cÃ³ bá»‹ há»ng trong quÃ¡ trÃ¬nh upload khÃ´ng

---

## **5. CHá»® KÃ Sá» (Digital Signature) - "Chá»¯ kÃ½ khÃ´ng thá»ƒ giáº£ máº¡o"**

### ğŸ  **VÃ­ dá»¥ Ä‘á»i thÆ°á»ng:**
- Báº¡n kÃ½ tÃªn vÃ o giáº¥y há»£p Ä‘á»“ng
- NgÆ°á»i ta xem chá»¯ kÃ½ Ä‘á»ƒ biáº¿t: "ÄÃ¢y Ä‘Ãºng lÃ  lelongc kÃ½, khÃ´ng ai giáº£ máº¡o"

### ğŸ’» **Trong bÃ i lab (áº©n bÃªn dÆ°á»›i):**

Má»—i khi báº¡n cháº¡y AWS CLI, Ä‘iá»u nÃ y xáº£y ra:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Báº¡n: aws s3 cp file.txt s3://...  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AWS CLI táº¡o request:               â”‚
â”‚ PUT /file.txt                      â”‚
â”‚ Host: s3.amazonaws.com             â”‚
â”‚ Date: 2025-11-19T09:17:54Z         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TÃ­nh hash cá»§a request:             â”‚
â”‚ SHA256(request) = abc123def...     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DÃ¹ng Secret Key "kÃ½" hash nÃ y:    â”‚
â”‚ Signature = HMAC(hash, SecretKey)  â”‚
â”‚           = xyz789mnp...           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Gá»­i lÃªn AWS:                       â”‚
â”‚ - Request gá»‘c                      â”‚
â”‚ - Access Key ID                    â”‚
â”‚ - Signature (chá»¯ kÃ½)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AWS nháº­n Ä‘Æ°á»£c, kiá»ƒm tra:           â”‚
â”‚ 1. Láº¥y Secret Key tá»« Access Key IDâ”‚
â”‚ 2. Tá»± tÃ­nh signature cá»§a request  â”‚
â”‚ 3. So sÃ¡nh vá»›i signature gá»­i lÃªn  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
     âœ… Giá»‘ng nhau â†’ Cho phÃ©p
     âŒ KhÃ¡c nhau â†’ AccessDenied
```

### ğŸ”’ **Báº£o vá»‡ gÃ¬?**
1. **Chá»©ng thá»±c**: Äáº£m báº£o request tá»« Ä‘Ãºng ngÆ°á»i (cÃ³ Secret Key)
2. **ToÃ n váº¹n**: Request khÃ´ng bá»‹ sá»­a Ä‘á»•i trÃªn Ä‘Æ°á»ng Ä‘i
3. **Chá»‘ng giáº£ máº¡o**: KhÃ´ng ai cÃ³ thá»ƒ táº¡o chá»¯ kÃ½ giáº£

---

## **6. MÃƒ HÃ“A Báº¤T Äá»I Xá»¨NG (Asymmetric Encryption) - "KhÃ³a cÃ´ng khai, khÃ³a riÃªng"**

### ğŸ  **VÃ­ dá»¥ Ä‘á»i thÆ°á»ng:**
HÃ²m thÆ° táº¡i nhÃ  báº¡n:
- **KhÃ³a cÃ´ng khai (Public Key)**: Khe bá» thÆ° â†’ **AI CÅ¨NG Bá» ÄÆ¯á»¢C**
- **KhÃ³a riÃªng (Private Key)**: ChÃ¬a khÃ³a má»Ÿ hÃ²m thÆ° â†’ **CHá»ˆ Báº N CÃ“**

Ai cÅ©ng bá» thÆ° vÃ o Ä‘Æ°á»£c, nhÆ°ng chá»‰ báº¡n má»Ÿ vÃ  Ä‘á»c Ä‘Æ°á»£c.

### ğŸ’» **Trong bÃ i lab (HTTPS/TLS):**

Khi báº¡n cháº¡y `aws s3 cp`, káº¿t ná»‘i HTTPS Ä‘Æ°á»£c thiáº¿t láº­p:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. MÃ¡y báº¡n â†’ AWS:                 â”‚
â”‚    "Xin chÃ o, tÃ´i muá»‘n káº¿t ná»‘i"   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. AWS â†’ MÃ¡y báº¡n:                 â”‚
â”‚    "OK, Ä‘Ã¢y lÃ  Public Key cá»§a tÃ´i" â”‚
â”‚    [Gá»­i chá»©ng chá»‰ SSL + Public Key]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. MÃ¡y báº¡n:                        â”‚
â”‚    Táº¡o Session Key (khÃ³a Ä‘á»‘i xá»©ng) â”‚
â”‚    VÃ­ dá»¥: "K789xyz..."             â”‚
â”‚    MÃ£ hÃ³a Session Key báº±ng         â”‚
â”‚    Public Key cá»§a AWS              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. MÃ¡y báº¡n â†’ AWS:                 â”‚
â”‚    Gá»­i Session Key Ä‘Ã£ mÃ£ hÃ³a       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. AWS:                            â”‚
â”‚    DÃ¹ng Private Key giáº£i mÃ£        â”‚
â”‚    â†’ Láº¥y Ä‘Æ°á»£c Session Key          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. Cáº£ 2 bÃªn giá» cÃ³ chung Session  â”‚
â”‚    Key â†’ DÃ¹ng mÃ£ hÃ³a Ä‘á»‘i xá»©ng      â”‚
â”‚    (nhanh hÆ¡n) cho pháº§n cÃ²n láº¡i    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”‘ **Táº¡i sao khÃ´ng dÃ¹ng mÃ£ hÃ³a báº¥t Ä‘á»‘i xá»©ng cho má»i thá»©?**
- **Cháº­m hÆ¡n 1000 láº§n** so vá»›i mÃ£ hÃ³a Ä‘á»‘i xá»©ng
- Chá»‰ dÃ¹ng Ä‘á»ƒ **trao Ä‘á»•i khÃ³a an toÃ n**
- Sau Ä‘Ã³ chuyá»ƒn sang Ä‘á»‘i xá»©ng Ä‘á»ƒ **truyá»n dá»¯ liá»‡u nhanh**

---

## **ğŸ“Š Tá»”NG Káº¾T: LUá»’NG Báº¢O Máº¬T HOÃ€N CHá»ˆNH TRONG BÃ€I LAB**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Báº N CHáº Y Lá»†NH UPLOAD                        â”‚
â”‚  aws s3 cp secret.txt s3://bucket/ --sse aws:kms             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. CHá»¨NG THá»°C (Authentication)                              â”‚
â”‚     - AWS CLI kÃ½ request báº±ng Secret Key                     â”‚
â”‚     - AWS xÃ¡c minh: "Báº¡n lÃ  demo-admin" âœ…                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. PHÃ‚N QUYá»€N (Authorization)                               â”‚
â”‚     - Kiá»ƒm tra policy: demo-admin cÃ³ quyá»n PutObject? âœ…     â”‚
â”‚     - Kiá»ƒm tra policy: demo-admin cÃ³ quyá»n dÃ¹ng KMS? âœ…      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. MÃƒ HÃ“A Báº¤T Äá»I Xá»¨NG (TLS/HTTPS)                         â”‚
â”‚     - Thiáº¿t láº­p káº¿t ná»‘i an toÃ n vá»›i S3                       â”‚
â”‚     - Trao Ä‘á»•i Session Key báº±ng RSA                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. MÃƒ HÃ“A Äá»I Xá»¨NG (KMS)                                    â”‚
â”‚     - KMS táº¡o Data Key                                        â”‚
â”‚     - MÃ£ hÃ³a file báº±ng AES-256                               â”‚
â”‚     - MÃ£ hÃ³a Data Key báº±ng Master Key                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. HÃ€M BÄ‚M (Integrity Check)                                â”‚
â”‚     - S3 tÃ­nh MD5 hash cá»§a file                              â”‚
â”‚     - LÆ°u hash vÃ o ETag                                      â”‚
â”‚     - DÃ¹ng Ä‘á»ƒ verify khi download                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               FILE ÄÆ¯á»¢C LÆ¯U AN TOÃ€N TRÃŠN S3                  â”‚
â”‚  âœ… Chá»‰ ngÆ°á»i cÃ³ quyá»n má»›i truy cáº­p Ä‘Æ°á»£c                     â”‚
â”‚  âœ… Dá»¯ liá»‡u Ä‘Æ°á»£c mÃ£ hÃ³a, khÃ´ng ai Ä‘á»c Ä‘Æ°á»£c                   â”‚
â”‚  âœ… ToÃ n váº¹n Ä‘Æ°á»£c Ä‘áº£m báº£o bá»Ÿi hash                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## **ğŸ’¡ Káº¾T LUáº¬N**

BÃ i lab tuy Ä‘Æ¡n giáº£n nhÆ°ng Ä‘Ã£ minh há»a **5 trá»¥ cá»™t báº£o máº­t**:

| KhÃ¡i niá»‡m | CÃ¢u há»i tráº£ lá»i | CÃ´ng nghá»‡ trong lab |
|-----------|-----------------|---------------------|
| **Chá»©ng thá»±c** | Báº¡n lÃ  ai? | Access Key + Secret Key |
| **PhÃ¢n quyá»n** | Báº¡n Ä‘Æ°á»£c lÃ m gÃ¬? | IAM Policies |
| **MÃ£ hÃ³a Ä‘á»‘i xá»©ng** | Báº£o vá»‡ dá»¯ liá»‡u nhÆ° tháº¿ nÃ o? | AES-256 + KMS |
| **HÃ m bÄƒm** | Dá»¯ liá»‡u cÃ³ bá»‹ sá»­a khÃ´ng? | MD5/SHA256 |
| **MÃ£ hÃ³a báº¥t Ä‘á»‘i xá»©ng** | Káº¿t ná»‘i an toÃ n ra sao? | RSA + TLS/HTTPS |

## dÃ¹ bÃ i lab Ä‘Æ¡n giáº£n mong tháº§y cho em Ä‘iá»ƒm cao áº¡ ğŸ˜ğŸ¤
