
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>Cloud watch logs - DraDoc</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#amazon-cloudwatch-logs-tong-quan-chi-tiet" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="DraDoc" class="md-header__button md-logo" aria-label="DraDoc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DraDoc
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Cloud watch logs
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Chuyển sang chế độ tối"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Chuyển sang chế độ tối" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Chuyển sang chế độ sáng"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Chuyển sang chế độ sáng" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/lelongc/aws" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="DraDoc" class="md-nav__button md-logo" aria-label="DraDoc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    DraDoc
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/lelongc/aws" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#amazon-cloudwatch-logs-tong-quan-chi-tiet" class="md-nav__link">
    <span class="md-ellipsis">
      Amazon CloudWatch Logs: Tổng Quan Chi Tiết
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-cac-khai-niem-chinh-trong-cloudwatch-logs" class="md-nav__link">
    <span class="md-ellipsis">
      1. Các Khái Niệm Chính trong CloudWatch Logs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Các Khái Niệm Chính trong CloudWatch Logs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-log-groups-nhom-nhat-ky" class="md-nav__link">
    <span class="md-ellipsis">
      a. Log Groups (Nhóm nhật ký)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-log-streams-luong-nhat-ky" class="md-nav__link">
    <span class="md-ellipsis">
      b. Log Streams (Luồng nhật ký)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-chinh-sach-het-han-retention-policy" class="md-nav__link">
    <span class="md-ellipsis">
      c. Chính Sách Hết Hạn (Retention Policy)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-cach-gui-nhat-ky-en-cloudwatch-logs" class="md-nav__link">
    <span class="md-ellipsis">
      2. Cách Gửi Nhật Ký Đến CloudWatch Logs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-truy-van-nhat-ky-voi-cloudwatch-logs-insights" class="md-nav__link">
    <span class="md-ellipsis">
      3. Truy Vấn Nhật Ký với CloudWatch Logs Insights
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-xuat-nhat-ky-tu-cloudwatch-logs" class="md-nav__link">
    <span class="md-ellipsis">
      4. Xuất Nhật Ký Từ CloudWatch Logs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Xuất Nhật Ký Từ CloudWatch Logs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-xuat-hang-loat-batch-export-en-amazon-s3" class="md-nav__link">
    <span class="md-ellipsis">
      a. Xuất Hàng Loạt (Batch Export) đến Amazon S3
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-stream-nhat-ky-thoi-gian-thuc-real-time-streaming" class="md-nav__link">
    <span class="md-ellipsis">
      b. Stream Nhật Ký Thời Gian Thực (Real-Time Streaming)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-tich-hop-a-tai-khoan-va-a-vung" class="md-nav__link">
    <span class="md-ellipsis">
      5. Tích Hợp Đa Tài Khoản và Đa Vùng
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-ma-hoa-nhat-ky" class="md-nav__link">
    <span class="md-ellipsis">
      6. Mã Hóa Nhật Ký
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-cac-truong-hop-su-dung-cloudwatch-logs" class="md-nav__link">
    <span class="md-ellipsis">
      7. Các Trường Hợp Sử Dụng CloudWatch Logs
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-vi-du-su-dung-cloudwatch-logs-insights" class="md-nav__link">
    <span class="md-ellipsis">
      8. Ví Dụ: Sử Dụng CloudWatch Logs Insights
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-ket-luan" class="md-nav__link">
    <span class="md-ellipsis">
      9. Kết Luận
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/lelongc/aws/edit/main/my-website/docs/saa-stephane/17.monitor/cloud-watch-logs.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


  <h1>Cloud watch logs</h1>

<h3 id="amazon-cloudwatch-logs-tong-quan-chi-tiet"><strong>Amazon CloudWatch Logs: Tổng Quan Chi Tiết</strong></h3>
<p>Amazon CloudWatch Logs là một dịch vụ cho phép bạn thu thập, lưu trữ và phân tích nhật ký (logs) từ các ứng dụng và tài nguyên AWS. Nó cung cấp khả năng giám sát, truy vấn và xuất nhật ký một cách linh hoạt, giúp bạn dễ dàng quản lý và phân tích dữ liệu nhật ký.</p>
<hr />
<h3 id="1-cac-khai-niem-chinh-trong-cloudwatch-logs"><strong>1. Các Khái Niệm Chính trong CloudWatch Logs</strong></h3>
<h4 id="a-log-groups-nhom-nhat-ky"><strong>a. Log Groups (Nhóm nhật ký)</strong></h4>
<ul>
<li><strong>Log Groups</strong> là các nhóm chứa các luồng nhật ký (log streams) liên quan đến một ứng dụng hoặc dịch vụ cụ thể.</li>
<li>Ví dụ: Bạn có thể tạo một log group cho ứng dụng web của mình và một log group khác cho cơ sở dữ liệu.</li>
<li>Log groups giúp tổ chức và quản lý nhật ký một cách có cấu trúc.</li>
</ul>
<h4 id="b-log-streams-luong-nhat-ky"><strong>b. Log Streams (Luồng nhật ký)</strong></h4>
<ul>
<li><strong>Log Streams</strong> là các luồng nhật ký riêng lẻ trong một log group.</li>
<li>Mỗi log stream có thể đại diện cho một phiên bản ứng dụng, một container, hoặc một tệp nhật ký cụ thể.</li>
<li>Ví dụ: Nếu bạn có nhiều container chạy cùng một ứng dụng, mỗi container có thể có một log stream riêng.</li>
</ul>
<h4 id="c-chinh-sach-het-han-retention-policy"><strong>c. Chính Sách Hết Hạn (Retention Policy)</strong></h4>
<ul>
<li>Bạn có thể thiết lập thời gian lưu trữ nhật ký trong CloudWatch Logs.</li>
<li>Các tùy chọn bao gồm:</li>
<li>Lưu trữ vô thời hạn (never expire).</li>
<li>Từ 1 ngày đến 10 năm.</li>
<li>Việc thiết lập chính sách hết hạn giúp bạn quản lý chi phí lưu trữ và tuân thủ các yêu cầu pháp lý.</li>
</ul>
<hr />
<h3 id="2-cach-gui-nhat-ky-en-cloudwatch-logs"><strong>2. Cách Gửi Nhật Ký Đến CloudWatch Logs</strong></h3>
<ul>
<li>Bạn có thể gửi nhật ký đến CloudWatch Logs bằng nhiều cách:</li>
<li><strong>SDK</strong>: Sử dụng AWS SDK để gửi nhật ký từ ứng dụng của bạn.</li>
<li><strong>CloudWatch Logs Agent</strong>: Một agent cũ để thu thập và gửi nhật ký (hiện đã được thay thế bằng CloudWatch Unified Agent).</li>
<li><strong>CloudWatch Unified Agent</strong>: Một agent mới hỗ trợ thu thập nhật ký(logs) và metric từ các ứng dụng và hệ thống.</li>
<li><strong>Các dịch vụ AWS tích hợp sẵn</strong>:<ul>
<li><strong>Elastic Beanstalk</strong>: Tự động thu thập nhật ký từ ứng dụng.</li>
<li><strong>ECS</strong>: Gửi nhật ký từ các container.</li>
<li><strong>Lambda</strong>: Gửi nhật ký từ các hàm Lambda.</li>
<li><strong>VPC Flow Logs</strong>: Gửi nhật ký về lưu lượng mạng trong VPC.</li>
<li><strong>API Gateway</strong>: Gửi nhật ký về các yêu cầu API.</li>
<li><strong>CloudTrail</strong>: Gửi nhật ký về các hoạt động trong tài khoản AWS.</li>
<li><strong>Route53</strong>: Gửi nhật ký về các truy vấn DNS.</li>
</ul>
</li>
</ul>
<hr />
<h3 id="3-truy-van-nhat-ky-voi-cloudwatch-logs-insights"><strong>3. Truy Vấn Nhật Ký với CloudWatch Logs Insights</strong></h3>
<ul>
<li><strong>CloudWatch Logs Insights</strong> là một công cụ mạnh mẽ để truy vấn và phân tích nhật ký trong CloudWatch Logs.</li>
<li>Tính năng chính:</li>
<li><strong>Ngôn ngữ truy vấn</strong>: Sử dụng ngôn ngữ truy vấn đơn giản để tìm kiếm và phân tích nhật ký.</li>
<li><strong>Tự động phát hiện trường</strong>: CloudWatch tự động phát hiện các trường trong nhật ký để bạn dễ dàng truy vấn.</li>
<li><strong>Tính toán thống kê</strong>: Tính toán các giá trị thống kê như tổng, trung bình, số lượng sự kiện.</li>
<li><strong>Lưu và chia sẻ truy vấn</strong>: Bạn có thể lưu truy vấn và thêm kết quả vào CloudWatch Dashboards.</li>
<li>Ví dụ về các truy vấn phổ biến:</li>
<li>Tìm 25 sự kiện gần nhất.</li>
<li>Đếm số lượng sự kiện có lỗi hoặc ngoại lệ.</li>
<li>Tìm kiếm nhật ký từ một địa chỉ IP cụ thể.</li>
</ul>
<hr />
<h3 id="4-xuat-nhat-ky-tu-cloudwatch-logs"><strong>4. Xuất Nhật Ký Từ CloudWatch Logs</strong></h3>
<ul>
<li>Bạn có thể xuất nhật ký từ CloudWatch Logs đến các dịch vụ khác để lưu trữ hoặc phân tích thêm.</li>
</ul>
<h4 id="a-xuat-hang-loat-batch-export-en-amazon-s3"><strong>a. Xuất Hàng Loạt (Batch Export) đến Amazon S3</strong></h4>
<ul>
<li>Bạn có thể xuất toàn bộ nhật ký từ CloudWatch Logs đến Amazon S3.</li>
<li>Quá trình xuất có thể mất đến <strong>12 giờ</strong> để hoàn thành.</li>
<li>Sử dụng API <code>CreateExportTask</code> để bắt đầu quá trình xuất.</li>
</ul>
<h4 id="b-stream-nhat-ky-thoi-gian-thuc-real-time-streaming"><strong>b. Stream Nhật Ký Thời Gian Thực (Real-Time Streaming)</strong></h4>
<p><img alt="alt text" src="../image/CloudWatchLogsSubscription.png" /></p>
<ul>
<li>Bạn có thể stream nhật ký thời gian thực đến các dịch vụ khác thông qua <strong>CloudWatch Logs Subscription</strong>.</li>
<li>Các điểm đến phổ biến:</li>
<li><strong>Kinesis Data Streams</strong>: Để xử lý và phân tích dữ liệu thời gian thực.</li>
<li><strong>Kinesis Data Firehose</strong>: Để gửi dữ liệu đến S3, OpenSearch, hoặc các dịch vụ khác.</li>
<li><strong>Lambda</strong>: Để thực thi mã tùy chỉnh dựa trên nhật ký.</li>
<li>Bạn có thể sử dụng <strong>Subscription Filters</strong> để chỉ định loại nhật ký nào sẽ được gửi đến điểm đến.</li>
</ul>
<hr />
<h3 id="5-tich-hop-a-tai-khoan-va-a-vung"><strong>5. Tích Hợp Đa Tài Khoản và Đa Vùng</strong></h3>
<ul>
<li>CloudWatch Logs hỗ trợ tích hợp nhật ký từ nhiều tài khoản và nhiều vùng (regions) vào một điểm đến chung.
  <img alt="alt text" src="../image/log-aggregation.png" />
  <img alt="alt text" src="../image/Subscription.png" /></li>
<li>Cách thức hoạt động:</li>
<li>Tạo một <strong>CloudWatch Logs Subscription Filter</strong> trong tài khoản gửi.</li>
<li>Tạo một <strong>Destination</strong> (điểm đến) trong tài khoản nhận (ví dụ: Kinesis Data Stream).</li>
<li>Thiết lập <strong>Destination Access Policy</strong> để cho phép tài khoản gửi gửi dữ liệu đến điểm đến.</li>
<li>Tạo một <strong>IAM Role</strong> trong tài khoản nhận để cho phép tài khoản gửi ghi dữ liệu vào Kinesis Data Stream.</li>
<li>Ví dụ: Bạn có thể tập hợp nhật ký từ nhiều tài khoản AWS vào một S3 bucket hoặc OpenSearch cluster trong một tài khoản trung tâm.</li>
</ul>
<hr />
<h3 id="6-ma-hoa-nhat-ky"><strong>6. Mã Hóa Nhật Ký</strong></h3>
<ul>
<li>Tất cả nhật ký trong CloudWatch Logs được mã hóa <strong>mặc định</strong> bằng AES-256.</li>
<li>Bạn có thể sử dụng <strong>AWS Key Management Service (KMS)</strong> để mã hóa nhật ký bằng khóa của riêng mình.</li>
</ul>
<hr />
<h3 id="7-cac-truong-hop-su-dung-cloudwatch-logs"><strong>7. Các Trường Hợp Sử Dụng CloudWatch Logs</strong></h3>
<ul>
<li><strong>Giám sát ứng dụng</strong>: Thu thập và phân tích nhật ký từ ứng dụng của bạn.</li>
<li><strong>Khắc phục sự cố</strong>: Tìm kiếm và phân tích nhật ký để xác định nguyên nhân sự cố.</li>
<li><strong>Tuân thủ và kiểm toán</strong>: Lưu trữ nhật ký để đáp ứng các yêu cầu pháp lý và kiểm toán.</li>
<li><strong>Phân tích dữ liệu</strong>: Sử dụng CloudWatch Logs Insights để phân tích dữ liệu nhật ký và tạo báo cáo.</li>
</ul>
<hr />
<h3 id="8-vi-du-su-dung-cloudwatch-logs-insights"><strong>8. Ví Dụ: Sử Dụng CloudWatch Logs Insights</strong></h3>
<ol>
<li>Truy cập <strong>CloudWatch Console</strong>.</li>
<li>Chọn <strong>Logs Insights</strong> từ menu bên trái.</li>
<li>Chọn một hoặc nhiều <strong>log groups</strong>.</li>
<li>Nhập truy vấn (ví dụ: <code>fields @timestamp, @message | filter @message like /error/ | sort @timestamp desc | limit 25</code>).</li>
<li>Chọn khoảng thời gian (ví dụ: 1 giờ qua, 7 ngày qua).</li>
<li>Xem kết quả dưới dạng biểu đồ hoặc danh sách nhật ký.</li>
<li>Lưu truy vấn hoặc thêm kết quả vào dashboard.</li>
</ol>
<hr />
<h3 id="9-ket-luan"><strong>9. Kết Luận</strong></h3>
<p>CloudWatch Logs là một công cụ mạnh mẽ để thu thập, lưu trữ và phân tích nhật ký trên AWS. Với các tính năng như CloudWatch Logs Insights, bạn có thể dễ dàng truy vấn và phân tích nhật ký để giám sát ứng dụng, khắc phục sự cố và đáp ứng các yêu cầu tuân thủ. Ngoài ra, khả năng tích hợp với các dịch vụ khác như S3, Kinesis, và Lambda giúp bạn xử lý và lưu trữ nhật ký một cách linh hoạt.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "content.action.edit"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>