
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>NLB - DraDoc</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1-inh-nghia-va-lop-hoat-ong" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="DraDoc" class="md-header__button md-logo" aria-label="DraDoc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DraDoc
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              NLB
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Chuyển sang chế độ tối"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Chuyển sang chế độ tối" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Chuyển sang chế độ sáng"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Chuyển sang chế độ sáng" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/lelongc/aws" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="DraDoc" class="md-nav__button md-logo" aria-label="DraDoc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    DraDoc
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/lelongc/aws" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-inh-nghia-va-lop-hoat-ong" class="md-nav__link">
    <span class="md-ellipsis">
      1. Định nghĩa và Lớp Hoạt Động
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-hieu-suat" class="md-nav__link">
    <span class="md-ellipsis">
      2. Hiệu suất
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-ia-chi-ip-tinh" class="md-nav__link">
    <span class="md-ellipsis">
      3. Địa chỉ IP tĩnh
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-su-dung-va-gia" class="md-nav__link">
    <span class="md-ellipsis">
      4. Sử dụng và Giá
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-target-groups" class="md-nav__link">
    <span class="md-ellipsis">
      5. Target Groups
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-ket-hop-voi-application-load-balancer" class="md-nav__link">
    <span class="md-ellipsis">
      6. Kết hợp với Application Load Balancer
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-health-checks" class="md-nav__link">
    <span class="md-ellipsis">
      7. Health Checks
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-khi-nao-chon-nlb" class="md-nav__link">
    <span class="md-ellipsis">
      8. Khi nào chọn NLB?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tong-ket" class="md-nav__link">
    <span class="md-ellipsis">
      Tổng Kết
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/lelongc/aws/edit/main/my-website/docs/saa-stephane/03.High-availability-vs-Scalability/lý-thuyết/NLB.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


  <h1>NLB</h1>

<p><img alt="NLB-tcp based traffic " src="../image/NLB-tcp.png" />
<img alt="NLB target gr " src="../image/NLB-targetgr.png" /></p>
<hr />
<h3 id="1-inh-nghia-va-lop-hoat-ong">1. <strong>Định nghĩa và Lớp Hoạt Động</strong></h3>
<ul>
<li><strong>NLB</strong> là <strong>load balancer ở tầng 4</strong> (Layer 4) trong mô hình OSI, nghĩa là xử lý lưu lượng <strong>TCP</strong> và <strong>UDP</strong>.</li>
<li>Khác với <strong>Application Load Balancer (ALB)</strong> hoạt động ở tầng 7 (Layer 7 - HTTP/HTTPS), NLB tập trung vào các giao thức cấp thấp như <strong>TCP</strong> và <strong>UDP</strong>.</li>
</ul>
<hr />
<h3 id="2-hieu-suat">2. <strong>Hiệu suất</strong></h3>
<ul>
<li><strong>Hiệu suất rất cao</strong>: NLB có khả năng xử lý <strong>hàng triệu yêu cầu mỗi giây</strong>.</li>
<li><strong>Độ trễ cực thấp</strong>: Phù hợp cho các ứng dụng yêu cầu tốc độ xử lý nhanh chóng.</li>
</ul>
<hr />
<h3 id="3-ia-chi-ip-tinh">3. <strong>Địa chỉ IP tĩnh</strong></h3>
<ul>
<li><strong>Địa chỉ IP tĩnh trên mỗi Availability Zone (AZ)</strong>:</li>
<li>Mỗi AZ chỉ có <strong>một IP tĩnh</strong>.</li>
<li>Có thể gán <strong>Elastic IP (EIP)</strong> cho từng AZ.</li>
<li>Điều này giúp ứng dụng có thể được truy cập thông qua <strong>một hoặc một tập hợp IP tĩnh cụ thể</strong>.</li>
<li>Ví dụ: Nếu đề bài yêu cầu giới hạn số lượng IP, chọn NLB là lựa chọn phù hợp.</li>
</ul>
<hr />
<h3 id="4-su-dung-va-gia">4. <strong>Sử dụng và Giá</strong></h3>
<ul>
<li><strong>Không nằm trong AWS Free Tier</strong>.</li>
<li><strong>Cách sử dụng</strong>:</li>
<li>Tạo <strong>Target Groups</strong> (nhóm mục tiêu).</li>
<li>NLB định tuyến lưu lượng đến các nhóm mục tiêu dựa trên giao thức TCP hoặc UDP.</li>
</ul>
<hr />
<h3 id="5-target-groups">5. <strong>Target Groups</strong></h3>
<ul>
<li>Các <strong>mục tiêu</strong> có thể là:</li>
<li><strong>EC2 Instances</strong>: NLB gửi lưu lượng TCP hoặc UDP trực tiếp đến EC2.</li>
<li><strong>Địa chỉ IP</strong>: <ul>
<li>Là các <strong>private IPs</strong> được cấu hình thủ công.</li>
<li>Dùng để chuyển tiếp lưu lượng đến:</li>
<li><strong>EC2 Instances</strong>.</li>
<li><strong>Server trong trung tâm dữ liệu tại chỗ</strong> (On-premises data center).</li>
<li>Cho phép NLB front-end cả hạ tầng AWS và tại chỗ.</li>
</ul>
</li>
</ul>
<hr />
<h3 id="6-ket-hop-voi-application-load-balancer">6. <strong>Kết hợp với Application Load Balancer</strong></h3>
<ul>
<li>Có thể đặt <strong>NLB trước ALB</strong>:</li>
<li><strong>NLB</strong> cung cấp địa chỉ IP cố định.</li>
<li><strong>ALB</strong> xử lý các quy tắc nâng cao cho HTTP/HTTPS.</li>
<li>Thích hợp khi cần kết hợp khả năng xử lý của cả hai loại.</li>
</ul>
<hr />
<h3 id="7-health-checks">7. <strong>Health Checks</strong></h3>
<ul>
<li><strong>NLB Target Groups</strong> hỗ trợ 3 giao thức kiểm tra tình trạng:</li>
<li><strong>TCP</strong></li>
<li><strong>HTTP</strong></li>
<li><strong>HTTPS</strong></li>
<li>Tùy vào giao thức ứng dụng backend, bạn có thể cấu hình health checks tương ứng.</li>
</ul>
<hr />
<h3 id="8-khi-nao-chon-nlb">8. <strong>Khi nào chọn NLB?</strong></h3>
<ul>
<li>Khi ứng dụng yêu cầu:</li>
<li><strong>Hiệu suất cực cao</strong> hoặc <strong>độ trễ thấp</strong>.</li>
<li><strong>Giao thức TCP/UDP</strong>.</li>
<li><strong>Địa chỉ IP tĩnh</strong>. 
  Tên DNS của NLB (ví dụ: my-nlb-123456.elb.amazonaws.com) được thiết lập để trỏ đến tất cả các IP tĩnh của NLB trong mọi AZ.
    <a href="../../l%C3%BD-thuy%E1%BA%BFt-b%C3%AAn-l%E1%BB%81/ip-t%C4%A9nh-c%E1%BB%A7a-nlb-vs-dns-alb/">khác với alb như nào </a>
  Khi client thực hiện truy vấn DNS, hệ thống DNS sẽ trả về danh sách các IP tĩnh (mỗi IP tương ứng với một AZ).</li>
<li>Tính sẵn sàng cao:
  Nếu một AZ bị lỗi, các IP tĩnh trong AZ đó sẽ không được cung cấp trong danh sách DNS trả về, hoặc client sẽ thử với các IP khác trong danh sách.</li>
<li>NLB là giải pháp lý tưởng cho các ứng dụng thời gian thực, yêu cầu tốc độ và kết nối ổn định.</li>
</ul>
<hr />
<h3 id="tong-ket">Tổng Kết</h3>
<p><strong>Network Load Balancer</strong> là lựa chọn lý tưởng cho các ứng dụng yêu cầu xử lý TCP/UDP nhanh, địa chỉ IP tĩnh và hiệu suất cao. Nếu đề bài nhấn mạnh các yếu tố như <strong>địa chỉ IP cố định</strong>, <strong>hiệu suất cao</strong>, hoặc <strong>giao thức tầng thấp</strong>, thì NLB là giải pháp phù hợp.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../../..", "features": ["content.code.copy", "content.action.edit"], "search": "../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>