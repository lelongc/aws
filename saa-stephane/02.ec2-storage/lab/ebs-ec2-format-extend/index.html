
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>Ebs ec2 format extend - DraDoc</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#mo-rong-volume" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="DraDoc" class="md-header__button md-logo" aria-label="DraDoc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DraDoc
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Ebs ec2 format extend
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Chuyển sang chế độ tối"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Chuyển sang chế độ tối" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Chuyển sang chế độ sáng"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Chuyển sang chế độ sáng" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/lelongc/aws" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="DraDoc" class="md-nav__button md-logo" aria-label="DraDoc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    DraDoc
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/lelongc/aws" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/lelongc/aws/edit/main/my-website/docs/saa-stephane/02.ec2-storage/lab/ebs-ec2-format-extend.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<p>Extend the file system after resizing an EBS volume</p>
<h1 id="mo-rong-volume">mở rộng volume</h1>
<p>https://docs.aws.amazon.com/ebs/latest/userguide/recognize-expanded-volume-linux.html#:~:text=Create%20a%20snapshot,Knowledge%20Center%20article.</p>
<h1 id="gan-volume-inh-dang-e-dung">gán volume, định dạng để dùng</h1>
<p>https://docs.aws.amazon.com/ebs/latest/userguide/ebs-using-volumes.html
phía dưới chỉ là dịch phần linux trong 2 link trên còn window thì xem trong 2 link trên </p>
<hr />
<p><a href="../../l%C3%BD-thuy%E1%BA%BFt/ebs-ec2-extend-volume/">đọc thêm lý thuyết cho nhớ </a></p>
<p>Giả sử bạn có một instance EC2 với volume EBS cho thiết bị gốc, <code>/dev/xvda</code>, và bạn vừa đính kèm một volume EBS trống vào instance này thông qua <code>/dev/sdf</code>. Dưới đây là các bước để làm cho volume vừa đính kèm sẵn sàng sử dụng.</p>
<h4 id="1-ket-noi-vao-instance-qua-ssh">1. Kết nối vào instance qua SSH</h4>
<p>Để bắt đầu, bạn cần kết nối vào instance của mình qua SSH. Tham khảo thêm thông tin chi tiết tại phần <strong>Kết nối vào instance Linux</strong>.</p>
<p>Thiết bị có thể đã được đính kèm vào instance với một tên thiết bị khác so với tên bạn chỉ định trong bản đồ thiết bị khối. Bạn có thể tham khảo thêm về tên thiết bị trên các instance Linux tại mục <strong>device names</strong>. Dùng lệnh <code>lsblk</code> để xem các thiết bị đính kèm và các điểm gắn của chúng (nếu có), giúp bạn xác định đúng tên thiết bị. Kết quả của lệnh <code>lsblk</code> sẽ loại bỏ phần tiền tố <code>/dev/</code> từ đường dẫn thiết bị đầy đủ.</p>
<p>Dưới đây là ví dụ đầu ra cho một instance sử dụng Nitro System, nơi các volume EBS được hiển thị dưới dạng thiết bị khối NVMe. Thiết bị gốc là <code>/dev/nvme0n1</code>, có hai phân vùng tên là <code>nvme0n1p1</code> và <code>nvme0n1p128</code>. Volume đính kèm là <code>/dev/nvme1n1</code>, chưa có phân vùng và chưa được gắn.</p>
<pre><code class="language-bash">[ec2-user ~]$ lsblk
NAME          MAJ:MIN RM SIZE RO TYPE MOUNTPOINT
nvme1n1       259:0    0  10G  0 disk
nvme0n1       259:1    0   8G  0 disk
-nvme0n1p1    259:2    0   8G  0 part /
-nvme0n1p128  259:3    0   1M  0 part
</code></pre>
<p>Đây là ví dụ đầu ra cho instance T2. Thiết bị gốc là <code>/dev/xvda</code>, có một phân vùng tên là <code>xvda1</code>. Volume đính kèm là <code>/dev/xvdf</code>, chưa có phân vùng và chưa được gắn.</p>
<pre><code class="language-bash">[ec2-user ~]$ lsblk
NAME    MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
xvda    202:0    0    8G  0 disk
-xvda1  202:1    0    8G  0 part /
xvdf    202:80   0   10G  0 disk
</code></pre>
<h4 id="2-kiem-tra-xem-volume-co-he-thong-tap-tin-khong">2. Kiểm tra xem volume có hệ thống tập tin không</h4>
<p>Volume mới tạo ra là thiết bị khối thô và bạn cần phải tạo hệ thống tập tin trên đó trước khi có thể gắn và sử dụng. Các volume được tạo từ snapshots có thể đã có hệ thống tập tin sẵn; nếu bạn tạo hệ thống tập tin mới, việc này sẽ ghi đè lên dữ liệu hiện tại.</p>
<p>Dùng một hoặc cả hai lệnh sau để kiểm tra xem volume có hệ thống tập tin không:</p>
<ul>
<li>Dùng lệnh <code>file -s</code> để lấy thông tin về một thiết bị cụ thể, như kiểu hệ thống tập tin. Nếu kết quả hiển thị chỉ "data", nghĩa là thiết bị này chưa có hệ thống tập tin.</li>
</ul>
<pre><code class="language-bash">[ec2-user ~]$ sudo file -s /dev/xvdf
/dev/xvdf: data
</code></pre>
<ul>
<li>Nếu thiết bị đã có hệ thống tập tin, lệnh sẽ hiển thị thông tin về loại hệ thống tập tin. Ví dụ, kết quả dưới đây hiển thị thiết bị gốc với hệ thống tập tin XFS.</li>
</ul>
<pre><code class="language-bash">[ec2-user ~]$ sudo file -s /dev/xvda1
/dev/xvda1: SGI XFS filesystem data (blksz 4096, inosz 512, v2 dirs)
</code></pre>
<p>Dùng lệnh <code>lsblk -f</code> để lấy thông tin về tất cả các thiết bị đã được đính kèm vào instance.</p>
<pre><code class="language-bash">[ec2-user ~]$ sudo lsblk -f
</code></pre>
<p>Ví dụ đầu ra dưới đây cho thấy ba thiết bị đã được đính kèm vào instance: <code>nvme1n1</code>, <code>nvme0n1</code>, và <code>nvme2n1</code>. Cột FSTYPE hiển thị loại hệ thống tập tin cho mỗi thiết bị. Nếu cột này trống, có nghĩa là thiết bị không có hệ thống tập tin. Trong trường hợp này, thiết bị <code>nvme1n1</code> và phân vùng <code>nvme0n1p1</code> trên thiết bị <code>nvme0n1</code> đều được định dạng với hệ thống tập tin XFS, trong khi thiết bị <code>nvme2n1</code> và phân vùng <code>nvme0n1p128</code> trên thiết bị <code>nvme0n1</code> không có hệ thống tập tin.</p>
<pre><code class="language-bash">NAME        FSTYPE  LABEL   UUID                        MOUNTPOINT
nvme1n1         xfs     7f939f28-6dcc-4315-8c42-6806080b94dd
nvme0n1
├─nvme0n1p1 xfs     /   90e29211-2de8-4967-b0fb-16f51a6e464c            /
└─nvme0n1p128
nvme2n1
</code></pre>
<p>Nếu đầu ra cho thấy không có hệ thống tập tin trên thiết bị, bạn cần tạo hệ thống tập tin.</p>
<h4 id="3-tao-he-thong-tap-tin">3. Tạo hệ thống tập tin</h4>
<p>Nếu volume là mới và chưa có hệ thống tập tin, bạn cần tạo một hệ thống tập tin. Lưu ý không sử dụng lệnh này nếu bạn đang gắn volume đã có dữ liệu (ví dụ, volume được tạo từ một snapshot), vì lệnh này sẽ định dạng lại volume và xóa dữ liệu.</p>
<pre><code class="language-bash">[ec2-user ~]$ sudo mkfs -t xfs /dev/xvdf
</code></pre>
<p>Nếu bạn gặp lỗi "mkfs.xfs not found", cài đặt công cụ XFS trước khi thực hiện lại lệnh trên.</p>
<pre><code class="language-bash">[ec2-user ~]$ sudo yum install xfsprogs
</code></pre>
<h4 id="4-tao-thu-muc-e-gan-volume">4. Tạo thư mục để gắn volume</h4>
<p>Dùng lệnh <code>mkdir</code> để tạo thư mục gắn volume. Ví dụ, tạo thư mục <code>/data</code>:</p>
<pre><code class="language-bash">[ec2-user ~]$ sudo mkdir /data
</code></pre>
<h4 id="5-gan-volume-vao-thu-muc">5. Gắn volume vào thư mục</h4>
<p>Gắn volume hoặc phân vùng vào thư mục đã tạo ở bước trước. Nếu volume không có phân vùng, bạn có thể gắn trực tiếp toàn bộ volume.</p>
<pre><code class="language-bash">[ec2-user ~]$ sudo mount /dev/xvdf /data
</code></pre>
<p>Nếu volume có phân vùng, gắn phân vùng vào thư mục.</p>
<pre><code class="language-bash">[ec2-user ~]$ sudo mount /dev/xvdf1 /data
</code></pre>
<h4 id="6-kiem-tra-quyen-truy-cap">6. Kiểm tra quyền truy cập</h4>
<p>Kiểm tra quyền truy cập của volume để đảm bảo rằng người dùng và ứng dụng có thể ghi vào volume.</p>
<h4 id="7-tu-ong-gan-volume-sau-khi-khoi-ong-lai">7. Tự động gắn volume sau khi khởi động lại</h4>
<p>Để tự động gắn volume sau khi khởi động lại, bạn cần thêm một mục cho thiết bị trong tệp <code>/etc/fstab</code>.</p>
<p>Bạn có thể dùng tên thiết bị như <code>/dev/xvdf</code>, nhưng khuyến khích sử dụng UUID của thiết bị, vì UUID sẽ không thay đổi ngay cả khi tên thiết bị thay đổi. Để thêm UUID vào tệp <code>/etc/fstab</code>, thực hiện các bước sau:</p>
<ul>
<li>(Tùy chọn) Sao lưu tệp <code>/etc/fstab</code> trước khi chỉnh sửa.</li>
</ul>
<pre><code class="language-bash">[ec2-user ~]$ sudo cp /etc/fstab /etc/fstab.orig
</code></pre>
<ul>
<li>Dùng lệnh <code>blkid</code> để tìm UUID của thiết bị.</li>
</ul>
<pre><code class="language-bash">[ec2-user ~]$ sudo blkid
</code></pre>
<ul>
<li>Mở tệp <code>/etc/fstab</code> và thêm dòng sau:</li>
</ul>
<pre><code class="language-bash">UUID=aebf131c-6957-451e-8d34-ec978d9581ae  /data  xfs  defaults,nofail  0  2
</code></pre>
<ul>
<li>Để kiểm tra lại tệp <code>/etc/fstab</code>, bạn có thể unmount volume và sau đó mount lại tất cả các hệ thống tập tin trong <code>/etc/fstab</code>.</li>
</ul>
<pre><code class="language-bash">[ec2-user ~]$ sudo umount /data
[ec2-user ~]$ sudo mount -a
</code></pre>
<p>Nếu không có lỗi, tệp <code>/etc/fstab</code> đã đúng và volume sẽ tự động gắn khi instance khởi động lại.</p>
<hr />
<p>format và tạo  phân vùng rồi tăng volume ebs rồi format lại </p>
<hr />
<h3 id="1-liet-ke-tat-ca-cac-phan-vung-va-iem-mount">1. <strong>Liệt kê tất cả các phân vùng và điểm mount</strong></h3>
<ul>
<li>Sử dụng lệnh sau để hiển thị cấu trúc phân vùng và điểm mount:
  <code>bash
  lsblk</code></li>
<li><strong>Ý nghĩa</strong>: Hiển thị các thiết bị lưu trữ (block devices), phân vùng, và điểm mount.</li>
</ul>
<hr />
<h3 id="2-hien-thi-thong-tin-dung-luong-va-khong-gian-trong-cua-tat-ca-cac-volume">2. <strong>Hiển thị thông tin dung lượng và không gian trống của tất cả các volume</strong></h3>
<ul>
<li>Dùng lệnh:
  <code>bash
  df -h</code></li>
<li><strong>Ý nghĩa</strong>: Hiển thị thông tin về dung lượng đã sử dụng, dung lượng còn trống của các volume theo định dạng dễ đọc (đơn vị GB/MB).</li>
</ul>
<hr />
<h3 id="3-tao-phan-vung-moi-bang-fdisk">3. <strong>Tạo phân vùng mới bằng <code>fdisk</code></strong></h3>
<ul>
<li>Thực hiện các bước sau để tạo phân vùng mới:
  <code>bash
  sudo fdisk /dev/xvdf</code>
  <strong>Trong giao diện <code>fdisk</code>:</strong></li>
<li>Gõ <code>n</code> để tạo một phân vùng mới.</li>
<li>Chọn <code>p</code> cho phân vùng chính (primary partition).</li>
<li>Chọn số phân vùng (thường là <code>1</code> nếu đây là phân vùng đầu tiên).</li>
<li>Chấp nhận kích thước mặc định (hoặc nhập kích thước tùy chỉnh).</li>
<li>Gõ <code>w</code> để ghi các thay đổi và thoát.</li>
</ul>
<hr />
<h3 id="4-inh-dang-phan-vung">4. <strong>Định dạng phân vùng</strong></h3>
<ul>
<li>Sau khi tạo phân vùng, định dạng nó bằng hệ thống tệp XFS:
  <code>bash
  sudo mkfs -t xfs /dev/xvdf1</code></li>
<li><strong>Ý nghĩa</strong>: Định dạng phân vùng <code>/dev/xvdf1</code> với hệ thống tệp XFS.</li>
</ul>
<hr />
<h3 id="5-mount-phan-vung">5. <strong>Mount phân vùng</strong></h3>
<ul>
<li>Tạo thư mục mount nếu chưa tồn tại:
  <code>bash
  sudo mkdir -p /data</code></li>
<li>Mount phân vùng vào thư mục <code>/data</code>:
  <code>bash
  sudo mount /dev/xvdf1 /data</code></li>
<li><strong>Kiểm tra</strong>: Dùng lệnh <code>df -h</code> để xác nhận phân vùng đã được mount.</li>
</ul>
<hr />
<h3 id="6-cau-hinh-tu-ong-mount-sau-khi-khoi-ong-lai">6. <strong>Cấu hình tự động mount sau khi khởi động lại</strong></h3>
<ul>
<li>
<p>Lấy UUID của phân vùng:
  <code>bash
  sudo blkid</code>
  Hoặc:
  <code>bash
  sudo lsblk -o +UUID</code>
  <strong>Kết quả</strong>: UUID sẽ trông như sau:
  <code>UUID="1234abcd-56ef-78gh-90ij-klmnopqrstuv"</code></p>
</li>
<li>
<p>Chỉnh sửa file <code>/etc/fstab</code> để thêm cấu hình mount:
  <code>bash
  sudo vi /etc/fstab</code>
  Thêm dòng sau vào cuối file (thay thế <code>UUID="..."</code> bằng UUID của bạn):
  <code>UUID="1234abcd-56ef-78gh-90ij-klmnopqrstuv" /data xfs defaults,nofail 0 0</code></p>
</li>
<li>
<p><strong>Kiểm tra cấu hình</strong>:</p>
</li>
<li>Tháo mount thư mục:
    <code>bash
    sudo umount /data</code></li>
<li>Thực thi lại lệnh mount từ file <code>fstab</code>:
    <code>bash
    sudo mount -a</code></li>
<li><strong>Kiểm tra lại</strong>: Dùng <code>df -h</code> để đảm bảo <code>/data</code> đã được mount.</li>
</ul>
<hr />
<h3 id="7-mo-rong-phan-vung-sau-khi-tang-kich-thuoc-ebs-tren-aws-console">7. <strong>Mở rộng phân vùng sau khi tăng kích thước EBS trên AWS Console</strong></h3>
<ul>
<li>Dùng lệnh sau để mở rộng phân vùng mà không mất dữ liệu:
  <code>bash
  sudo growpart /dev/xvdf 1</code></li>
<li><strong>Ý nghĩa</strong>: Mở rộng phân vùng <code>1</code> trên thiết bị <code>/dev/xvdf</code>.</li>
</ul>
<hr />
<h3 id="8-cap-nhat-lai-kich-thuoc-he-thong-tep">8. <strong>Cập nhật lại kích thước hệ thống tệp</strong></h3>
<ul>
<li>Sau khi mở rộng phân vùng, cập nhật lại kích thước hệ thống tệp:
  <code>bash
  sudo xfs_growfs /data</code></li>
<li><strong>Ý nghĩa</strong>: Mở rộng hệ thống tệp XFS để sử dụng toàn bộ không gian phân vùng.</li>
</ul>
<hr />
<h3 id="9-xac-minh">9. <strong>Xác minh</strong></h3>
<ul>
<li>Dùng các lệnh sau để kiểm tra:</li>
<li>Kiểm tra dung lượng mới:
    <code>bash
    df -h</code></li>
<li>Kiểm tra cấu trúc phân vùng:
    <code>bash
    lsblk</code></li>
</ul>
<p>Với các bước trên, bạn sẽ hoàn thành việc tạo, mount, và mở rộng phân vùng trên máy chủ Linux.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../../..", "features": ["content.code.copy", "content.action.edit"], "search": "../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>